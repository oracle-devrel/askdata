/*!
 * Copyright (c) 2024 Oracle and/or its affiliates.
 * All rights reserved. Oracle Digital Assistant Client Web SDK, Release: 24.4.0
 */
!function(t,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("WebSDK",[],factory):"object"==typeof exports?exports.WebSDK=factory():t.WebSDK=factory();t.WebSDK=factory()}(self,(function(){return function(){"use strict";var t={373:function(t,e,s){s.r(e),s.d(e,{ActionDisplayType:function(){return r},ActionStyle:function(){return i},ActionType:function(){return u},AttachmentType:function(){return a},BaseChatConnection:function(){return ht},ClientActionType:function(){return p},ConnectionEvent:function(){return ot},ConnectionState:function(){return Q},ContextSource:function(){return c},CoreApiError:function(){return at},CoreError:function(){return ct},CoreEvent:function(){return nt},DisplayType:function(){return n},ExecuteActionType:function(){return h},MessageType:function(){return l},ReadOnlyDisplayType:function(){return o},RecognitionError:function(){return rt},RecognitionLocale:function(){return tt},SenderType:function(){return d},SkillMessageSource:function(){return m},SpeechSynthesisServiceEvent:function(){return it},buildPostbackMessage:function(){return C},buildUserAttachmentMessage:function(){return z},buildUserMessage:function(){return S},buildUserTextMessage:function(){return M},getCurrentPosition:function(){return vt},getError:function(){return ut},getRejectPromiseError:function(){return dt},getUtteranceText:function(){return E},isEditFormPayloadWithFields:function(){return y},isEditFormPayloadWithRows:function(){return _},isEventPayload:function(){return w},isFormEntityWithFields:function(){return x},isFormEntityWithRows:function(){return k},isMessage:function(){return f},isMessagePayload:function(){return b},isPostbackPayload:function(){return v},isReadOnlyField:function(){return K},isValidLocale:function(){return st},isValidLocation:function(){return Mt},isValidMessage:function(){return U},isValidProfileMessage:function(){return W},requestOn:function(){return pt},setRequestHeader:function(){return lt}});const i={Primary:"primary",Danger:"danger",Default:"default"},r={Button:"button",Icon:"icon",Link:"link"},o={Text:"text",Link:"link",Action:"action",Media:"media"},n=Object.assign(Object.assign({},o),{SingleSelect:"singleSelect",MultiSelect:"multiSelect",DatePicker:"datePicker",TimePicker:"timePicker",Toggle:"toggle",TextInput:"textInput",NumberInput:"numberInput"}),a={Image:"image",Video:"video",Audio:"audio",File:"file"},c={ChatWindow:"chatWindow",CompactChat:"compactChat",UIWidget:"UIWidget",Skill:"skill"},h={NAVIGATE:"navigate",QUERY:"query",UPDATE_FIELDS:"updateFields",CUSTOM:"custom"},l={Attachment:"attachment",Card:"card",Location:"location",Postback:"postback",Raw:"raw",Suggest:"suggest",Text:"text",CloseSession:"closeSession",SessionClosed:"sessionClosed",Table:"table",Form:"form",TableForm:"tableForm",Status:"status",EditForm:"editForm",FormSubmission:"formSubmission",InboundEvent:"inboundEvent",OutboundEvent:"outboundEvent",TextStream:"textStream",Command:"command",Error:"error",UpdateApplicationContextCommand:"updateApplicationContextCommand",ExecuteApplicationActionCommand:"executeApplicationActionCommand"},p=Object.assign(Object.assign({},h),{COPY_MESSAGE_TEXT:"copyMessageText"}),u={Call:"call",Client:"client",Location:"location",Popup:"popup",Postback:"postback",Share:"share",SubmitForm:"submitForm",Url:"url",Webview:"webview"},d={Skill:"bot",User:"user"},m={Agent:"AGENT",Bot:"BOT"};var g=s(476);const f=t=>(0,g.isObject)(t)&&"messagePayload"in t,b=t=>(0,g.isObject)(t)&&"type"in t,v=t=>b(t)&&t.type===l.Postback,w=t=>b(t)&&(t.type===l.InboundEvent||t.type===l.OutboundEvent),x=t=>void 0!==t.fields,k=t=>void 0!==t.formRows,y=t=>void 0!==t.fields,_=t=>void 0!==t.formRows;function z(t,e,s){const i=function(t){const e=t.split("/")[0].toLowerCase();switch(e){case a.Audio:case a.Image:case a.Video:return e;default:return a.File}}(t);return{messagePayload:{type:l.Attachment,attachment:{type:i,url:e,title:s}}}}function M(t,e){const s={messagePayload:{text:t,type:l.Text}};return e&&(s.sdkMetadata?s.sdkMetadata.speechId=e:s.sdkMetadata={speechId:e}),s}function C(t){var e;let s;s="label"in t?t.label:null!==(e=t.text)&&void 0!==e?e:T;return{messagePayload:{text:s,postback:t.postback,type:l.Postback}}}function S(t){return{messagePayload:t}}const $="; ",T="",A=/<[^>]+>/g,O=/&#(\d+);/g,I=/&#[xX]([\da-fA-F]+);/g;function E(t,e){const s=t.messagePayload;let i=T;if(s.voice)return R(function(t){var e;const s=[null===(e=t.voice)||void 0===e?void 0:e.text];switch(t.type){case l.Card:s.push(function(t){if(!(null==t?void 0:t.length))return T;return t.filter((t=>t.voice)).map((t=>{var e;const s=[];return t.voice&&s.push(null===(e=t.voice)||void 0===e?void 0:e.text),s.push(N(t.actions)),s.filter(Boolean).join($)})).filter(Boolean).join($)}(t.cards));break;case l.Form:case l.TableForm:s.push(function(t){if(!(null==t?void 0:t.length))return T;return t.filter(Boolean).map((t=>t.voice&&t.voice.text)).filter(Boolean).join($)}(t.forms))}return s.push(N(t.actions)),s.push(N(t.globalActions)),s.filter(Boolean).join($)}(t.messagePayload));switch(s.type){case l.Attachment:i=function(t,e){return e[`${t.type}_${t.attachment.type}`]}(s,e);break;case l.Card:i=function(t,e){const s=t.cards;let i=T;if(null==s?void 0:s.length){const t=e.card,r=t?t.indexOf("{0}")>=0?t:`${t} {0}`:T,o=s.length>1;i=s.filter((t=>t.title)).map(((t,e)=>{const s=[o?r.replace("{0}",`${e+1}`):T];return t.voice?s.push(t.voice.text):(s.push(t.title),s.push(t.description)),s.push(L(t.actions)),s.filter(Boolean).join($)})).filter(Boolean).join($)}return i}(s,e);break;case l.Location:i=function(t){const e=t.location;return`${e.title?`${e.title}${$}`:T}${e.latitude},${e.longitude}`}(s);break;case l.Text:case l.TextStream:i=s.text;break;case l.Table:i=function(t,e){return P(t.paginationInfo)+t.rows.filter((t=>{var e;return null===(e=null==t?void 0:t.fields)||void 0===e?void 0:e.length})).map(((t,s)=>H(t,s,e))).filter(Boolean).join($)}(s,e);break;case l.Form:i=function(t,e){return P(t.paginationInfo)+t.forms.filter((t=>t)).map(((t,s)=>{const i=(t.title?`${t.title}: `:T)+j(t,e);return i?`${(e.itemIterator||T).replace("{0}",`${s+1}`)}: ${i}`:T})).filter(Boolean).join($)}(s,e);break;case l.TableForm:i=function(t,e){return P(t.paginationInfo)+t.rows.filter((t=>{var e;return null===(e=null==t?void 0:t.fields)||void 0===e?void 0:e.length})).map(((s,i)=>H(s,i,e)+$+j(t.forms[i],e))).filter(Boolean).join($)}(s,e);break;case l.EditForm:i=function(t){var e,s;return null!==(s=null!==(e=t.errorMessage)&&void 0!==e?e:t.title)&&void 0!==s?s:T}(s)}return(0,g.pipe)(function(t,e){if(t.type===l.EditForm&&t.errorMessage)return e;const s=[];return s.push(t.headerText),s.push(e),s.push(L(t.actions)),s.push(t.footerText),s.push(L(t.globalActions)),s.filter(Boolean).join($)}(s,i),R,D,F)}function L(t){return t?t.filter((t=>t.type!==u.SubmitForm)).map((t=>t.voice?t.voice.text:t.label||T)).filter(Boolean).join($):T}function P(t){if(t&&t.totalCount>t.rangeSize){const e=t.status;return e?e+$:T}return T}function j(t,e){let s=L(t.actions);return s&&(s=$+s),x(t)?V(t.fields,e)+s:t.formRows.filter((t=>null==t?void 0:t.columns.length)).map((t=>t.columns.filter((t=>null==t?void 0:t.fields.length)).map((t=>V(t.fields,e))).filter(Boolean).join($))).filter(Boolean).join($)+s}function H(t,e,s){return`${(s.itemIterator||T).replace("{0}",`${e+1}`)}: ${V(t.fields,s)}`}function V(t,e){return(null==t?void 0:t.length)?t.filter((t=>t)).map((t=>function(t,e){var s;const i=null!==(s=t.label)&&void 0!==s?s:T,r=i?`${i}: `:T;switch(t.displayType){case o.Text:return r+(t.value||T);case o.Link:return r+(e.linkField||T).replace("{0}",i);case o.Action:const s=t.action;return r+(s.voice?s.voice.text:s.label)||T;default:return i}}(t,e))).filter(Boolean).join($):T}function F(t){if(null==t?void 0:t.length){const e=t.replace((0,g.resetRegex)(O),((t,e)=>String.fromCharCode(e))).replace((0,g.resetRegex)(I),((t,e)=>{const s=Number.parseInt(`0x${e}`,16);return String.fromCharCode(s)}));return(0,g.removeDisplayNoneAndDecode)(e).replace((0,g.resetRegex)(A),T)}return T}function N(t){return(null==t?void 0:t.length)?t.filter((t=>t.type!==u.SubmitForm)).map((t=>t.voice&&t.voice.text)).filter(Boolean).join($):T}const R=t=>t.replaceAll(/([-.,?:;!]);/g,"$1"),D=t=>t.replaceAll(/\r|\n|<br\/?>/gim,$);function U(t){const e=!1;if(!f(t))return e;const s=t.messagePayload;return b(s)?s.actions&&!B(s.actions)||s.globalActions&&!B(s.globalActions)?e:function(t){switch(t.type){case l.Attachment:return function(t){const e=t.attachment;return!(!(null==e?void 0:e.type)||!e.url)}(t);case l.Card:return function(t){let e=!1;if(t.layout&&t.cards.length){e=!0;for(const e of t.cards){if(!e.title)return!1;if(e.actions&&!B(e.actions))return!1}}return e}(t);case l.CloseSession:case l.SessionClosed:return!0;case l.Location:return function(t){const e=t.location;return!(!(null==e?void 0:e.latitude)||!e.longitude)}(t);case l.Postback:return function(t){return!!t.postback}(t);case l.Text:return function(t){return!!t.text}(t);case l.TextStream:return function(t){return"string"==typeof t.text&&!!t.streamState}(t);case l.Table:return Z(t);case l.Form:return q(t);case l.TableForm:return function(t){return Z(t)&&q(t)}(t);case l.EditForm:return function(t){const e=t.fields,s=t.formColumns,i=t.formRows;return(null==e?void 0:e.length)>0&&e.every((t=>function(t){const e=t.displayType,s=t;return e&&Object.values(n).includes(e)&&(function(t){const e=t.id;let s=!1;switch(t.displayType){case n.SingleSelect:case n.MultiSelect:s=function(t){const e=t.layoutStyle,s=t.options;return void 0!==e&&"string"==typeof e&&e.length>0&&void 0!==s&&s.length>0&&s.every((t=>function(t){const e=t.label,s=t.value;return void 0!==e&&"string"==typeof e&&e.length>0&&void 0!==s}(t)))}(t);break;case n.Toggle:s=function(t){const e=t.valueOn,s=t.valueOff;return void 0!==e&&"string"==typeof e&&e.length>0&&void 0!==s&&"string"==typeof s&&s.length>0}(t);break;case n.DatePicker:case n.TimePicker:case n.TextInput:case n.NumberInput:s=!0}return s&&void 0!==e&&e.length>0}(s)||Y(t))}(t)))&&"number"==typeof s&&s>0||(null==i?void 0:i.length)>0}(t);case l.FormSubmission:return function(t){return!!t.submittedFields}(t);case l.InboundEvent:case l.OutboundEvent:return function(t){return!!t.eventType&&!!t.eventVersion&&!!t.eventData}(t);case l.Status:return function(t){return t.type===l.Status&&"status"in t}(t);case l.Command:return function(t){return t.type===l.Command&&"command"in t}(t);case l.UpdateApplicationContextCommand:return function(t){const{context:e,source:s}=t;return void 0!==e&&"string"==typeof e&&X.includes(s)}(t)}return!1}(s):e}function B(t){for(const e of t)if(!e.type||!e.label||"string"!=typeof e.label)return!1;return!0}function W(t){return(0,g.isObject)(t)&&(0,g.isObject)(t.profile)}function Z(t){const e=t.headings,s=t.rows;return e&&e.length>0&&s&&s.length>0&&e.every((t=>function(t){const e=t.label;return void 0!==e&&e.length>0}(t)))&&s.every((t=>G(t)))}function q(t){const e=t.forms;return e&&e.length>0&&e.every((t=>x(t)&&G(t)||k(t)))}function G(t){const e=t.fields;return e&&e.length>0&&e.every((t=>Y(t)))}function Y(t){return!!t.displayType&&K(t)}const J=Object.values(o);function K(t){return t&&J.includes(t.displayType)}const X=Object.values(c);const Q={Connecting:0,Open:1,Closing:2,Closed:3},tt={DE_DE:"de-de",EN_AU:"en-au",EN_GB:"en-gb",EN_IN:"en-in",EN_US:"en-us",ES_ES:"es-es",FR_FR:"fr-fr",HI_IN:"hi-in",IT_IT:"it-it",PT_BR:"pt-br"},et=Object.keys(tt).map((t=>tt[t]));function st(t){return et.indexOf(t)>=0}const it={TTSStart:"tts:start",TTSStop:"tts:stop"},rt={RecognitionNotAvailable:"RecognitionNotAvailable",RecognitionNotReady:"RecognitionNotReady",RecognitionNoAPI:"RecognitionNoAPI",RecognitionProcessingFailure:"RecognitionProcessingFailure",RecognitionTooMuchSpeechTimeout:"RecognitionTooMuchSpeechTimeout",RecognitionNoSpeechTimeout:"RecognitionNoSpeechTimeout",RecognitionMultipleConnection:"RecognitionMultipleConnection"},ot={Open:"open",Close:"close",Error:"error",Message:"message",MessageReceived:"message:received",MessageSent:"message:sent",State:"state"},nt=Object.assign(Object.assign(Object.assign({},it),ot),h),at={ConnectionNone:"ConnectionNone",ConnectionExplicitClose:"ConnectionExplicitClose",MessageInvalid:"MessageInvalid",NetworkFailure:"NetworkFailure",NetworkOffline:"NetworkOffline",ProfileInvalid:"ProfileInvalid",TtsNotAvailable:"TtsNotAvailable",TTSNoWebAPI:"TTSNoWebAPI",SuggestionsEmptyRequest:"SuggestionsEmptyRequest",SuggestionsInvalidRequest:"SuggestionsInvalidRequest",SuggestionsTimeout:"SuggestionsTimeout",UploadBadFile:"UploadBadFile",UploadMaxSize:"UploadMaxSize",UploadNetworkFail:"UploadNetworkFail",UploadNotAvailable:"UploadNotAvailable",UploadUnauthorized:"UploadUnauthorized",UploadZeroSize:"UploadZeroSize",LocationNoAPI:"LocationNoAPI",LocationNotAvailable:"LocationNotAvailable",LocationTimeout:"LocationTimeout",LocationInvalid:"LocationInvalid"},ct=Object.assign(Object.assign(Object.assign({},at),g.AuthError),rt);class ht{constructor(t){this.dispatcher=t,this.state=Q.Closed}getState(){return this.state}isOpen(){return this.state===Q.Open}isClosed(){return this.state===Q.Closed}on(t,e){this.dispatcher.bind(t,e)}off(t,e){this.dispatcher.unbind(t,e)}setState(t){this.state=t,this.dispatcher.trigger(nt.State,t)}}function lt(t,e,s){t.setRequestHeader(e,s)}function pt(t,e,s){t.addEventListener(e,s)}function ut(t){return Error(t)}function dt(t){return Promise.reject(ut(t))}const mt=navigator,gt=null==mt?void 0:mt.geolocation,ft=1e5,bt=t=>Math.round(t*ft)/ft;function vt(){return gt?new Promise(((t,e)=>{gt.getCurrentPosition((e=>{const s=e.coords,i=Object.assign(Object.assign({},s),{latitude:bt(s.latitude),longitude:bt(s.longitude)});t(i)}),(t=>{let s;switch(t.code){case t.POSITION_UNAVAILABLE:s=ct.LocationNotAvailable;break;case t.TIMEOUT:s=ct.LocationTimeout;break;case t.PERMISSION_DENIED:default:s=ct.LocationNoAPI}e(ut(s))}),{enableHighAccuracy:!0,timeout:5e3})})):dt(ct.LocationNoAPI)}function wt(t){return"number"==typeof t}function xt(t,e,s){return t>=e&&t<=s}const kt=-90,yt=90,_t=-180,zt=180;function Mt(t){const{latitude:e,longitude:s}=t;return wt(e)&&wt(s)&&xt(e,kt,yt)&&xt(s,_t,zt)}},349:function(t,e,s){s.r(e),s.d(e,{ActionType:function(){return r.ActionType},AttachmentType:function(){return r.AttachmentType},ConnectionState:function(){return r.ConnectionState},CoreError:function(){return r.CoreError},CoreEvent:function(){return r.CoreEvent},CoreTTS:function(){return Ot},DisplayType:function(){return r.DisplayType},FILE_TYPES:function(){return At},MAX_MB:function(){return zt},MessageType:function(){return r.MessageType},RecognitionLocale:function(){return r.RecognitionLocale},SenderType:function(){return r.SenderType},SkillMessageSource:function(){return r.SkillMessageSource},SpeechSynthesisServiceEvent:function(){return r.SpeechSynthesisServiceEvent},WebCore:function(){return Et},buildPostbackMessage:function(){return r.buildPostbackMessage},buildUserAttachmentMessage:function(){return r.buildUserAttachmentMessage},buildUserMessage:function(){return r.buildUserMessage},buildUserTextMessage:function(){return r.buildUserTextMessage},getCurrentPosition:function(){return r.getCurrentPosition},getError:function(){return r.getError},getRejectPromiseError:function(){return r.getRejectPromiseError},getUtteranceText:function(){return r.getUtteranceText},isEditFormPayloadWithFields:function(){return r.isEditFormPayloadWithFields},isEditFormPayloadWithRows:function(){return r.isEditFormPayloadWithRows},isFormEntityWithFields:function(){return r.isFormEntityWithFields},isFormEntityWithRows:function(){return r.isFormEntityWithRows},isMessagePayload:function(){return r.isMessagePayload},isPostbackPayload:function(){return r.isPostbackPayload},isValidLocale:function(){return r.isValidLocale},isValidLocation:function(){return r.isValidLocation},isValidMessage:function(){return r.isValidMessage},isValidProfileMessage:function(){return r.isValidProfileMessage}});var i=s(476),r=s(373);let o=1,n=1,a=1;const c=window,h=c.addEventListener,l=c.speechSynthesis,p=c.SpeechSynthesisUtterance,u=c.navigator,d=clearTimeout;class m{constructor(){if(this.t=!1,this.i=(0,i.generateEventDispatcher)(),!c||!l||!p)throw Error("TTSNoWebAPI");w().then((t=>{this.l=t})),h("beforeunload",(t=>{l.cancel(),d(this.p),delete t.returnValue})),h("click",(()=>{l&&(l.cancel(),l.resume(),l.speak(new p(" ")))}),{once:!0})}speak(t){if(this.l){const e=new p(t);e.voice=this.l,e.pitch=o,e.rate=n,e.volume=a,l.paused&&l.resume(),this.t||(this.t=!0,this.i.trigger(r.SpeechSynthesisServiceEvent.TTSStart)),l.speak(e),this.l.localService||(d(this.p),k((t=>this.p=t)))}}cancel(){l.speaking&&(l.cancel(),d(this.p))}getVoices(){return g()}setVoice(t){return function(t){const e=t.map((t=>Object.assign({lang:"",name:""},t)));return g().then((t=>{for(const s of e)for(const e of t)if(y(s.lang,e.lang)&&y(s.name,e.name))return e;for(const s of e)for(const e of t)if(y(s.lang,e.lang))return e;for(const s of e)for(const e of t)if(e.lang.indexOf(s.lang)>=0)return e;return w()}))}(t).then((t=>{this.l=t,o=t.pitch||1,n=t.rate||1,a=t.volume||1}))}getVoice(){return this.l}on(t,e){this.i.bind(t,e)}off(t,e){this.i.unbind(t,e)}}function g(){return new Promise((t=>{f(t),l.addEventListener("voiceschanged",(()=>{f(t)}))}))}function f(t){const e=l.getVoices();if(e.length){t(function(t){if(!Array.isArray(t))return t.u;return t}(v(e)))}}const b=["Albert","Bad News","Bahh","Bells","Boing","Bubbles","Cellos","Good News","Jester","Organ","Superstar","Trinoids","Whisper","Wobble","Zarvox"],v=t=>t.filter((t=>b.indexOf(t.name)<0));function w(){return g().then((t=>{let e;const s=t.filter((t=>t.default));if(1===s.length&&(e=s[0]),!e){const s=u&&u.language;s&&(e=t.find((t=>y(t.lang,s))))}if(!e){const s=u&&u.language.substring(0,2);s&&(e=t.find((t=>_(t.lang).indexOf(s)>=0)))}return e||(e=t[0]),e}))}const x=1e4;function k(t){const e=c.setTimeout((()=>{l.speaking&&(l.pause(),l.resume(),k(t))}),x);t(e)}function y(t,e){return _(t)===_(e)}const _=t=>t.toLowerCase(),z={DEFAULT:0,VOICE_RECOGNITION:6},M=window.audioinput;function C(){return M}function S(t){return new Promise(((t,e)=>{const s=C();s.checkMicrophonePermission((i=>{i?t():s.getMicrophonePermission(((s,i)=>{s?t():e(i)}))}))})).then((()=>{const e=C();return e.start(t),e}))}function $(){return new Promise((t=>{const e=C();e.isCapturing()?(e.stop(t),e.disconnect()):t()}))}let T=window.AudioContext;const A=window.navigator;let O=A.mediaDevices;const I=A.webkitGetUserMedia,E=A.mozGetUserMedia,L=!!(O&&O.getUserMedia||I||E);var P=function(t,e,s,i){return new(s||(s=Promise))((function(r,o){function n(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(n,a)}c((i=i.apply(t,e||[])).next())}))};const j=4096,H=48e3;let V,F=!0;class N{static getInstance(){return this.v||(this.v=new N),this.v}constructor(){this.k=[],this._=!1,T=T||window.webkitAudioContext,L&&(void 0===O&&(O={}),void 0===O.getUserMedia&&(O.getUserMedia=t=>{const e=I||E;if(!e){const t=Error("getUserMedia is not implemented in this browser");return t.name="TypeError",Promise.reject(t)}return new Promise(((s,i)=>{e.call(navigator,t,s,i)}))}))}startRecognition(t){var e,s;return this.C=new i.Deferred,t&&(this.$=t.onRecognitionText,this.T=t.onAnalyserReady,this.O=t.onVisualData,this.I=t.onSpeechNetworkChange),(null===(e=this.L)||void 0===e?void 0:e.readyState)===r.ConnectionState.Closing||(null===(s=this.L)||void 0===s?void 0:s.readyState)===r.ConnectionState.Connecting?Promise.reject(new Error(r.RecognitionError.RecognitionMultipleConnection)):(this._?this.C.resolve():this.P?this.j():this.V().then((()=>this.j())),this.C.promise)}stopRecognition(){return this.F=new i.Deferred,this._?this.N():this.F.resolve(),this.F.promise}setConfig(t){return t.recognitionLocale||(t.recognitionLocale=r.RecognitionLocale.EN_US),t.tokenGenerator&&(this.R=i.AuthTokenService.getInstance()),this.U=t,this.V()}setLocale(t){(0,r.isValidLocale)(t)&&this.U&&(this.U.recognitionLocale=t,this.V())}B(t){var e;null===(e=this.I)||void 0===e||e.call(this,t)}V(){return(t=this.U,e=this.R,new Promise(((s,i)=>{t.tokenGenerator?e.get().then((e=>{t.channelId=e.getClaim("channelId"),t.userId=e.getClaim("userId"),U(t,s,i)})).catch((t=>i(t))):U(t,s,i)}))).then((t=>{this.P=t}));var t,e}j(){return new Promise(((t,e)=>{L?function(t,e){navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{const s=new AudioContext;t({context:s,stream:s.createMediaStreamSource(e)})})).catch((()=>{e(Error(r.RecognitionError.RecognitionNoAPI))}))}(t,e):void 0!==C()?function(t,e){$().then((()=>S({audioSourceType:z.VOICE_RECOGNITION,bufferSize:j,streamToWebAudio:!0}).then((e=>{t({context:C().getAudioContext(),stream:e})})))).catch((()=>{e(Error(r.RecognitionError.RecognitionNoAPI))}))}(t,e):e(Error(r.RecognitionError.RecognitionNoAPI))})).then((t=>{let e;this.k=[],V=new Float32Array(0),this.L=this.W(this.P),function(t,e,s){return P(this,void 0,void 0,(function*(){const i=t.createAnalyser();i.smoothingTimeConstant=.8,i.fftSize=256;const r=`class RecorderProcessor extends AudioWorkletProcessor {\n        buffersize = ${j};\n\n        // Track the current buffer fill level\n        _bytesWritten = 0;\n\n        // Create  a buffer of fixed size\n        _buffer = new Float32Array(this.buffersize);\n\n        constructor() {\n            super();\n            this.initBuffer();\n        }\n\n        initBuffer() {\n            this._bytesWritten = 0;\n        }\n\n        isBufferEmpty() {\n            return this._bytesWritten === 0;\n        }\n\n        isBufferFull() {\n            return this._bytesWritten === this.buffersize;\n        }\n\n        flush() {\n            // trim the buffer if ended prematurely\n            this.port.postMessage(\n                this._bytesWritten < this.buffersize ? this._buffer.slice(0, this._bytesWritten) : this._buffer\n            );\n            this.initBuffer();\n        }\n\n        process(inputs) {\n            this.append(inputs[0][0]);\n\n            return true;\n        }\n\n        /**\n         *\n         * @param {Float32Array} channelData\n         * @returns\n         */\n        append(channelData) {\n            if (this.isBufferFull()) {\n                this.flush();\n            }\n\n            if (!channelData) return;\n\n            for (let i = 0; i < channelData.length; i++) {\n                this._buffer[this._bytesWritten++] = channelData[i];\n            }\n        }\n    }\n\n    registerProcessor('recorder.worklet', RecorderProcessor);`,o=URL.createObjectURL(new Blob([r],{type:"application/javascript"}));yield t.audioWorklet.addModule(o);const n=new AudioWorkletNode(t,"recorder.worklet");return URL.revokeObjectURL(o),e.connect(i),i.connect(n),n.connect(t.destination),n.port.onmessage=s,{analyser:i,processor:n}}))}(t.context,t.stream,this.q.bind(this)).then((s=>{e=s,this.T&&this.T(e.analyser),this.G=t.context,this.Y=t.stream,this.J=e.analyser,this.K=e.processor}))})).catch((t=>{this.C&&this.C.reject(t)}))}W(t){const e=new WebSocket(t);return e.onopen=this.X.bind(this),e.onclose=this.tt.bind(this),e.onmessage=this.et.bind(this),e.onerror=this.st.bind(this),e}X(){this.U.tokenGenerator?this.R.get().then((t=>{this.L.send(`Bearer ${t.token}`),this.B(r.ConnectionState.Open),this.rt()})):(this.B(r.ConnectionState.Open),this.rt())}tt(){this._&&this.N(),this.F&&(this.F.resolve(),this.F=void 0),this.B(r.ConnectionState.Closed)}et(t){try{const e=JSON.parse(t.data);if(!e.event&&e.code)throw t;const s=function(t){let e,s;const i=t.requestId,o=t.nbest;"partialResult"===t.event?(e="partial",s=o[0].utterance):o&&o.length?(e="final",s=o[0].utterance):(e="error",s=t.resultCode?r.RecognitionError.RecognitionTooMuchSpeechTimeout:r.RecognitionError.RecognitionNoSpeechTimeout);return{requestId:i,type:e,text:s,message:t}}(e);"finalResult"===e.event&&this.stopRecognition(),this.$&&this.$(s)}catch(t){this.ot(r.RecognitionError.RecognitionProcessingFailure),this.stopRecognition()}}st(){this.L.readyState===r.ConnectionState.Open&&(this.ot(r.RecognitionError.RecognitionProcessingFailure),this.L.close())}ot(t){this.$&&this.$({requestId:"",text:t,type:"error"})}q(t){var e;this.C&&(this._=!0,this.C.resolve(),this.C=void 0);const s=t.data,i=(null===(e=this.G)||void 0===e?void 0:e.sampleRate)||H;try{const t=function(t,e,s){if(s===e)return t;if(s>e)throw Error();let i=[];if(e===H)i=B;else{if(44100!==e)throw Error();i=W}const r=e/s;let o,n,a;F?(o=Math.floor(t.length%r),n=t.length-o,a=0===o?Array.from(t):t.slice(0,n)):(o=Math.floor((t.length+V.length-i.length)%r),n=t.length+V.length-i.length-o,a=new Float32Array(V.length+n),a.set(V),a.set(t.slice(0,n),V.length));const c=Math.floor(n/r),h=new Int16Array(c),l=-1,p=32767;if(e===H)for(let t=i.length;t<a.length;t+=r){let e=0;for(let s=0;s<i.length;s++)e+=a[t-s]*i[s];const s=Math.max(Math.min(e,1),l)*p;h[(t-i.length)/r]=s}else{const t=[];for(let e=i.length;e<a.length;e++){let s=0;for(let t=0;t<i.length;t++)s+=a[e-t]*i[t];t[e-i.length]=s}for(let e=0;e<c;e++){const s=3,i=e*r,o=Math.floor(i)-s+1,n=Math.floor(i)+s;let a=0;for(let e=o;e<=n;e++){a+=(e<0?t[0]:e>=t.length?t[t.length-1]:t[e])*Z(s,i-e)}h[e]=Math.max(Math.min(a,1),l)*p}}V=F?t.slice(n-i.length-V.length):t.slice(n-i.length-(V.length-i.length));return F=!1,h.buffer}(s,i,16e3);this.O&&this.nt(this.J),this.ct(t)}catch(t){this.ot(r.RecognitionError.RecognitionProcessingFailure),this.stopRecognition()}}nt(t){if(t){const e=new Uint8Array(t.frequencyBinCount);t.getByteFrequencyData(e),this.O&&this.O(e)}}ct(t){this.L.readyState!==r.ConnectionState.Open||this.k.length?this.k.push(t):this.L.send(t)}rt(){if(this.L.readyState===r.ConnectionState.Open)for(;this.k.length;){const t=this.k.shift();t&&this.L.send(t)}}N(){var t,e,s;(this._=!1,this.L)&&(this.L.readyState===r.ConnectionState.Open&&(this.L.send("Done"),this.L.close()),this.K&&this.K.disconnect(),this.J&&this.J.disconnect(),C()?$():(s=this.Y)&&s.mediaStream&&s.mediaStream.getAudioTracks().forEach((t=>{t.stop()})),null===(t=this.Y)||void 0===t||t.disconnect(),null===(e=this.G)||void 0===e||e.suspend(),this.K=void 0,this.J=void 0,this.Y=void 0,this.k=[],F=!0,V=new Float32Array(0))}}const R="/voice/stream/recognize",D="generic";function U(t,e,s){t.channelId&&t.userId||s(Error(r.RecognitionError.RecognitionNotReady)),e(function(t){const e=`ws${t.isTLS?"s":""}://`,s=`${R}/${t.recognitionLocale}/${D}`,r={channelId:t.channelId||"",encoding:"audio/raw",userId:t.userId||""};t.tokenGenerator&&(r.jwtInBody="true");return(0,i.buildURL)(e,t.URI,r,s)}(t))}const B=[-25033838264794034e-21,-3645156113737857e-20,-11489993827892933e-21,393243788874656e-19,6998419352067277e-20,37556691270439976e-21,-476966455345305e-19,-.00011379935461751734,-8400957697117619e-20,4208817777607469e-20,.00016391587447478332,.00015508372993570357,-1253765788919669e-20,-.00021258262011091092,-.0002524059896175195,-51874329668708116e-21,.0002479230009768214,.00037351534477673157,.00016157590781788105,-.0002541085239198603,-.000510486865332593,-.0003246104617540939,.00021219136947965464,.0006488877825604561,.0005444416935293036,-.0001016639071691704,-.0007673001147209819,-.0008176720912938691,-972696982411551e-19,.0008376185852528038,.0011319450250252222,.0004008193339799052,-.0008262743020160207,-.0014643282305934196,-.0008183365045047033,.0006964471772153777,.001780467922489105,.0013489288090360295,-.00041122152287042,-.0020347535966250413,-.0019782994815083733,-6247794246099269e-20,.002171643809964705,.0026761621389245617,.00074944268608935,-.00212817775887288,-.003394541347147186,-.0016615884301227524,.001837545335885159,.004067170702246546,.0027936171643976352,-.001233420727213658,-.004610035314537476,-.004119319153202972,.00025459137646049936,.00492286494534436,.005588805700369816,.001150762425755883,-.004891042781491068,-.0071267634777626675,-.003021979039818941,.00438688631315642,.008631467181982988,.005385139236634672,-.003268406079325266,-.009973661255235284,-.008256256502745316,.0013719935383757782,.010993210336541666,.011651337116264694,.0015082475865128093,-.01148872195209017,-.015609515327517686,-.005671504441670989,.011188303272599716,.02024519058502148,.011637590928971467,-.009667754909210324,-.025878090076785515,-.020500381603699786,.006098908137700642,.033428666116203716,.03513487017573178,.001719739622764723,-.046085580848361105,-.06623078150315037,-.023349941728869696,.08292213207159124,.21069217442624302,.2973829711397418,.2973829711397419,.21069217442624305,.08292213207159124,-.023349941728869693,-.06623078150315037,-.046085580848361105,.0017197396227647225,.03513487017573178,.033428666116203716,.006098908137700641,-.020500381603699783,-.025878090076785508,-.009667754909210326,.011637590928971469,.020245190585021472,.011188303272599716,-.00567150444167099,-.015609515327517682,-.01148872195209017,.001508247586512809,.011651337116264699,.010993210336541666,.0013719935383757782,-.008256256502745314,-.009973661255235283,-.0032684060793252657,.00538513923663467,.008631467181982988,.004386886313156419,-.0030219790398189413,-.0071267634777626675,-.0048910427814910715,.0011507624257558842,.005588805700369813,.00492286494534436,.00025459137646049936,-.004119319153202973,-.004610035314537475,-.0012334207272136583,.002793617164397636,.004067170702246546,.0018375453358851592,-.0016615884301227509,-.0033945413471471847,-.0021281777588728797,.0007494426860893505,.0026761621389245612,.0021716438099647056,-6247794246099253e-20,-.001978299481508373,-.0020347535966250404,-.00041122152287042,.0013489288090360292,.0017804679224891048,.0006964471772153777,-.0008183365045047026,-.00146432823059342,-.0008262743020160207,.0004008193339799063,.0011319450250252222,.0008376185852528037,-9726969824115494e-20,-.0008176720912938694,-.0007673001147209783,-.00010166390716916983,.0005444416935293033,.0006488877825604562,.0002121913694796546,-.00032461046175409424,-.000510486865332593,-.00025410852391986036,.0001615759078178811,.0003735153447767315,.00024792300097682137,-5187432966870808e-20,-.0002524059896175194,-.00021258262011091095,-1253765788919669e-20,.0001550837299357036,.0001639158744747833,42088177776074685e-21,-8400957697117623e-20,-.00011379935461751733,-4769664553453051e-20,3755669127044002e-20,699841935206728e-19,393243788874656e-19,-11489993827892933e-21,-3645156113737856e-20,-2503383826479402e-20],W=[-5044267067893139e-21,5738740247594612e-21,1611195555688156e-20,10560179594562795e-21,-1242816862904201e-20,-3084430704328611e-20,-18160396924882423e-21,2303124169528074e-20,5216612702894834e-20,2806026886746509e-20,-389608521587068e-19,-8174245278012476e-20,-4037543061985353e-20,619375276294956e-19,.00012143092661620545,55083199655424166e-21,-9401891583478883e-20,-.00017326981522755043,-7198069055926206e-20,.0001376274218691789,.00023946132645647525,9064030545698025e-20,-.00019557611633250834,-.0003223511502826996,-.00011036322783022617,.0002710935667931249,.00042440564349633953,.00013013140955365376,-.00036784896615780913,-.0005481886438481025,-.00014855826094166272,.0004899798946967381,.000696340560985472,.00016383778624615643,-.0006421263408051642,-.0008715631880363658,-.00017369118859371453,.000829476349448821,.0010766146787146871,.00017530890385814463,-.0010578310750603923,-.001314320458073489,-.0001652844648711556,.0013337004262191077,.0015876076783199174,.000139534308084411,-.0016644454627712116,-.001899573527380014,-9319422024995832e-20,.002058491185395933,.0022536018141979036,20477911370491685e-21,-.0025256449668619525,-.0026535487754524955,8552498376473957e-20,.0030775744811722015,.0031040297261921,-.00023314744969763122,-.003728529808331677,-.003610856230113392,.000432598472497653,.0044964472481822506,.004181705019767344,-.0006966685466235378,-.005404666489478738,-.00482715710731867,.0010418556659416306,.006484667519607787,.00556235368742558,-.0014902159613265254,-.007780573986407925,-.0064097301786953595,.002072517010858728,.009356870546119134,.0074037416266333166,-.00283386009764953,-.011312323822665827,-.008599512596140524,.003844300507349054,.013806774337071994,.01008985372973804,-.005220460312862638,-.01711716324115331,-.01204196749753927,.007174046245357611,.021768247992024713,.01478690833035584,-.010136389804721707,-.02888735624896028,-.019078400739739057,.015146805312378952,.041410446665863104,.027068163980255515,-.025512027260482153,-.07011218378743589,-.04829678433503421,.06041368701604651,.21199607414538668,.3213532652447261,.3213532652447261,.21199607414538668,.060413687016046526,-.04829678433503422,-.07011218378743589,-.025512027260482153,.027068163980255515,.041410446665863104,.015146805312378952,-.019078400739739057,-.02888735624896028,-.010136389804721703,.01478690833035584,.021768247992024713,.007174046245357611,-.01204196749753927,-.01711716324115331,-.005220460312862639,.010089853729738038,.013806774337071994,.0038443005073490553,-.008599512596140524,-.011312323822665827,-.0028338600976495314,.007403741626633317,.009356870546119134,.002072517010858727,-.006409730178695359,-.007780573986407925,-.001490215961326526,.005562353687425577,.006484667519607787,.0010418556659416256,-.004827157107318673,-.005404666489478739,-.0006966685466235378,.004181705019767345,.004496447248182251,.0004325984724976533,-.003610856230113392,-.003728529808331677,-.0002331474496976315,.0031040297261921003,.003077574481172201,8552498376473897e-20,-.002653548775452496,-.002525644966861952,2047791137049164e-20,.002253601814197904,.002058491185395933,-9319422024995909e-20,-.001899573527380014,-.0016644454627712118,.00013953430808441038,.0015876076783199174,.0013337004262191077,-.0001652844648711556,-.0013143204580734896,-.0010578310750603925,.00017530890385814333,.0010766146787146878,.0008294763494488195,-.00017369118859371463,-.00087156318803637,-.0006421263408051633,.00016383778624615698,.0006963405609854716,.0004899798946967381,-.00014855826094166245,-.0005481886438481027,-.00036784896615780924,.00013013140955365368,.00042440564349633964,.00027109356679312505,-.00011036322783022619,-.0003223511502826996,-.00019557611633250842,9064030545698017e-20,.00023946132645647525,.00013762742186917883,-7198069055926207e-20,-.0001732698152275505,-9401891583478886e-20,5508319965542416e-20,.00012143092661620549,6193752762949557e-20,-4037543061985352e-20,-8174245278012477e-20,-38960852158706805e-21,28060268867465078e-21,52166127028948336e-21,2303124169528077e-20,-18160396924882423e-21,-30844307043286126e-21,-12428168629042018e-21,10560179594562806e-21,1611195555688157e-20,5738740247594605e-21,-5044267067893138e-21];function Z(t,e){let s;if(0===e)s=1;else if(e>=t||e<=-t)s=0;else{const i=Math.PI*e;s=t*Math.sin(i)*Math.sin(i/t)/(i*i)}return s}const q="ended",G="suspended";const Y=(t,e)=>new Float32Array([...t,...J(e)]),J=t=>Float32Array.from(new Int16Array(t),(t=>t/32768)),K="speak",X="channelId",Q="userId",tt="https://",et=/<[\w]+/g,st=K;class it{constructor(t){this.ht="",this.lt=[],this.ut=!1,this.t=!1,this.dt=new AbortController,this.i=(0,i.generateEventDispatcher)(),this.U=t=>{this.gt=t,this.ht=`${t.URI}/tts/`,t.tokenGenerator&&(this.R=i.AuthTokenService.getInstance())},this.ft=t=>{let e=t;t.match(et)&&(e=`<${st}>${t}</${st}>`);const s=Object.assign({text:encodeURIComponent(e),stream:"chunked"},this.l&&{voice:this.l.name});return this.bt(K,s).then((t=>this.vt(t)))},this.bt=(t,e={})=>{const s=this.gt;if(s){if(s.tokenGenerator)return this.R.get().then((s=>(e[X]=s.getClaim(X),e[Q]=s.getClaim(Q),Promise.resolve((0,i.buildURL)(tt,this.ht,e,t)))));e[X]=s.channelId,e[Q]=s.userId}return Promise.resolve((0,i.buildURL)(tt,this.ht,e,t))},this.vt=(t,e=!0)=>new Promise(((s,i)=>{const r=this.gt,o=e?this.dt.signal:void 0;r&&r.tokenGenerator?this.R.get().then((e=>{fetch(t,{signal:o,headers:{Authorization:`Bearer ${e.token}`}}).then(s,i)})):fetch(t,{signal:o}).then(s,i)})),this.wt=t=>{if(t&&t.body){const e=t.body.getReader();this.xt(),this.t||(this.t=!0,this.i.trigger(r.SpeechSynthesisServiceEvent.TTSStart)),this.kt(e)}},this.kt=t=>{t.read().then((({done:e,value:s})=>{if(e)return void this.yt.next();let i=s.buffer;if(this.ut||(this.ut=!0,this._t.config(at(i)),i=nt(i)),void 0!==this.zt){const t=new Uint8Array(i),e=new Uint8Array(t.length+1);e[0]=this.zt,e.set(t,1),i=ot(e),this.zt=void 0}if(i.byteLength%2){const t=new Uint8Array(i),e=new Uint8Array(t.length-1);e.set(t.slice(0,t.length-1)),i=ot(e),this.zt=t[t.length-1]}this._t.play(i),this.kt(t)})).catch((()=>{this.yt.next()}))},this.xt=()=>{this.ut=!1,this.zt=void 0},this.Mt=()=>{this.t&&(this.t=!1,this.i.trigger(r.SpeechSynthesisServiceEvent.TTSStop))},this.U(t),this.yt=rt(this.wt,(()=>{})),this._t=function(t){let e,s,i,r=t,o=[],n=()=>{},a=0,c=!0;const h=()=>{e||(e=new AudioContext),e.state===G&&e.resume()},l=()=>{o.forEach((t=>{t.removeEventListener(q,d),t.stop(),t.disconnect()})),o=[]},p=()=>{(null==e?void 0:e.state)!==G&&(null==e||e.suspend()),i=new Float32Array,c=!0,a=0,o=[]},u=()=>{if(!e||!i.length)return;if(c&&i.length<4096)return void(c=!1);c=!1;const t=i.length,n=new AudioBuffer({sampleRate:r.sampleRate,length:t});for(let e=0;e<r.numChannels;e++){const s=n.getChannelData(e);for(let e=0;e<t;e++)s[e]=i[e]}a<e.currentTime&&(a=e.currentTime),s&&s.removeEventListener(q,d),s=new AudioBufferSourceNode(e,{buffer:n}),s.connect(e.destination),s.addEventListener(q,d),s.start(a),a+=n.duration,o.push(s),i=new Float32Array},d=()=>{a=0,setTimeout((()=>{a||(p(),n())}),250)};return(()=>{const t=document.body,s=["touchend","click"];let i=!0;const r=()=>{i&&(e=new AudioContext,"closed"!==e.state&&e.resume().then((()=>{o()})))},o=()=>{s.forEach((e=>{t.removeEventListener(e,r)})),i=!1};s.forEach((e=>{t.addEventListener(e,r)}))})(),{play:t=>{h(),i=i?Y(i,t):J(t),u()},stop:()=>{e&&(l(),p(),n())},config:t=>{r=Object.assign(Object.assign({},r),t)},onEnd:t=>{n=t}}}({sampleRate:22050,numChannels:1}),this._t.onEnd(this.Mt),this.getVoices().then((t=>{this.l=t.filter((t=>t.default))[0]})),window.addEventListener("beforeunload",(()=>{this.cancel()}))}speak(t){"string"==typeof t&&t.trim().length&&this.yt.push(this.ft(t))}cancel(){this.t&&(this.dt.abort(),this._t.stop(),this.yt.cancel(),this.dt=new AbortController)}getVoices(){let t=this.lt;if(t.length)return Promise.resolve(t);const e=()=>{this.Ct=void 0};return this.Ct||(this.Ct=this.bt("voices").then((t=>this.vt(t,!1))).then((t=>t.json())).then((s=>{const i=s.voices||[];return t=i.map((t=>({name:t.name,lang:ct(t.culture),default:!!t.default}))),setTimeout(e),this.lt=t,t})).catch((()=>(setTimeout(e),t)))),this.Ct}getVoice(){return this.l}setVoice(t){return t&&Array.isArray(t)&&t.length?this.l&&1===t.length&&!t[0].name&&ct(t[0].lang)===this.l.lang?Promise.resolve():this.getVoices().then((e=>{if(!e.length)return Promise.reject(Error("TTSNoVoices"));return t.find((t=>{let s,i=!1;if(t.name){const i=ct(t.name);s=e.find((t=>i===ct(t.name)))}if(!s&&t.lang){const i=ct(t.lang);let r=e.filter((t=>i===t.lang));r.length||(r=e.filter((t=>i===t.lang.split("-")[0]))),s=r.find((t=>t.default))||r[0]}return s&&(this.l=s,i=!0),i}))?Promise.resolve():Promise.reject(Error("TTSNoMatch"))})):Promise.reject(Error("TTSEmptyParam"))}on(t,e){this.i.bind(t,e)}off(t,e){this.i.unbind(t,e)}}const rt=(t,e)=>{const s=[],i=()=>{s.length&&s[0].then(t).catch(e)};return{push:t=>{t.catch((()=>{const e=s.indexOf(t);e>0&&s.splice(e,1)})),s.push(t),1===s.length&&i()},cancel:()=>{s.length=0},next:()=>{s.shift(),i()}}},ot=t=>t.buffer.slice(t.byteOffset,t.byteLength+t.byteOffset),nt=t=>{const e=new Uint8Array(t),s=new Uint8Array(e.length-44);return s.set(e.slice(44,e.length)),ot(s)},at=t=>{const e=new DataView(t,0,44);return{numChannels:e.getUint16(22,true),sampleRate:e.getUint32(24,true)}},ct=t=>t.toLowerCase(),ht="auth",lt="ping",pt="pong",ut="jwt";const dt={state:{type:lt}};class mt extends r.BaseChatConnection{constructor(t){super(t.dispatcher),this.url=t.url,this.authService=t.authService}open(){return this.isOpen()?Promise.resolve():navigator.onLine?this.St():(0,r.getRejectPromiseError)(r.CoreError.NetworkOffline)}close(){return this.isClosed()?Promise.resolve():this.$t()}send(t){return new Promise(((e,s)=>{if(this.isOpen()){const i=new XMLHttpRequest;i.open("POST",this.url),(0,r.setRequestHeader)(i,"Content-Type","application/json"),i.onload=()=>{i.status>=200&&i.status<300?e(t):s(i.response)},i.onerror=()=>{s((0,r.getError)(r.CoreError.NetworkFailure))},this.Tt(i,JSON.stringify(t)).catch(s)}else s((0,r.getError)(r.CoreError.ConnectionNone))}))}updateConnectionUrl(t){this.url=(0,i.getLongPollURL)(t.URI,{channelId:t.channelId,userId:t.userId},t.isTLS)}St(){return this.At||(this.At=new i.Deferred,this.setState(r.ConnectionState.Connecting),this.Ot().then((()=>{this.X(),this.It()})).catch((t=>{this.At&&(this.At.reject(t),this.At=null),this.tt()}))),this.At.promise}$t(){return this.Et||(this.Lt.abort(),this.Et=new i.Deferred,this.setState(r.ConnectionState.Closing),setTimeout((()=>{this.tt()}),100)),this.Et.promise}Ot(){return new Promise(((t,e)=>{const s=new XMLHttpRequest;s.open("POST",this.url),(0,r.setRequestHeader)(s,"Content-Type","application/json"),s.onload=()=>{s.status>=200&&s.status<300?t():e(s.response)},s.onerror=()=>{e((0,r.getError)(r.CoreError.NetworkFailure))},this.Tt(s,JSON.stringify(dt)).catch((t=>{e(t)}))}))}It(){let t=0;this.isOpen()&&(this.Lt=new XMLHttpRequest,this.Lt.open("GET",this.url),this.Lt.onload=()=>{t=0,this.Lt.status&&200===this.Lt.status&&this.Pt(this.Lt.responseText),this.It()},this.Lt.onerror=()=>{5===t?this.close():(t++,this.It())},this.Tt(this.Lt))}Tt(t,e){return this.authService?new Promise(((s,i)=>{var o;null===(o=this.authService)||void 0===o||o.get().then((i=>{(0,r.setRequestHeader)(t,"Authorization",`Bearer ${i.token}`),t.send(e),s()})).catch((t=>{i(t)}))})):(t.send(e),Promise.resolve())}Pt(t){try{JSON.parse(t).forEach((t=>{this.et(JSON.parse(t))}))}catch(t){this.st(t)}}X(){this.At&&(this.At.resolve(),this.At=null),this.Et&&(this.Et.reject(),this.Et=null),this.setState(r.ConnectionState.Open),this.dispatcher.trigger(r.CoreEvent.Open)}tt(){this.Et&&(this.Et.resolve(),this.Et=null),this.At=null,this.setState(r.ConnectionState.Closed),this.dispatcher.trigger(r.CoreEvent.Close)}et(t){kt(t),this.dispatcher.trigger(r.CoreEvent.Message,t),this.dispatcher.trigger(r.CoreEvent.MessageReceived,t);const e=t.messagePayload;if(e.type===r.MessageType.ExecuteApplicationActionCommand){const t=e;this.dispatcher.trigger(t.actionType,t)}}st(t){this.dispatcher.trigger(r.CoreEvent.Error,t)}}const gt=Promise,ft=3e6,bt=window;class vt extends r.BaseChatConnection{constructor(t){super(t.dispatcher),this.jt=!1,this.Ht=!1,this.Vt=!1,this.Ft=0,this.Nt=!1,this.Rt=null,this.url=t.url,this.authService=t.authService,this.Dt=t.retryInterval,this.Ut=t.retryMaxAttempts}open(){return this.isOpen()?gt.resolve():navigator.onLine?this.St():(0,r.getRejectPromiseError)(r.CoreError.NetworkOffline)}close(){return this.jt=!0,clearTimeout(this.Bt),this.isClosed()?gt.resolve():this.$t()}send(t){return new gt(((e,s)=>{if(this.Rt&&this.isOpen()){this.Vt=!0;try{this.Rt.send(JSON.stringify(t)),e(t),(i=t).state&&i.state.type&&i.state.type===lt||(this.dispatcher.trigger(r.CoreEvent.Message,t),this.dispatcher.trigger(r.CoreEvent.MessageSent,t))}catch(t){s((0,r.getError)(r.CoreError.NetworkFailure))}}else s((0,r.getError)(r.CoreError.ConnectionNone));var i}))}updateConnectionUrl(t){this.url=(0,i.getWebSocketURL)(t.URI,{channelId:t.channelId,userId:t.userId},t.isTLS,t.channel)}setSuggestionPromise(t){this.Wt=t}St(){return this.At||(this.At=new i.Deferred,this.setState(r.ConnectionState.Connecting),this.Ot()),this.At.promise}$t(){var t;return this.Et||(null===(t=this.Rt)||void 0===t||t.close(),this.Et=new i.Deferred,this.setState(r.ConnectionState.Closing)),this.Et.promise}Ot(){try{this.Rt=new WebSocket(this.url),this.Rt.onopen=()=>{this.setState(r.ConnectionState.Open),this.Nt=!1,this.authService?this.Zt():this.X()},this.Rt.onclose=t=>{this.qt(),this.jt?(this.setState(r.ConnectionState.Closed),this.Gt(r.CoreError.ConnectionExplicitClose,t)):this.authService&&!this.Vt&&1006!==t.code?(this.setState(r.ConnectionState.Closed),this.Gt(r.CoreError.AuthExpiredToken,t)):this.Nt||this.Yt(t)},this.Rt.onmessage=this.et.bind(this),this.Rt.onerror=()=>{this.Yt(),this.Nt=!0,this.st.bind(this)}}catch(t){this.Yt()}}Yt(t){this.setState(r.ConnectionState.Connecting),this.Ft<this.Ut?(this.Ft++,this.Bt=bt.setTimeout(this.Ot.bind(this),this.Dt)):(this.setState(r.ConnectionState.Closed),this.Gt(r.CoreError.NetworkFailure,t))}Gt(t,e){this.At&&this.At.reject((0,r.getError)(t)),this.tt(e)}Zt(){var t;this.Vt=!1,null===(t=this.authService)||void 0===t||t.get().then((t=>{this.send(function(t){return{state:{token:t,tokenType:ut,type:ht}}}(t.token)).then((()=>{setTimeout((()=>this.Vt=!0),1e4),this.X()}))})).catch((t=>{var e;null===(e=this.At)||void 0===e||e.reject(t),this.close()}))}X(){var t;this.qt(),clearTimeout(this.Bt),this.Jt=this.Kt(),this.Xt=(t=this,bt.setTimeout((()=>{wt(t)}),ft)),this.Ft=0,this.jt=!1,this.Vt=!1,this.At&&(this.At.resolve(),this.At=null),this.Et&&(this.Et.reject(),this.Et=null),this.dispatcher.trigger(r.CoreEvent.Open)}tt(t){this.Ft=0,this.jt=!1,this.Vt=!1,this.Et&&(this.Et.resolve(),this.Et=null),this.At=null,this.dispatcher.trigger(r.CoreEvent.Close,t)}et(t){try{const e=JSON.parse(t.data);if(function(t){return t.state&&t.state.type&&t.state.type===pt}(e))this.Ht=!0;else if(e.suggestions&&this.Wt)this.Wt.resolve(e.suggestions);else{kt(e),this.dispatcher.trigger(r.CoreEvent.Message,e),this.dispatcher.trigger(r.CoreEvent.MessageReceived,e);const t=e.messagePayload;if(t.type===r.MessageType.ExecuteApplicationActionCommand){const e=t;this.dispatcher.trigger(e.actionType,e)}}}catch(t){this.st(t)}}st(t){this.dispatcher.trigger(r.CoreEvent.Error,t)}Kt(){return bt.setInterval((()=>{this.send(dt).then((()=>{this.Ht=!1,this.Qt=bt.setTimeout((()=>{this.isOpen()&&!this.Ht&&wt(this)}),1e4)}))}),3e4)}qt(){clearTimeout(this.Xt),clearInterval(this.Jt),clearTimeout(this.Qt)}}function wt(t){t.close().then((()=>t.open()))}class xt{constructor(t){this.te=t,t.isLongPoll&&(this.te.retryInterval=2e3,this.te.retryMaxAttempts=5),this.i=(0,i.generateEventDispatcher)(),this.ee=new vt({authService:t.authService,url:(0,i.getWebSocketURL)(t.baseURL,t.searchParams,t.isTLS,t.channel),retryInterval:t.retryInterval,retryMaxAttempts:t.retryMaxAttempts,dispatcher:this.i}),this.se=this.ee}open(){return this.te.isLongPoll?new Promise(((t,e)=>{this.ee.open().then((()=>{this.ie(t)})).catch((()=>{this.re(t,e)}))})):this.se.open()}close(){return clearTimeout(this.oe),this.se.close()}send(t){return this.se.send(t)}isOpen(){return this.se.isOpen()}isClosed(){return this.se.isClosed()}getState(){return this.se.getState()}updateConnectionUrl(t){var e;this.ee.updateConnectionUrl(t),this.te=Object.assign(Object.assign({},this.te),{baseURL:t.URI,searchParams:{channelId:t.channelId,userId:t.userId},isTLS:t.isTLS,channel:t.channel}),null===(e=this.ne)||void 0===e||e.updateConnectionUrl(t)}on(t,e){this.i.bind(t,e)}off(t,e){this.i.unbind(t,e)}setSuggestionPromise(t){this.ee.setSuggestionPromise(t)}ie(t){var e;this.se=this.ee,clearTimeout(this.oe),(null===(e=this.ne)||void 0===e?void 0:e.isOpen())&&this.ne.close(),t()}re(t,e){this.se=this.ae(),this.se.open().then((()=>{this.oe=this.ce(),t()})).catch((t=>{e(t)}))}ae(){return this.ne||(this.ne=new mt({url:(0,i.getLongPollURL)(this.te.baseURL,this.te.searchParams,this.te.isTLS),authService:this.te.authService,dispatcher:this.i})),this.ne}ce(){return window.setTimeout((()=>{this.se.close().then((()=>{this.open()}))}),3e5)}}const kt=t=>{const e=t.messagePayload;e&&e.type===r.MessageType.TextStream&&(e.streamState=e.streamState.toLowerCase())},yt={isLongPoll:!1,isTLS:!0};class _t{constructor(t){this.he=(t,e,s)=>{let i=!1;return(t&&t!==this.U.URI||e&&e!==this.U.channelId||s&&s!==this.U.userId)&&(i=!0),i},this.le=(t,e,s)=>new Promise(((i,r)=>{t&&"string"==typeof t&&t.length&&(this.U.URI=t),this.R?this.R.get().then((t=>{this.U.channelId=t.getClaim("channelId"),this.U.userId=t.getClaim("userId"),this.L.updateConnectionUrl({URI:this.U.URI,channelId:this.U.channelId,userId:this.U.userId,isTLS:this.U.isTLS,channel:this.U.channel}),i()})).catch((t=>r(t))):("string"==typeof e&&e.length&&(this.U.channelId=e),"string"==typeof s&&s.length&&(this.U.userId=s),this.L.updateConnectionUrl({URI:this.U.URI,channelId:this.U.channelId,userId:this.U.userId,isTLS:this.U.isTLS,channel:this.U.channel}),i())})),this.U=Object.assign(Object.assign({},yt),t),this.U.tokenGenerator&&(this.R=i.AuthTokenService.getInstance()),this.L=new xt({baseURL:this.U.URI,isLongPoll:this.U.isLongPoll,isTLS:this.U.isTLS,channel:this.U.channel,retryInterval:void 0!==this.U.retryInterval&&this.U.retryInterval>=0?1e3*this.U.retryInterval:5e3,retryMaxAttempts:void 0!==this.U.retryMaxAttempts&&this.U.retryMaxAttempts>=0?this.U.retryMaxAttempts:5,searchParams:{channelId:this.U.channelId,userId:this.U.userId},authService:this.R}),window.addEventListener("online",(()=>this.open())),window.addEventListener("offline",(()=>this.close()))}open(t){const{URI:e,userId:s,channelId:i}=t||{};if(this.isOpen()){if(this.he(e,i,s)){const t=e&&this.U.URI!==e;return!this.R||t?this.close().then((()=>this.le(e,i,s).then((()=>this.L.open())))):Promise.resolve()}return Promise.resolve()}return this.le(e,i,s).then((()=>this.L.open()))}close(){return this.L.close()}getState(){return this.L.getState()}isOpen(){return this.L.isOpen()}send(t,e,s){let i;if(i="string"==typeof t?(0,r.buildUserTextMessage)(t,e):(0,r.isPostbackPayload)(t)?(0,r.buildPostbackMessage)(t):(0,r.isMessagePayload)(t)?(0,r.buildUserMessage)(t):t,!(0,r.isValidMessage)(i))return(0,r.getRejectPromiseError)(r.CoreError.MessageInvalid);if(s){const{sdkMetadata:t,threadId:e}=s;t&&(i=this.pe(i,t)),e&&(i.threadId=e)}return i.userId=this.U.userId,this.L.send(i)}updateUser(t,e){let s=t;return(null==e?void 0:e.sdkMetadata)&&(s=this.pe(t,e.sdkMetadata)),this.L.send(s)}sendDeviceToken(t,e){const s={state:{type:"token",deviceToken:t,deviceType:e}};return this.L.send(s)}getSuggestions(t){const e=new i.Deferred;this.L.setSuggestionPromise(e);const s={messagePayload:{query:t,threshold:30,type:r.MessageType.Suggest}};return this.L.send(s).catch(null==e?void 0:e.reject),setTimeout((()=>{null==e||e.reject((0,r.getError)(r.CoreError.SuggestionsTimeout))}),1e4),null==e?void 0:e.promise}on(t,e){this.L.on(t,e)}off(t,e){this.L.off(t,e)}pe(t,e){return e&&(t.sdkMetadata=Object.assign(Object.assign({},t.sdkMetadata),e)),t}}const zt=25,Mt=1024*zt*1024,Ct="channelId",St="userId";class $t{static getInstance(){return this.v||(this.v=new $t),this.v}setParams(t){this.gt=t,t.tokenGenerator?(this.R=i.AuthTokenService.getInstance(),this.R.get().then((e=>{t[Ct]=e.getClaim(Ct),t[St]=e.getClaim(St),this.ue=Tt(t)}))):this.ue=Tt(t)}upload(t,e){return new Promise(((s,i)=>{const o=t.size;if(0===o)return void i(Error(r.CoreError.UploadZeroSize));if(o>Mt)return void i(Error(r.CoreError.UploadMaxSize));const n=new XMLHttpRequest,a=()=>i(Error(r.CoreError.UploadNetworkFail));(0,r.requestOn)(n,"readystatechange",(()=>{if(4===n.readyState)switch(n.status){case 200:{const t=JSON.parse(n.responseText);s(t);break}case 413:i(Error(r.CoreError.UploadMaxSize));break;case 415:i(Error(r.CoreError.UploadBadFile));break;default:a()}})),(0,r.requestOn)(n,"abort",a),(0,r.requestOn)(n,"error",a),(0,r.requestOn)(n,"timeout",a),this.gt.tokenGenerator?this.R.get().then((s=>this.me(n,{file:t,options:e,token:s.token}))).catch((t=>i(t))):this.me(n,{file:t,options:e})}))}me(t,{file:e,options:s,token:i}){const o=new FormData;o.append("attachment",e,encodeURI(e.name)),t.open("POST",this.ue),(0,r.setRequestHeader)(t,"x-oda-meta-file-size",e.size.toString()),i&&((0,r.setRequestHeader)(t,"Authorization",`Bearer ${i}`),this.gt.enableAttachmentSecurity&&((0,r.setRequestHeader)(t,"x-oda-meta-file-isProtected","True"),(0,r.setRequestHeader)(t,"x-oda-meta-file-authType","ChannelClientAuth"))),t.send(o),s&&s.onInitUpload&&s.onInitUpload(t)}}function Tt(t){const e=`http${t.isTLS?"s":""}://`,{URI:s,channelId:r,userId:o}=t;return(0,i.buildURL)(e,s,{channelId:r,userId:o},"/chat/v1/attachments")}const At={AUDIO:".aac, .amr, .m4a, .mp3, .mp4a, .mpga, .oga, .ogg, .wav, audio/*",FILE:".7z, .csv, .doc, .docx, .eml, .ics, .key, .log, .msg, .neon, .numbers, .odt, .pages, .pdf, .pps, .ppsx, .ppt, .pptx, .rtf, .txt, .vcf, .xls, .xlsx, .xml, .yml, .yaml, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document",IMAGE:".gif, .jfif, .jpeg, .jpg, .png, .svg, .tif, .tiff, .webp, image/*",VIDEO:".3g2, .3gp, .avi, .m4v, .mov, .mp4, .mpeg, .mpg, .ogv, .qt, .webm, .wmv, video/*",ALL:""};At.ALL=`${At.AUDIO},${At.FILE},${At.IMAGE},${At.VIDEO}`;const Ot={oracle:"oracle",platform:"platform"},It=Ot.oracle;class Et{constructor(t){this.U=t,this.ge=null,this.fe=new Map,this.U.URI=(0,i.stripHTTP)(t.URI),this.be(t),this.ve=new _t(t),this.ve.on(r.CoreEvent.Open,(()=>{this.we&&this.we.setParams(t),this.xe&&this.xe.setConfig(t)}))}connect(t){return(null==t?void 0:t.URI)&&(t.URI=(0,i.stripHTTP)(t.URI)),this.ve.open(t)}disconnect(){const t=this.ve.close();return t.then(this.ke.bind(this)),t}getState(){return this.ve.getState()}isConnected(){return this.ve.isOpen()}sendMessage(t,e){if(!t)return(0,r.getRejectPromiseError)(r.CoreError.MessageInvalid);let s="",i="";if("string"==typeof t)i=t;else if((0,r.isMessagePayload)(t)){i=t.text}return this.ge&&this.ge.text===i&&(s=this.ge.requestId),this.ge=null,this.ve.send(t,s,Object.assign(Object.assign({},e),{threadId:(null==e?void 0:e.threadId)||this.ye}))}updateChatContext(t,e,s,i){return this.sendMessage({messagePayload:Object.assign({type:r.MessageType.UpdateApplicationContextCommand,source:r.ContextSource.ChatWindow,context:t},e)},{sdkMetadata:i,threadId:s})}updateUser(t,e){return(0,r.isValidProfileMessage)(t)?this.ve.updateUser(t,Object.assign(Object.assign({},e),{threadId:this.ye})):(0,r.getRejectPromiseError)(r.CoreError.ProfileInvalid)}sendDeviceToken(t,e){return this.ve.sendDeviceToken(t,e)}setCurrentThreadId(t){this.ye=t}uploadAttachment(t,e){return this.isConnected()?this.we?this.we.upload(t,e).then((t=>(0,r.buildUserAttachmentMessage)(t.type,t.url,t.fileName))):(0,r.getRejectPromiseError)(r.CoreError.UploadNotAvailable):(0,r.getRejectPromiseError)(r.CoreError.ConnectionNone)}sendAttachment(t,e){return this.uploadAttachment(t,e).then((t=>this.ve.send(t,"",{sdkMetadata:null==e?void 0:e.sdkMetadata})))}sendLocation(t){return this.isConnected()?t?(0,r.isValidLocation)(t)?this.ve.send({messagePayload:{type:r.MessageType.Location,location:t}}):(0,r.getRejectPromiseError)(r.CoreError.LocationInvalid):(0,r.getCurrentPosition)().then((t=>this.ve.send({messagePayload:{type:r.MessageType.Location,location:{latitude:t.latitude,longitude:t.longitude}}}))):(0,r.getRejectPromiseError)(r.CoreError.ConnectionNone)}sendUserTypingStatus(t,e){return this.sendMessage((0,r.buildUserMessage)({partyType:"user",source:"sdk",status:t,type:r.MessageType.Status,text:e}))}getSuggestions(t){return t?"string"!=typeof t?(0,r.getRejectPromiseError)(r.CoreError.SuggestionsInvalidRequest):this.ve.getSuggestions(t):(0,r.getRejectPromiseError)(r.CoreError.SuggestionsEmptyRequest)}destroy(){this.disconnect();for(const t in this)this[t]&&delete this[t]}setTTSService(t){this._e="string"==typeof t?this.ze(t):t}getTTSService(){return this._e}getTTSVoices(){return this._e?this._e.getVoices():(0,r.getRejectPromiseError)(r.CoreError.TtsNotAvailable)}setTTSVoice(t){return this._e?this._e.setVoice(t):(0,r.getRejectPromiseError)(r.CoreError.TtsNotAvailable)}getTTSVoice(){if(this._e)return this._e.getVoice();throw(0,r.getError)(r.CoreError.TtsNotAvailable)}speakTTS(t,e){if(this._e){let s;if("string"==typeof t)s=t;else{if(!(0,r.isValidMessage)(t))return;s=(0,r.getUtteranceText)(t,e)}this._e.speak(s)}}cancelTTS(){this._e&&this._e.cancel()}startRecognition(t){return this.xe?this.isConnected()?this.xe.startRecognition(Object.assign(Object.assign({},t),{onRecognitionText:e=>{"final"===e.type&&(this.ge=e),t.onRecognitionText(e)}})):(0,r.getRejectPromiseError)(r.CoreError.ConnectionNone):(0,r.getRejectPromiseError)(r.CoreError.RecognitionNotAvailable)}stopRecognition(){return this.xe?this.xe.stopRecognition():(0,r.getRejectPromiseError)(r.CoreError.RecognitionNotAvailable)}setRecognitionLocale(t){if(t&&"string"==typeof t&&this.xe){const e=t.toLowerCase();this.xe.setLocale(e)}}on(t,e){var s;switch(t){case r.SpeechSynthesisServiceEvent.TTSStart:case r.SpeechSynthesisServiceEvent.TTSStop:null===(s=this._e)||void 0===s||s.on(t,e);break;default:this.ve.on(t,e)}}off(t,e){var s;switch(t){case r.SpeechSynthesisServiceEvent.TTSStart:case r.SpeechSynthesisServiceEvent.TTSStop:null===(s=this._e)||void 0===s||s.off(t,e);break;default:this.ve.off(t,e)}}getAuthToken(){var t;return null===(t=this.R)||void 0===t?void 0:t.get()}ke(){}be(t){t.URI=t.URI.replace(/^https?:\/\//gi,(t=>(console.warn(`Please remove "${t}" from URI.`),""))),this.Me(t),this.Ce(t),this.Se(t),this.xe=N.getInstance()}Me(t){t.enableAttachment&&(this.we=$t.getInstance())}Ce(t){t.tokenGenerator&&(this.R=i.AuthTokenService.getInstance(),this.R.setFetch(t.tokenGenerator))}Se(t){if(t.isTTS){let e;const s=t.TTSService;e=s?"string"==typeof s?this.ze(s):s:this.ze(It),this._e=e}}ze(t){const e=this.fe.get(t);if(e)return e;let s;try{t===Ot.oracle?s=new it(this.U):t===Ot.platform&&(s=new m),this.fe.set(t,s)}catch(t){console.log(t)}return s}}Et.TTS=Ot},336:function(t,e,s){s.r(e),s.d(e,{ChatEvent:function(){return r},ContextualWidgetComponent:function(){return gi},DOMUtil:function(){return Be},Logger:function(){return kt},MESSAGE_SIDE:function(){return zt},MessageComponent:function(){return Mt},MessageComponentFactory:function(){return ke},SDK_VERSION:function(){return Tt},ShareCategory:function(){return Je},StorageType:function(){return Ge},WidgetComponent:function(){return hi},WidgetTheme:function(){return Ye},configureColorCustomization:function(){return je},configureLocale:function(){return Ie},debounce:function(){return Ee},getFieldInputValues:function(){return He},isAnyVoiceAvailable:function(){return ye},syncTTSLocaleIfUnavailable:function(){return Te}});var i=s(373);const r=Object.assign(Object.assign(Object.assign({},i.SpeechSynthesisServiceEvent),{CHAT_LANG:"chatlanguagechange",CLICK_AUDIO_RESPONSE_TOGGLE:"click:audiotoggle",CLICK_ERASE:"click:erase",CLICK_VOICE_TOGGLE:"click:voicetoggle",DESTROY:"destroy",CHAT_END:"chatend",MESSAGE:"message",MESSAGE_RECEIVED:"message:received",MESSAGE_SENT:"message:sent",NETWORK:"networkstatuschange",READY:"ready",TYPING:"typing",UNREAD:"unreadCount",WIDGET_CLOSED:"widget:closed",WIDGET_OPENED:"widget:opened"}),i.ExecuteActionType),o=()=>{var t;return(null===(t=navigator.languages)||void 0===t?void 0:t.map((t=>t.toLowerCase())))||[]},n=t=>{let e;try{e=window[t];const s="__storage_test__";return e.setItem(s,s),e.removeItem(s),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}};var a=s(476);const c=G('<path d="M11.007 15.117A1 1 0 0 0 13 15V7l-.005-.176A3 3 0 0 0 7 7v8l.005.217A5 5 0 0 0 17 15V5h2v10a7 7 0 1 1-14 0V7a5 5 0 0 1 10 0v8l-.005.176A3 3 0 0 1 9 15V9h2v6z"/>'),h=G('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m7.764 17 1.849-4.87h1.012L12.486 17H11.32l-.32-.998H9.204L8.882 17zm1.722-1.883h1.226l-.617-1.916zm3.278-.415v-2.573h1.045v2.553c0 .531.079.916.235 1.152.156.233.404.349.744.349.344 0 .591-.116.743-.349.157-.236.235-.62.235-1.152v-2.553h1.045v2.573c0 .822-.165 1.427-.496 1.816-.326.384-.835.576-1.527.576s-1.204-.192-1.535-.576c-.326-.389-.489-.994-.489-1.816zM17.686 17v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>'),l=G('<path fill="#161513" d="m6 9 5.975 6L18 9H6z"/>'),p=G('<path d="M6.35 8L5 9.739 12 16l7-6.261L17.65 8 12 13.054z"/>'),u=G('<path d="M8 17.65L9.739 19 16 12 9.739 5 8 6.35 13.054 12z"/>'),d=G('<path d="M16 17.65L14.261 19 8 12l6.261-7L16 6.35 10.946 12z"/>'),m=G('<path d="M6 11h8v2H6zm0-4h12v2H6z"/><path d="M2 2v20h3.5l3-4H14v-2H7.5l-3 4H4V4h16v6h2V2z"/><path d="M20.3 12.3L19 13.6l-1.3-1.3-1.4 1.4 1.3 1.3-1.3 1.3 1.4 1.4 1.3-1.3 1.3 1.3 1.4-1.4-1.3-1.3 1.3-1.3z"/>'),g=G('<path d="M17.524 5 19 6.476 13.475 12 19 17.524 17.524 19 12 13.475 6.476 19 5 17.524 10.525 12 5 6.476 6.476 5 12 10.525z"/>'),f=G('<path d="M11 13v9H9v-5.586l-6.293 6.293-1.414-1.414L7.586 15H2v-2zM21.293 1.293l1.414 1.414L16.414 9H22v2h-9V2h2v5.586z"/>'),b=G('<path d="M4 15v5h16v-5h2v7H2v-7zm9-13v10.587l3.293-3.294 1.414 1.414L12 16.414l-5.707-5.707 1.414-1.414L11 12.585V2z"/>'),v=G('<path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM8.707 7.293l8 8-1.414 1.414-8-8z"/></svg>'),w=G('<path class="st0" d="M20 20H4V4h7V2H2v20h20v-9h-2z"/><path xmlns="http://www.w3.org/2000/svg" class="st0" d="M14 2v2h4.6L8.3 14.3l1.4 1.4L20 5.4V10h2V2z"/>'),x=G('<path d="M14.414 2 21 8.584V22H3V2.009zM13 3.999l-8 .007v15.995h14V9.996l-6 .001zm4.585 3.998L15 5.413v2.585z"/>'),k=G('<path d="M4 2h10.414L20 7.586V22H4zm2 2v16h12V9h-5V4zm9 1.414L16.586 7H15z"/><path d="M16 12a1 1 0 11-2 0 1 1 0 012 0zm-6.143 1L7 19h10l-2.857-4.5L12 16.75z"/>'),y=G('<path d="M22 5v14H2V5zm-2 2H4v10h16zM7 13v2H5v-2zm12 0v2h-2v-2zm-4 0v2H9v-2zM7 9v2H5V9zm12 0v2h-2V9zm-4 0v2h-2V9zm-4 0v2H9V9z" />'),_=G('<path d="M13 14c-1.5 0-2.9-.4-4-1.1 1.1-2.4 1.7-5 1.9-6.9h9V4H7V2H5v2H2v2h6.9c-.2 1.7-.7 3.7-1.5 5.6C6.5 10.5 6 9.2 6 8H4c0 1.9.9 4 2.5 5.5C5.3 15.5 3.8 17 2 17v2c2.6 0 4.6-1.9 6.1-4.3 1.4.8 3 1.3 4.9 1.3zm7.6 4.6L17 10.5l-3.6 8.1-1.3 3 1.8.8L15 20h4l1.1 2.4 1.8-.8zm-4.7-.6l1.1-2.5 1.1 2.5z"/>'),z='<svg width="36" height="36" viewBox="0 0 36 36"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.875 8.625a2.25 2.25 0 00-2.25 2.25v16c0 .621.504 1.125 1.125 1.125h.284c.298 0 .585-.119.796-.33l2.761-2.76a2.25 2.25 0 011.59-.66h15.944a2.25 2.25 0 002.25-2.25V10.875a2.25 2.25 0 00-2.25-2.25H7.875zM24.75 18a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm-4.5-2.25a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-9 2.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" fill="#fff"/></svg>',M=G('<path d="M4.014 3C2.911 3 2 3.888 2 4.992v15c0 .6.408 1.008 1.007 1.008h.6a.887.887 0 0 0 .695-.288l3.094-3.12c.407-.384.91-.6 1.415-.6h11.175C21.089 16.992 22 16.104 22 15V4.992C22 3.888 21.089 3 19.986 3zm3.981 7.008A1.986 1.986 0 0 1 6.005 12c-1.103 0-1.99-.888-1.99-1.992s.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.995 0C13.99 11.112 13.103 12 12 12s-1.99-.888-1.99-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.996 0c0 1.104-.888 1.992-1.99 1.992s-1.991-.888-1.991-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016z" fill="#fff"/>'),C=G('<path d="M7 22v-2h4v-2.062C7.06 17.444 4 14.073 4 10h2c0 3.309 2.691 6 6 6s6-2.691 6-6h2c0 4.072-3.059 7.444-7 7.938V20h4v2h-6zm5-20c2.206 0 4 1.794 4 4v4c0 2.206-1.794 4-4 4s-4-1.794-4-4V6c0-2.206 1.794-4 4-4zm0 2c-1.103 0-2 .897-2 2v4c0 1.103.897 2 2 2s2-.897 2-2V6c0-1.103-.897-2-2-2z"/>'),S=G('<path d="M19.33 23.02l-7.332-3.666-7.332 3.666 1.418-7.995L1 9.555l7.331-1.222L11.998 1l3.666 7.333 7.332 1.222-5.084 5.47z"/>'),$=G('<path d="M10 2a8 8 0 016.317 12.91l5.383 5.384-1.414 1.414-5.386-5.384A8 8 0 1110 2zm0 2a6 6 0 100 12 6 6 0 000-12z" fill="rgb(22, 21, 19)"/>'),T=G('<path d="M13 22V5.414l5.293 5.293 1.414-1.414L12 1.585 4.293 9.293l1.414 1.414L11 5.414V22h2z" fill="#161513"/>'),A=G('<path d="M22 2v20H2V2zm-2 2H4v16h16zm-3 1.674V14a2 2 0 11-2.15-1.995L15 12V8.326l-5 1.428V16a2 2 0 11-2.15-1.995L8 14V8.246z"/>'),O=G('<path d="M13.414 2L17 5.586V7h.414L21 10.586V22H7v-4H3V2zM17 9.414V18H9v2h10v-8.586zm-2-3L12.586 4H5v12h10zM13 11v2H7v-2zm-2-4v2H7V7z"/>'),I=G('<path d="M12 2c3.874 0 6.994 3.28 6.99 7.214l.011.285c.008.927-.202 2.23-.787 3.837-.96 2.639-2.73 5.452-5.49 8.353L12 22.45l-.724-.761c-2.76-2.901-4.53-5.714-5.49-8.353-.627-1.722-.823-3.095-.782-4.03l.006-.252C5.134 5.147 8.205 2 12 2zm0 2C9.254 4 7.006 6.362 7.002 9.386L7 9.529c-.004.694.168 1.753.667 3.123.741 2.036 2.038 4.221 4.014 6.507l.32.365.32-.365c1.867-2.159 3.127-4.228 3.886-6.166l.128-.34c.535-1.469.694-2.58.664-3.259l-.008-.32C16.879 6.244 14.676 4 12 4zm0 2a3 3 0 1 1-.001 6A3 3 0 0 1 12 6zm0 2a1 1 0 1 0 .001 2A1 1 0 0 0 12 8z"/>'),E=G('<path d="M22 2v16h-4v4H2V6h4V2zm-9.036 12.378L6.93 20H16v-2.585zM16 8H4v11.999l9.036-8.377L16 14.585zm4-4H8v2h10v10h2zM7 9a2 2 0 110 4 2 2 0 010-4z"/>'),L=G('<path fill="#161513" d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12zm15.207-2.793-1.414-1.414L10 13.586l-2.293-2.293-1.414 1.414L10 16.414z"/>'),P=G('<path d="M1.707.293l22 22-1.414 1.414L12 13.414V21l-6.35-5.114H1V7.954h4.65l.5-.39L.293 1.707zM19.67 4.446c2.119 1.967 3.302 4.613 3.33 7.452a10.363 10.363 0 01-1.392 5.295l-1.476-1.476c.58-1.18.88-2.472.868-3.8-.023-2.29-.981-4.43-2.697-6.025zM7.583 8.996l-1.232.955H3v3.964h3.351L10 16.875v-5.461zm8.051-1.68C17.15 8.547 17.991 10.21 18 11.999c.003.482-.055.956-.17 1.416l-1.86-1.86c-.133-1.017-.691-1.964-1.604-2.706zM12 3v4.586L9.424 5.01z"/>'),j=G('<path d="M13 3v18l-6.35-5.114H2V7.954h4.65zm5.67 1.446c2.119 1.967 3.302 4.613 3.33 7.452.029 2.904-1.15 5.658-3.316 7.75l-1.396-1.421c1.772-1.71 2.735-3.95 2.712-6.31-.023-2.29-.981-4.43-2.697-6.025zM11 7.125L7.351 9.95H4v3.964h3.351L11 16.875zm4.634.19C17.15 8.548 17.991 10.212 18 12c.01 1.806-.828 3.5-2.358 4.771l-1.284-1.519c1.065-.885 1.65-2.037 1.642-3.242-.006-1.187-.587-2.309-1.634-3.16z"/>'),H=G('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m12.36 17-1.796-4.87h1.18l1.138 3.584 1.153-3.585h1.132L13.37 17zm3.33 0v-4.87h1.046V17zm1.996 0v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>'),V=G('<path fill="#161513" d="m12 2 10 18H2zm-1 12h2v-4h-2zm0 1v2h2v-2z"/>'),F=G('<path d="M11 2a9 9 0 017.032 14.617l3.675 3.676-1.414 1.414-3.676-3.675A9 9 0 1111 2zm0 2a7 7 0 100 14 7 7 0 000-14zm1 3v3h3v2h-3v3h-2v-3H7v-2h3V7z"/>'),N=G('<path fill="#161513" fill-rule="evenodd" d="M21.205 6.707 8.998 18.914l-6.707-6.707 1.414-1.414 5.293 5.293L19.791 5.293l1.414 1.414Z" clip-rule="evenodd"/>'),R=G('<path fill="#161513" d="M10.998 3c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm0 18c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm11-9c0-.55-.45-1-1-1-.56 0-1 .45-1 1.01 0 .55.45.99 1 .99.56 0 1-.45 1-1Zm-19-1c.55 0 1 .45 1 1s-.44 1-1 1c-.55 0-1-.44-1-.99 0-.56.44-1.01 1-1.01Zm1.93-6.072a1.004 1.004 0 0 0 0 1.415.998.998 0 0 0 1.42-.007.995.995 0 0 0-.007-1.408.997.997 0 0 0-1.414 0Zm12.727 14.143a1.004 1.004 0 0 1 0-1.415.997.997 0 0 1 1.414 0 .995.995 0 0 1 .007 1.408.998.998 0 0 1-1.421.007ZM6.34 17.657a1.003 1.003 0 0 0-1.414 0 .998.998 0 0 0 .007 1.42.994.994 0 0 0 1.407-.005.997.997 0 0 0 0-1.415ZM3.336 9.359a1.004 1.004 0 0 1-.523-1.314.997.997 0 0 1 1.314-.523.995.995 0 0 1 .527 1.305 1 1 0 0 1-1.318.532Zm16.01 5.806a1 1 0 1 0 1.841.782.994.994 0 0 0-.527-1.305.997.997 0 0 0-1.314.523ZM7.52 19.87a1.003 1.003 0 0 1 1.314-.523.996.996 0 0 1 .523 1.314.995.995 0 0 1-1.305.527 1 1 0 0 1-.532-1.318Zm-4.18-5.23a.995.995 0 0 0-.527 1.305 1 1 0 1 0 .527-1.305Zm5.488-9.984a.995.995 0 0 1-1.305-.527.997.997 0 0 1 .523-1.314.999.999 0 1 1 .782 1.841Zm5.814 16.005c.218.505.8.744 1.305.527a.999.999 0 1 0-.782-1.841.997.997 0 0 0-.523 1.314Z"/>'),D=G('<path fill="#161513" d="M3.47 1.667h14.862v9.166h-4.459l-3.333 7.5h-.542c-1.157 0-2.002-.324-2.566-.846-.551-.511-.767-1.152-.767-1.654V12.5H1.5L3.47 1.667Zm10.695 7.5h2.5V3.333h-2.5v5.834Zm-1.667-5.834H4.86l-1.363 7.5h4.835v5c0 .055.034.247.232.43.143.132.412.298.908.369l3.026-6.809v-6.49Z"/>',"20"),U=G('<path fill="#161513" d="M3.47 18.333h14.862V9.167h-4.459l-3.333-7.5h-.542c-1.157 0-2.002.324-2.566.847-.551.51-.767 1.151-.767 1.653V7.5H1.5l1.97 10.833Zm10.695-7.5h2.5v5.834h-2.5v-5.834Zm-1.667 5.834H4.86l-1.363-7.5h4.835v-5c0-.055.034-.247.232-.43.143-.132.412-.298.908-.369l3.026 6.809v6.49Z"/>',"20"),B=G('<path fill="#C74634" d="M3.345 2.5c-.92 0-1.679.74-1.679 1.66v12.5c0 .5.34.84.84.84h.499c.26 0 .42-.08.58-.24l2.577-2.6c.34-.32.76-.5 1.18-.5h9.312c.92 0 1.679-.74 1.679-1.66V4.16c0-.92-.76-1.66-1.679-1.66H3.344Zm3.317 5.84c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Z"/>',"20"),W=G('<path fill="#C74634" d="M2.677 2c-.736 0-1.343.592-1.343 1.328v10c0 .4.272.672.671.672h.4a.591.591 0 0 0 .464-.192l2.062-2.08c.272-.256.608-.4.943-.4h7.45c.736 0 1.343-.592 1.343-1.328V3.328c0-.736-.607-1.328-1.343-1.328H2.677ZM5.33 6.672C5.33 7.408 4.739 8 4.004 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.997 0C9.328 7.408 8.736 8 8 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.996 0c0 .736-.591 1.328-1.326 1.328a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.326.608 1.326 1.344Z"/>',"16"),Z=G('<path fill="#8F520A" d="M1.332 14.667 7.998 1.333l6.667 13.334H1.332Zm6-7.334V10h1.333V7.333H7.332Zm0 4v1.334h1.333v-1.334H7.332Z"/>',"16"),q=G('<path fill="#211e1c" fill-rule="evenodd" d="M10.364 4c4.665 0 8.492 3.29 8.632 7.747L19 12v1.585l1.293-1.292 1.414 1.414L18 17.414l-3.707-3.707 1.414-1.414L17 13.585V12c0-3.419-2.935-6-6.636-6C6.853 6 4 8.906 4 12.5S6.853 19 10.364 19a6.243 6.243 0 0 0 3.764-1.258l.228-.18 1.272 1.544A8.25 8.25 0 0 1 10.364 21C5.74 21 2 17.19 2 12.5 2 7.81 5.74 4 10.364 4z"/>');function G(t,e){return`<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 ${e||"24"} ${e||"24"}">${t}</svg>`}function Y(t){return t.filter((t=>{const e=t.getActionType();return e===i.ActionType.Postback||e===i.ActionType.Location||e===i.ActionType.SubmitForm}))}const J=/\b(?:(?:https?|ftp):\/\/|(www\.))[-a-z0-9+&@#/%?=~_|!:,.;]*[-a-z0-9+&@#/%=~_|]/gimu,K=(t,e,s)=>{const i=tt(t),r=rt(i).replace((0,a.resetRegex)(J),Q(s,e)),o=ot(r);return ut(o,e)},X=(t,e)=>{let s;return pt.some((i=>{const r=i.getID(t);return r&&(s=i.embed(r,e)),!!r})),s},Q=(t,e)=>(s,i)=>{if(t){const t=X(s,e);if(t)return t}return`<a href="${i?`https://${s}`:s}" target="_blank" rel="noreferrer">${s}</a>`},tt=t=>{let e;try{e=(0,a.parseDOM)(t)}catch(e){return t}return et(e),st(e),e.innerHTML},et=t=>(t.querySelectorAll("a").forEach((t=>{t.outerHTML=it(t.outerHTML)})),t),st=t=>{t.querySelectorAll("*").forEach((t=>{if("A"!==t.tagName){const e=t.attributes;for(let t=0;t<e.length;t++){const s=e[t];s.value=it(s.value)}}}))},it=t=>t.replace(/(https?|www)/gim,at),rt=t=>t.replace(/&lt;|&gt;|&nbsp;|&amp;/gim,at),ot=t=>{let e=t;return nt.forEach(((t,s)=>{e=e.replace(new RegExp(s,"g"),t)})),nt.clear(),e},nt=new Map,at=t=>{const e=performance.now().toString(36).replace(".","_")+Math.random().toString(36).substring(2);return nt.set(e,t),e},ct=(t,e)=>{let s;return t.replace((0,a.resetRegex)(e),((t,e)=>(e&&e.length&&(s=e),t))),s},ht=/(?:youtu.*be.*)\/(?:watch\?v=|embed\/|v\/|shorts|)(.*?((?=[&#?])|$))/gm,lt=/(?:https?:\/\/)?videohub\.oracle\.com\/media\/\S+\/([\w]+)/gim,pt=[{getID:t=>ct(t,ht),embed:(t,e)=>`<div class="${e}-youtube-wrapper"><iframe class="${e}-video-wrapper" src="https://www.youtube.com/embed/${t}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`},{getID:t=>ct(t,lt),embed:(t,e)=>{const s="flashvars",i="allow";return`<div class="${e}-ovh-wrapper"><iframe class="${e}-video-wrapper" src="https://cdnapisec.kaltura.com/p/2171811/sp/217181100/embedIframeJs/uiconf_id/35965902/partner_id/2171811?iframeembed=true&playerId=kaltura_player&entry_id=${t}&${s}[streamerType]=auto&amp;${s}[localizationCode]=en&amp;${s}[leadWithHTML5]=true&amp;${s}[sideBarContainer.plugin]=true&amp;${s}[sideBarContainer.position]=left&amp;${s}[sideBarContainer.clickToClose]=true&amp;${s}[chapters.plugin]=true&amp;${s}[chapters.layout]=vertical&amp;${s}[chapters.thumbnailRotator]=false&amp;${s}[streamSelector.plugin]=true&amp;${s}[EmbedPlayer.SpinnerTarget]=videoHolder&amp;${s}[dualScreen.plugin]=true&amp;${s}[hotspots.plugin]=1&amp;${s}[Kaltura.addCrossoriginToIframe]=true&amp;&wid=1_yz4xoltb" ${i}="autoplay *; fullscreen *; encrypted-media *" frameborder="0" height="auto" sandbox="${i}-forms ${i}-same-origin ${i}-scripts ${i}-top-navigation ${i}-pointer-lock ${i}-popups ${i}-modals ${i}-orientation-lock ${i}-popups-to-escape-sandbox ${i}-presentation ${i}-top-navigation-by-user-activation" ${i}fullscreen></iframe></div>`}}],ut=(t,e)=>{const s=(0,a.parseDOM)(t);if(!s)return t;const i=s.querySelectorAll("video"),r=`${e}-video-wrapper`;return i.forEach((t=>{t.classList.add(r)})),s.innerHTML};class dt{constructor(t,e){var s,r;this.util=t,this.$e=!1,this.Te=e.type,this.Ae=e.label,this.Oe=e.imageUrl,this.Ie=e.style,this.Ee=e.tooltip,this.Le=e.displayType,this.Pe=null===(s=e.channelExtensions)||void 0===s?void 0:s.activeImageUrl,this.je=null===(r=e.channelExtensions)||void 0===r?void 0:r.c2kText,this.Te!==i.ActionType.SubmitForm||this.Ie||(this.Ie=i.ActionStyle.Primary)}render(){const t=this.util,e=t.createButton(["action-postback",this.Ie===i.ActionStyle.Primary?"primary":this.Ie===i.ActionStyle.Danger?"danger":""]);if(this.Le===i.ActionDisplayType.Icon&&t.addCSSClass(e,i.ActionDisplayType.Icon),e.onclick=this.handleOnClick.bind(this),this.Oe&&e.appendChild(t.createImage(this.Oe,["action-image"],this.Ae||"")),this.Ae){const s=K(this.Ae,t.cssPrefix),r=t.createTextDiv();if(this.Le===i.ActionDisplayType.Link){const i=t.createAnchor("",s);i.onclick=t=>t.preventDefault(),r.appendChild(i),t.addCSSClass(e,"display-link")}else if(this.je){r.innerHTML=String.fromCharCode(parseInt(this.Ae)+10111),t.addCSSClass(e,"c2k-action");const s=document.getElementsByClassName(this.je),i=Array.from(s);e.onmouseover=()=>{r.innerHTML=String.fromCharCode(parseInt(this.Ae)+10121);for(const e of i)t.addCSSClass(e,"highlight")},e.onmouseleave=()=>{r.innerHTML=String.fromCharCode(parseInt(this.Ae)+10111);for(const e of i)t.removeCSSClass(e,"highlight")}}else r.innerHTML=s;e.appendChild(r)}if(this.$e&&t.addCSSClass(e,"disabled"),this.Ee){const s=t.createDiv(["action-wrapper"]),i=t.createDiv(),r=t.createTextDiv(["tooltip","none"]);return r.innerText=this.Ee,r.setAttribute("role","tooltip"),i.appendChild(r),s.appendChild(e),s.appendChild(i),s}return this.He=e,e}handleOnClick(t){if(this.onActionClick&&!this.$e){const t={getPayload:this.getEventPayload.bind(this),label:this.Ae,imageUrl:this.Pe||this.Oe,type:this.Te};this.Pe&&this.He.lastElementChild.replaceWith(this.util.createImage(this.Pe,["action-image"],this.Ae||"")),this.onActionClick(t)}this.Te!==i.ActionType.Postback&&this.Te!==i.ActionType.Location&&this.Te!==i.ActionType.Share||(t.preventDefault(),t.stopPropagation())}disable(){this.$e=!0,this.He&&(this.util.addCSSClass(this.He,"disabled"),this.He.disabled=!0)}enable(){this.$e=!1,this.He&&(this.util.removeCSSClass(this.He,"disabled"),this.He.disabled=!1)}getActionType(){return this.Te}}class mt extends dt{constructor(t,e){super(t,e),this.Ve=e.phoneNumber}render(){const t=this.util,e=super.render();"button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-call"):t.addCSSClass(e.firstElementChild,"action-call");const s=t.createAnchor(`tel:${this.Ve}`,"");return this.onActionClick=()=>{s.click()},e}getEventPayload(){return Promise.resolve(this.Ve)}}class gt extends dt{render(){const t=this.util,e=super.render();return"button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-location"):t.addCSSClass(e.firstElementChild,"action-location"),e}getEventPayload(){return(0,i.getCurrentPosition)()}}class ft extends dt{constructor(t,e,s,i){super(t,e),this.Fe=s,this.Ne=i,this.Re=e.popupContent}render(){const t=this.util,e=super.render();"button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-popup"):t.addCSSClass(e.firstElementChild,"action-popup");const s=function(t,e,s,r){const o=t.createDiv(["wrapper","popup-content-wrapper","none"]),n=t.createDiv(["popup-dialog"]),a=ke.fromMessage(s,t,{messagePayload:e});return a.onActionClick=e=>{(e.type!==i.ActionType.SubmitForm||a.validateForm())&&(t.addCSSClass(o,"none"),r(e))},n.appendChild(a.render()),o.appendChild(n),o.onclick=e=>{n.contains(e.target)||t.addCSSClass(o,"none")},o}(t,this.Re,this.Fe,this.Ne);return document.body.appendChild(s),this.onActionClick=()=>{t.removeCSSClass(s,"none")},e}getEventPayload(){return Promise.resolve(this.Re)}}class bt extends dt{constructor(t,e){super(t,e),this.De=e.postback}getEventPayload(){return Promise.resolve(this.De)}}class vt extends dt{constructor(t,e,s){super(t,e),this.Ue=s}render(){const t=this.util,e=super.render();return"button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-share"):t.addCSSClass(e.firstElementChild,"action-share"),e}getEventPayload(){return Promise.resolve(this.Ue)}}class wt extends dt{constructor(t,e){super(t,e),this.De=e.postback}getEventPayload(){return Promise.resolve(this.De)}}class xt extends dt{constructor(t,e,s=!1,i){super(t,e),this.Be=s,this.We=i,this.P=e.url}render(){const t=this.util,e=super.render();if("button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-url"):t.addCSSClass(e.firstElementChild,"action-url"),this.P){const s=t.createAnchor(this.P,"",[],this.Be,this.We);e.onclick=()=>{s.click()}}return e}getEventPayload(){return Promise.resolve(this.P)}}class kt{constructor(t){this.Ze=t}debug(...t){this.qe(kt.LOG_LEVEL.DEBUG,t)}error(...t){this.qe(kt.LOG_LEVEL.ERROR,t)}info(...t){this.qe(kt.LOG_LEVEL.INFO,t)}warn(...t){this.qe(kt.LOG_LEVEL.WARN,t)}qe(t,e){if(kt.logLevel>=t){let s;switch(e.unshift(`[${kt.appName}.${kt.appVersion}.${this.Ze}]`),t){case kt.LOG_LEVEL.ERROR:s=console.error;break;case kt.LOG_LEVEL.WARN:s=console.warn;break;case kt.LOG_LEVEL.INFO:s=console.info;break;case kt.LOG_LEVEL.DEBUG:s=console.debug}s.apply(console,e)}}}kt.LOG_LEVEL={NONE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},kt.logLevel=kt.LOG_LEVEL.NONE;class yt extends dt{constructor(t,e,s){super(t,e),this.Ge=e,this.Ue=s}render(){const t=this.util,e=super.render();return"button"===e.tagName.toLowerCase()?t.addCSSClass(e,"action-client"):t.addCSSClass(e.firstElementChild,"action-client"),e}getEventPayload(){return this.Ge.actionType===i.ClientActionType.COPY_MESSAGE_TEXT?Promise.resolve(this.Ue):Promise.resolve(this.Ge)}}class _t{static fromActionPayload(t,e,s,r,o){switch(t.type){case i.ActionType.Postback:return new bt(e,t);case i.ActionType.Url:return new xt(e,t,s.openLinksInNewWindow,s.linkHandler);case i.ActionType.Webview:return new xt(e,t,s.openLinksInNewWindow,o.webviewLinkHandler);case i.ActionType.Location:return new gt(e,t);case i.ActionType.Call:return new mt(e,t);case i.ActionType.Share:return new vt(e,t,r);case i.ActionType.SubmitForm:return new wt(e,t);case i.ActionType.Popup:return new ft(e,t,s,o.onMessageActionClicked);case i.ActionType.Client:return new yt(e,t,r);default:return _t.logger.error(`Payload contains wrong action type:${t.type}`),null}}}_t.logger=new kt("ActionComponentFactory");const zt={LEFT:"left",RIGHT:"right"};class Mt{constructor(t,e,s,r,o,n){this.settings=t,this.util=e,this.payload=s,this.side=r,this.source=o,this.options=n,this.actions=[],this.globalActions=[],this.Ye=[],this.locale=t.locale,this.translations=t.i18n[this.locale],this.shareText=function(t){let e="";switch(t.type){case i.MessageType.Card:return t.cards.forEach((t=>{var s;e+=(t.title?`${t.title} - `:"")+(t.description?`${t.description} - `:"")+(null!==(s=t.url)&&void 0!==s?s:"")+"\n"})),e;case i.MessageType.Text:return t.text;case i.MessageType.Attachment:return t.attachment.url;case i.MessageType.Location:const s=t.location;return`${s.title?`${s.title} - `:""}${s.latitude}, ${s.longitude}`;case i.MessageType.Table:t.rows.forEach((t=>{t.fields.forEach((t=>{e+=t.value?`${t.value} - `:""}))}));break;case i.MessageType.Form:t.forms.forEach((t=>{const s=Pe(t);e+=s?`${s} - `:""}));break;case i.MessageType.EditForm:const r=t;e=r.title?`${r.title} - `:"",(0,i.isEditFormPayloadWithFields)(r)?r.fields.forEach((t=>{(0,i.isReadOnlyField)(t)?e+=t.value?`${t.value} - `:"":e+=t.label?`${t.label} - `:""})):r.formRows.forEach((t=>{t.columns.forEach((t=>{t.fields.forEach((t=>{(0,i.isReadOnlyField)(t)?e+=t.value?`${t.value} - `:"":e+=t.label?`${t.label} - `:""}))}))}));break;case i.MessageType.TableForm:const o=t;o.rows.forEach(((t,s)=>{t.fields.forEach((t=>{e+=t.value?`${t.value} - `:""})),e+=Pe(o.forms[s])}))}return Ve(e)}(s),n&&n.locale&&(this.locale=n.locale,this.translations=Object.assign(Object.assign({},this.translations),this.settings.i18n[n.locale])),s.actions&&(this.actions=this.buildActions(s.actions,this.shareText)),s.globalActions&&(this.globalActions=this.buildActions(s.globalActions,this.shareText)),this.headerText=s.headerText,this.footerText=s.footerText,s.footerForm&&(this.footerFormComponent=_e(e,s.footerForm,t,n)),this.Ye=Y(this.actions).concat(Y(this.globalActions))}handleOnActionClick(t){if(this.onActionClick){const e=t;e.messageComponent=this,this.onActionClick(e)}}hasActions(){return this.actions.length>0||this.globalActions.length>0}focusFirstAction(){var t;null===(t=this.firstActionButton)||void 0===t||t.focus()}disableActions(){this.actions.forEach((t=>{t.disable()})),this.globalActions.forEach((t=>{t.disable()})),this.footerFormComponent&&this.footerFormComponent.disableActions()}disablePostbacks(){this.Ye.forEach((t=>{t.disable()})),this.footerFormComponent&&this.footerFormComponent.disablePostbacks()}enableActions(){this.actions.forEach((t=>{t.enable()})),this.globalActions.forEach((t=>{t.enable()})),this.footerFormComponent&&this.footerFormComponent.enableActions()}enablePostbacks(){this.Ye.forEach((t=>{t.enable()})),this.footerFormComponent&&this.footerFormComponent.enablePostbacks()}render(t){const e=this,s=e.util,i=e.actions,r=e.globalActions,o=this.payload.embeddedActions,n="embeddedAction";this.element&&(this.element.innerHTML="");const a=this.element?this.element:s.createDiv(["message"]);a.lang=e.locale;const c=s.createDiv(["message-wrapper"]);a.appendChild(c);const h=e.getContent(t);if(e.headerText&&c.appendChild(e.getHeader()),c.appendChild(h),i&&i.length){const t=e.getActions();(this.settings.displayActionsAsPills?c:h).appendChild(t),e.firstActionButton||(e.firstActionButton=t.firstElementChild),this.actionsWrapper=t}if(e.footerText&&c.appendChild(e.getFooter()),this.footerFormComponent){const t=s.createDiv(["footer-form"]);t.appendChild(this.footerFormComponent.render()),c.appendChild(t)}if(r&&r.length){const t=e.getGlobalActions();a.appendChild(t),e.firstActionButton||(e.firstActionButton=t.firstElementChild)}return this.element=a,a.querySelectorAll(`span.${n}`).forEach((t=>{const e=t,i=o.find((e=>e.id===t.id));if(i){s.addCSSClass(t,n,`display-${i.displayType}`);const r=_t.fromActionPayload(i,s,this.settings,this.shareText,this.options);r&&(r.onActionClick=this.handleOnActionClick.bind(this),r.render(),e.onclick=t=>r.handleOnClick(t))}})),a}getHeader(){return Ct(this.headerText,"message-header",this.util,this.settings.embeddedVideo)}getContent(t){const e=this.util.createDiv(["message-bubble"]);return e.style.padding=this.settings.messagePadding||e.style.padding,t&&e.appendChild(t),e}getActions(){const t=this.settings,e=t.displayActionsAsPills?["message-global-actions"]:["message-actions"];return"horizontal"!==t.actionsLayout&&e.push("col"),St(this.actions,e,this.util)}getFooter(){return Ct(this.footerText,"message-footer",this.util,this.settings.embeddedVideo)}getGlobalActions(){const t=["message-global-actions"];return this.settings.icons.avatarBot&&t.push("has-message-icon"),"horizontal"!==this.settings.globalActionsLayout&&t.push("col"),St(this.globalActions,t,this.util)}buildActions(t,e){const s=this.settings;return function(t,e,s,i,r,o){const n=[];return t.forEach((t=>{const a=_t.fromActionPayload(t,e,s,i,r);a&&(a.onActionClick=o,n.push(a))})),n}(t,this.util,s,e,this.options,this.handleOnActionClick.bind(this))}}function Ct(t,e,s,i){const r=s.createDiv(["message-bubble",e]),o=s.createTextDiv();return o.innerHTML=K(t,s.cssPrefix,i),r.appendChild(o),r}function St(t,e,s){const i=s.createTextDiv(e);return t.forEach((t=>{i.appendChild(t.render())})),i}class $t{}$t.GEOLOCATION_REQUEST_DENIED=1,$t.CHAT_SCROLL_DELAY=300,$t.WEBSOCKET_READY_STATE=["CONNECTING","OPEN","CLOSING","CLOSED"],$t.WEBSOCKET_CLOSE_EVENT={CODE:{ABNORMAL_CLOSURE:1006}},$t.ATTACHMENT_HEADER={AUTHORIZATION:"Authorization",FILE_AUTH_TYPE:"x-oda-meta-file-authType",FILE_IS_PROTECTED:"x-oda-meta-file-isProtected",FILE_SIZE:"x-oda-meta-file-size"},$t.MAX_SUGGESTIONS_COUNT=5,$t.MIN_SUGGESTIONS_COUNT=1,$t.SUGGESTIONS_COUNT_THRESHOLD=30,$t.TIME={MIN_FIFTY:3e6};const Tt="24.04",At=1024,Ot=26214400,It=1e3;class Et{static capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}constructor(t,e,s,i,r){this.settings=t,this.util=e,this.side=i,this.Je=r,this.P=s.url,this.Te=s.type;const o=s.url.split("/");this.Ke=decodeURI(s.title||o[o.length-1]),this.Xe=s.filename}Qe(t,e){const s=this.util,i=this.settings,r=s.createElement("a",[],!0),o=s.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:i.icons.download||b,iconCss:["attachment-download-icon"],title:i.i18n[i.locale].download});return r.setAttribute("href",t),r.setAttribute("download",e||""),r.setAttribute("target","_blank"),r.appendChild(o),r}createAttachment(t,e){const s=this.util,r=this.settings,o=s.createDiv(["attachment"]),n=s.createDiv(["attachment-placeholder","flex"]),a=s.createDiv(["attachment-icon"]),c=s.createImageIcon({icon:t});a.appendChild(c);const h=this.Ke,l=s.createDiv(["attachment-footer","flex",this.Je&&"with-actions"]),p=s.createLabel(["attachment-title"]),u=s.createDiv(["attachment-controls","flex"]);if(p.innerText=h,p.setAttribute("title",h),l.appendChild(p),this.Te===i.AttachmentType.Image){const t=s.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:r.icons.expandImage||F,iconCss:["attachment-expand-icon"],title:r.i18n[r.locale].imageViewerOpen});t.onclick=()=>{this.createImagePreview(this.P,h)},u.appendChild(t)}if(this.side===zt.LEFT&&u.appendChild(this.Qe(this.P,this.Xe)),e)switch(n.appendChild(e),e.onerror=()=>{e.remove(),n.appendChild(a)},this.Te){case i.AttachmentType.Image:e.onload=()=>{e.clientHeight>211&&(n.style.alignItems="flex-start"),l.appendChild(u)},e.onclick=()=>{this.createImagePreview(this.P,this.Ke)};break;case i.AttachmentType.Audio:case i.AttachmentType.Video:e.onloadeddata=()=>{l.appendChild(u)}}else n.appendChild(a),l.appendChild(u);return o.appendChild(n),null==o||o.appendChild(l),o}createImagePreview(t,e){const s=this.util,i="image-preview",r=this.settings,o=s.createDiv([`${i}-wrapper`]),n=s.createImage(t,[i]),a=s.createLabel([`${i}-title`]);a.innerText=e;const c=document.querySelector(`.${this.settings.name}-wrapper`),h=r.icons.close||g,l=s.createIconButton({css:[`${i}-close`],icon:h,iconCss:[`${i}-close-icon`],title:r.i18n[r.locale].imageViewerClose});l.onclick=()=>{o.remove()},l.onkeydown=t=>{"Tab"===t.code&&(o.focus(),t.preventDefault())};const p=s.createDiv([`${i}-header`]);p.appendChild(a),p.appendChild(l),o.appendChild(p),o.appendChild(n),o.setAttribute("tabindex","-1"),o.onkeydown=t=>{"Escape"===t.code&&o.remove()},c.appendChild(o),o.focus()}}class Lt extends Et{render(){const t=this.util,e=this.settings,s=e.icons.fileAudio||h,i=t.createMedia("video",this.P,["attachment-audio"]);i.controls=!0,i.preload="metadata",zt.RIGHT===this.side&&i.setAttribute("controlsList","nodownload");const r=`<a href="${this.P}">`,o=e.i18n[e.locale].attachmentAudioFallback.replace("{0}",r).replace("{/0}","</a>");return i.innerHTML=o,e.linkHandler?Se(i,e.linkHandler):e.openLinksInNewWindow&&$e(i),this.createAttachment(s,i)}}class Pt extends Et{render(){const t=this.settings.icons.fileGeneric||x;return this.createAttachment(t)}}class jt extends Et{render(){const t=this.util,e=this.settings.icons.fileImage||k,s=t.createImage(this.P,["attachment-image"],this.Ke);return this.createAttachment(e,s)}}class Ht extends Et{render(){const t=this.util,e=this.settings,s=this.P,i=e.icons.fileVideo||H,r=X(s,t.cssPrefix);if(r){const e=t.createElement("span");return e.innerHTML=r,e}const o=t.createMedia("video",this.P,["attachment-video"]);o.controls=!0,o.preload="metadata",zt.RIGHT===this.side&&o.setAttribute("controlsList","nodownload");const n=`<a href="${this.P}">`,a=e.i18n[e.locale].attachmentVideoFallback.replace("{0}",n).replace("{/0}","</a>");return o.innerHTML=a,this.settings.linkHandler?Se(o,e.linkHandler):this.settings.openLinksInNewWindow&&$e(o),this.createAttachment(i,o)}}class Vt extends Mt{static fromPayload(t,e,s,r,o,n=!1){if(o&&o.authToken&&o.uri&&s.url.indexOf(o.uri)>=0&&!this.ts.test(s.url)){const t=null==o?void 0:o.authToken;(null==t?void 0:t.length)&&(s.url=`${s.url}?token=${t}`)}switch(s.type){case i.AttachmentType.Image:return new jt(t,e,s,r,n);case i.AttachmentType.Video:return new Ht(t,e,s,r,n);case i.AttachmentType.Audio:return new Lt(t,e,s,r,n);case i.AttachmentType.File:return new Pt(t,e,s,r,n);default:throw Error("Payload contains wrong attachment type")}}constructor(t,e,s,i,r,o){super(t,e,s,i,r,o),this.rs=Vt.fromPayload(t,e,s.attachment,i,o,this.hasActions())}getContent(){return super.getContent(this.rs.render())}}Vt.ts=/token=[a-z\.\d]+/i;class Ft{constructor(t,e,s,i,r){var o;if(this.Fe=t,this.os=e,this.te=r,this.ns=[],this.Ye=[],this.Ke=s.title,this.cs=s.description,this.Oe=s.imageUrl,this.P=s.url,s.actions){for(const i of s.actions){const s=(this.Ke?`${this.Ke} - `:"")+(this.cs?`${this.cs} - `:"")+(null!==(o=this.P)&&void 0!==o?o:""),n=_t.fromActionPayload(i,e,t,s,r);n&&(n.onActionClick=this.handleOnActionClick.bind(this),this.ns.push(n))}this.Ye=Y(this.ns)}}handleOnActionClick(t){this.onActionClick&&this.onActionClick(t)}render(){const t=this.os,e=this.Fe,s=e.embeddedVideo,i=e.locale,r=this.P,o=t.createDiv(["card"]),n=r?t.createAnchor(r,"",["card-component"],e.openLinksInNewWindow,e.linkHandler):t.createDiv(["card-content"]);if(this.P&&(n.innerText=""),this.Oe){const s=e.i18n;let r=s[i].cardImagePlaceholder;if(this.te&&this.te.locale){const t=s[this.te.locale];r=t?t.cardImagePlaceholder:r}n.appendChild(t.createImage(this.Oe,["card-image"],r))}const a=t.createTextDiv(["card-title"]);if(a.innerHTML=K(this.Ke,t.cssPrefix,s),n.appendChild(a),this.cs){const e=t.createTextDiv(["card-description"]);e.innerHTML=K(this.cs,t.cssPrefix,s),n.appendChild(e)}if(o.appendChild(n),e.linkHandler?Se(n,e.linkHandler):e.openLinksInNewWindow&&$e(n),this.ns.length>0){const s=t.createDiv("horizontal"!==e.cardActionsLayout?["card-actions","col"]:["card-actions"]);let i=!0;for(const t of this.ns){const e=t.render();i&&(this.hs=e,i=!1),s.appendChild(e)}o.appendChild(s)}return o}hasActions(){return this.ns.length>0}disableActions(){this.ns.forEach((t=>t.disable()))}disablePostbacks(){this.Ye.forEach((t=>t.disable()))}enableActions(){this.ns.forEach((t=>t.enable()))}enablePostbacks(){this.Ye.forEach((t=>t.enable()))}getFirstActionButton(){return this.hs}}class Nt extends Mt{constructor(t,e,s,i,r,o){super(t,e,s,i,r,o),this.ls=[],this.ps=s.layout,this.us=s.cards.length;let n=0;s.cards.forEach((t=>{n++,this.ls.push(new Ft(this.settings,e,t,n,o))})),this.globalActions=this.actions.concat(this.globalActions),this.actions=[],this.ds=!1}hasActions(){return this.ls[0].hasActions()||this.actions.length>0||this.globalActions.length>0}disableActions(){super.disableActions(),this.ls.forEach((t=>{t.disableActions()}))}disablePostbacks(){super.disablePostbacks(),this.ls.forEach((t=>{t.disablePostbacks()}))}enableActions(){super.enableActions(),this.ls.forEach((t=>{t.enableActions()}))}enablePostbacks(){super.enablePostbacks(),this.ls.forEach((t=>{t.enablePostbacks()}))}render(){const t=this.util,e=this.settings.name,s=[`card-message-${this.ps}`],i=super.render();if(i.querySelector(`.${e}-icon-wrapper`)){s.push("has-message-icon");const r=i.querySelector(`.${e}-content-wrapper`);t.addCSSClass(r,"with-icon")}return t.addCSSClass(i,...s),i}setCardsScrollDirection(){this.ds="rtl"===getComputedStyle(this.gs).direction}getContent(){const t=this.util,e=this.us,s=t.createDiv(["card-message-content"]),i=t.createDiv(["card-message-cards"]);let r=!0;if(this.ls.forEach((t=>{t.onActionClick=this.handleOnActionClick.bind(this);const e=t.render();r&&t.hasActions()&&(this.firstActionButton=t.getFirstActionButton(),r=!1),i.appendChild(e)})),s.appendChild(i),"horizontal"===this.ps&&e>1){let t;s.appendChild(this.fs()),this.bs=0,i.addEventListener("scroll",(()=>{window.clearTimeout(t),t=window.setTimeout((()=>{let t=0;for(let s=0;s<e;s++){const r=this.ds?e-s-1:s,o=i.children[r];if(i.scrollLeft<=o.offsetLeft+5){t=r;break}}t!==this.bs&&(this.bs=t,this.vs())}),100)})),window.addEventListener("resize",Ee((()=>{this.ws()}),500))}this.xs=s,this.gs=i;return new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&this.ws()}))}),{root:document.querySelector(".oda-chat-conversation")}).observe(i),s}fs(){if(!this.ks){const t=this.util,e=this.translations.cardNavNext;this.ks=t.createDiv(["next-wrapper"]);const s=t.createIconButton({css:["round","next"],icon:u,iconCss:[],title:e});s.onclick=this.ys.bind(this),this.ks.appendChild(s)}return this.ks}_s(){if(!this.zs){const t=this.util,e=this.translations.cardNavPrevious;this.zs=t.createDiv(["prev-wrapper"]);const s=t.createIconButton({css:["round","previous"],icon:d,iconCss:[],title:e});s.onclick=this.Ms.bind(this),this.zs.appendChild(s)}return this.zs}ys(){this.bs<this.us&&(this.bs++,this.vs())}Ms(){this.bs>0&&(this.bs--,this.vs())}vs(){var t,e,s,i;const r=this.gs.children[this.bs];r&&(this.gs.scrollLeft=r.offsetLeft-56,0===this.bs?null===(t=this.zs)||void 0===t||t.remove():(null===(e=this.zs)||void 0===e?void 0:e.parentElement)||this.xs.prepend(this._s()),this.bs===this.us-1?null===(s=this.ks)||void 0===s||s.remove():(null===(i=this.ks)||void 0===i?void 0:i.parentElement)||this.xs.appendChild(this.fs()))}ws(){this.gs.scrollWidth===this.gs.offsetWidth?(this.ks&&(this.ks.hidden=!0),this.zs&&(this.zs.hidden=!0)):(this.ks&&(this.ks.hidden=!1),this.zs&&(this.zs.hidden=!1))}}class Rt extends Mt{constructor(t,e,s,i,r,o){super(t,e,s,i,r,o);const n=s.location;this.Ke=n.title,this.P=n.url,this.Cs=n.longitude,this.Ss=n.latitude}render(){const t=this.util,e=t.createDiv(["message"]);e.lang=this.locale;const s=t.createDiv(["message-wrapper"]);e.appendChild(s);const i=t.createDiv(["attachment"]),r=t.createDiv(["attachment-placeholder","flex"]),o=t.createDiv(["attachment-icon"]),n=t.createImageIcon({icon:this.settings.icons.shareMenuLocation||I}),a=t.createDiv(["attachment-footer","flex"]),c=t.createLabel(["attachment-title"]);if(c.innerText=this.Ke?this.Ke:`${this.Ss.toFixed(4)}, ${this.Cs.toFixed(4)}`,a.appendChild(c),o.appendChild(n),r.appendChild(o),!this.actions.length){const e=t.createDiv(["attachment-controls"]),s=t.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:this.settings.icons.externalLink||w,iconCss:[],title:this.translations.openMap}),i=t.createAnchor(this.P||`https://www.google.com/maps/@${this.Ss},${this.Cs},12z`,"",[],this.settings.openLinksInNewWindow,this.settings.linkHandler);s.onclick=()=>{i.click()},e.appendChild(s),a.appendChild(e)}return i.appendChild(r),i.appendChild(a),s.appendChild(this.getContent(i)),e}}class Dt extends Mt{constructor(t,e,s,i,r,o){super(t,e,s,i,r,o),this.Ge=JSON.stringify(s.payload)}getContent(){const t=this.util.createTextSpan();return t.innerText=this.Ge,super.getContent(t)}}class Ut extends Mt{constructor(t,e,s,i,r,o){super(t,e,s,i,r,o),this.$s=s.text}getContent(){const t=this.settings,e=this.util,s=this.$s,r=e.createTextDiv(["message-text"]);return this.side===zt.RIGHT?(0,i.isPostbackPayload)(this.payload)&&Bt(s)?(e.addCSSClass(r,"message-user-postback"),r.innerHTML=s):r.textContent=Wt(s):(r.innerHTML=K(s,e.cssPrefix,t.embeddedVideo),t.linkHandler?Se(r,t.linkHandler):t.openLinksInNewWindow&&$e(r)),super.getContent(r)}}const Bt=t=>!!t&&/^<img\s+/i.test(t),Wt=t=>t.replace(/&#x([0-9a-f]+);/gi,((t,e)=>String.fromCharCode(parseInt(e,16)))),Zt="start",qt="end";class Gt extends Mt{constructor(t,e,s,i,r,o){super(t,e,s,i,r,o),this.Ts="",this.As=s.streamState,this.$s=s.text,this.Ts=s.text;let n="";this.Os=Yt((s=>{n+=s;const i=n.length%20?n:K(n,e.cssPrefix,t.embeddedVideo),r=Me(i);this.textElement&&(this.textElement instanceof HTMLInputElement||this.textElement instanceof HTMLTextAreaElement?(this.textElement.focus(),this.textElement.value=r,this.textElement instanceof HTMLTextAreaElement&&(this.textElement.scrollTop=this.textElement.scrollHeight)):this.textElement.innerHTML=r)}),(()=>{var t;this.As===qt&&(this.isCoPilot?this.showDone():(this.$s=null===(t=this.textElement)||void 0===t?void 0:t.innerHTML,this.render()))}),t.typingDelay||1)}update(t){const e=t.streamState;switch(this.As=e,e){case Zt:this.renderClean(t),this.isCoPilot&&this.Os.push(t.text.split(""));break;case"running":this.Os.push(t.text.split("")),this.Ts=t.text;break;case qt:const e=this.Ts;if(this.Ts="",e.length){const s=t.text.lastIndexOf(e);if(s>=0){const i=t.text.substring(s+e.length);this.Os.push(i.split("")),this.isCoPilot||this.setAddOnComponents(t);break}}this.renderClean(t)}}getContent(){var t;const e=this.settings,s=this.util,i=s.createTextDiv();return i.setAttribute("aria-hidden","true"),this.As!==Zt&&this.textElement?(i.innerHTML=K(this.$s,s.cssPrefix,e.embeddedVideo),this.As===qt&&i.removeAttribute("aria-hidden"),e.linkHandler?Se(i,e.linkHandler):e.openLinksInNewWindow&&$e(i)):(this.textElement=i,this.Os.push(null===(t=this.$s)||void 0===t?void 0:t.split(""))),super.getContent(i)}renderClean(t){this.Os.clear(),this.$s=t.text,this.isCoPilot||(this.setAddOnComponents(t),this.render())}setAddOnComponents(t){this.headerText=t.headerText,t.actions&&(this.actions=this.buildActions(t.actions)),this.footerText=t.footerText,t.footerForm&&(this.footerFormComponent=_e(this.util,t.footerForm,this.settings,this.options)),t.globalActions&&(this.globalActions=this.buildActions(t.globalActions)),this.Ye=Y(this.actions).concat(Y(this.globalActions))}}const Yt=(t,e,s)=>{const i=[];let r=!0;const o=()=>{if(!i.length)return r=!0,void setTimeout((()=>e()));setTimeout((()=>{i.length&&(t(i.shift()),o())}),s)};return{push:t=>{i.push(...t),r&&(r=!1,o())},clear:()=>{i.length=0}}};class Jt extends Ut{constructor(t,e,s,i,r,o){super(t,e,s,i,r,o),this.Is=0,this.Es=s.actions,this.ratingId=Date.now()}focusFirstAction(){this.Ls[0].focus()}disableActions(){this.Ps(!0),super.disableActions()}disablePostbacks(){this.Ps(!0),super.disablePostbacks()}enableActions(){this.Ps(!1),super.enableActions()}enablePostbacks(){this.Ps(!1),super.enablePostbacks()}highlightRating(t){if(!this.actions||!this.Ls)return;const e=this.util,s="active",i="string"==typeof t?this.js(t):t;for(let t=1;t<=this.Ls.length;t++){const r=this.Ls[t-1];if(!r)break;i&&t<=i||0===i&&t<=this.Is?e.addCSSClass(r,s):e.removeCSSClass(r,s)}}getActions(){const t=this.util,e=this.settings,s=e.i18n[e.locale].ratingStar,i=t.createDiv(["rating-wrapper"]);this.Ls=this.Es.map((r=>{const o=t.createElement("input",["star-input","rating-hidden"]);o.id=`rating-${r.label}-${this.ratingId}`,o.type="radio",o.name=`rating-${this.ratingId}`,o.value=r.label;const n=t.createLabel(["star-label"]);n.htmlFor=`rating-${r.label}-${this.ratingId}`,n.setAttribute("data-rating",r.label);const a=t.createTextSpan(["rating-hidden"]),c=s.replace("{0}",`${r.label}`);a.innerText=c;const h=e.icons&&e.icons.rating||S,l=t.createImageIcon({icon:h,iconCss:["rating-star-icon"]});return n.appendChild(a),n.appendChild(l),o.onfocus=()=>{o.disabled||(this.Is=this.Hs(o))},o.onkeydown=t=>{"Enter"===t.key&&this.Vs(r)},n.onclick=()=>{o.disabled||(this.Is=this.Hs(n),this.Vs(r))},n.onmouseover=()=>{o.disabled||this.Hs(n)},n.onmouseleave=()=>{o.disabled||this.Hs(null)},i.appendChild(o),i.appendChild(n),o})),this.Is&&this.Hs(null);const r=t.createDiv(["rating-root"]);return r.appendChild(i),r}Ps(t){this.Ls&&this.Ls.forEach((e=>{e.disabled=t}))}Vs(t){const e={getPayload:()=>Promise.resolve(t.postback),label:t.label,type:t.type};this.handleOnActionClick(e)}Hs(t){let e=0;if(t){const s="value"in t?t.value:null==t?void 0:t.getAttribute("data-rating");e=s?parseInt(s,10):0}return this.highlightRating(e),e}js(t){let e=0;if(t.match(/^\d+$/)){const s=parseInt(t,10);s>0&&s<=this.actions.length&&(e=s)}return e}}class Kt extends Mt{constructor(t,e,s,i,r,o){super(t,e,s,i,r,o),this.ns=[],this.cssPrefix=t.name,this.te=o,this.Ge=s}disableActions(){super.disableActions(),this.ns.forEach((t=>{t.disable()}))}disablePostbacks(){super.disablePostbacks(),Y(this.ns).forEach((t=>{t.disable()}))}enableActions(){super.enableActions(),this.ns.forEach((t=>{t.enable()}))}enablePostbacks(){super.enablePostbacks(),Y(this.ns).forEach((t=>{t.enable()}))}render(){return super.render()}getHeader(){const t=this.util,e=super.getHeader();return t.addCSSClass(e,"message-header-yellow"),e}getContent(t){const e=this.util,s="message-bubble",r=this.Ge.type,o=e.createDiv([s]);r===i.MessageType.Table||r===i.MessageType.TableForm?e.addCSSClass(o,`${s}-tabular-message`):e.addCSSClass(o,`${s}-form-message`,r===i.MessageType.EditForm?"edit-form-message":""),t&&o.appendChild(t);const n=this.getPageStatus();return n&&o.appendChild(n),o}getPageStatus(){const t=this.util;let e;const s=this.Ge.paginationInfo;return s&&s.totalCount>s.rangeSize&&(e=t.createTextDiv(["results-page-status"]),e.innerText=s.status),e}}class Xt{constructor(t,e,s,r,o,n){this.Fe=t,this.os=e,this.Fs=s,this.Ns=n,this.isTableField=!1,this.isColumnField=!1,s.displayType===i.DisplayType.Action&&(this.action=_t.fromActionPayload(s.action,e,t,r,o))}render(){var t;const e=this.os,s=this.Fs,r="form-message",o=this.Fe,{alignment:n,label:c,labelFontSize:h,labelFontWeight:l,marginTop:p,onHoverPopupContent:u}=s,d=e.createTextDiv([`${r}-value`]),m=null===(t=s.value)||void 0===t?void 0:t.toString();switch(s.displayType){case i.DisplayType.Link:const t=e.createDiv(),{imageUrl:r,linkLabel:h}=s,l=e.createElement("a",h?[]:["ellipsis"],!0);if(l.href=m,r){const t=e.createImage(r,["video-wrapper"],m);t.alt=h||"",l.appendChild(t),c&&e.addCSSClass(d,"with-top-margin")}else l.innerHTML=h||(0,a.stripHTTP)(m)||"";l.setAttribute("target","_blank"),t.appendChild(l),o.linkHandler?Se(t,o.linkHandler):o.openLinksInNewWindow&&$e(t),d.appendChild(l);break;case i.DisplayType.Text:const{fontSize:p,fontWeight:u,truncateAt:g}=s;m&&g?(d.innerHTML=`${m.slice(0,g)}...`,d.title=m):d.innerHTML=m||"",Qt(d,p,u,e);break;case i.DisplayType.Media:const f=s.mediaType,b=c&&m;switch(f){case"image":const t=e.createImage(m,["video-wrapper"],m);b&&e.addCSSClass(d,"with-top-margin"),d.appendChild(t);break;case"video":X(m,e.cssPrefix)?(d.innerHTML=K(m,e.cssPrefix,o.embeddedVideo),o.embeddedVideo&&b&&e.addCSSClass(d,"with-top-margin")):d.appendChild(se(f,m,d,b,e));break;case"audio":d.appendChild(se(f,m,d,b,e))}break;case i.DisplayType.Action:e.addCSSClass(d,"flex"),d.style.justifyContent=n,c&&e.addCSSClass(d,"with-top-margin"),this.action.onActionClick=this.onActionClick,d.appendChild(this.action.render())}if(this.isTableField)return ee(d,u,o,e),d;const g=`${r}-field`,f=[g,`${g}-col-${this.Ns}`],b=e.createDiv(f),v=e.createDiv([`${r}-key`]);return v.innerHTML=c||"",n&&(v.style.textAlign=n,d.style.textAlign=n),Qt(v,h,l,e),b.appendChild(v),b.appendChild(d),ee(b,u,o,e),this.isColumnField?te(b,p,e):b}disableActions(){this.action.disable()}disablePostbacks(){Y([this.action]).forEach((t=>{t.disable()}))}enableActions(){this.action.enable()}enablePostbacks(){Y([this.action]).forEach((t=>{t.enable()}))}}function Qt(t,e,s,i){switch(e){case"large":i.addCSSClass(t,"font-size-lg");break;case"small":i.addCSSClass(t,"font-size-sm");break;default:i.addCSSClass(t,"font-size-md")}switch(s){case"bold":i.addCSSClass(t,"font-weight-bold");break;case"light":i.addCSSClass(t,"font-weight-light");break;default:i.addCSSClass(t,"font-weight-md")}}function te(t,e,s){return"large"===e?s.addCSSClass(t,"margin-top-lg"):"none"!==e&&s.addCSSClass(t,"margin-top-md"),t}function ee(t,e,s,i){if(e){const r=ke.fromMessage(s,i,{messagePayload:e});if(r){const e=i.createDiv(),s=i.createDiv(["popupContent"]);s.appendChild(r.render()),s.setAttribute("role","tooltip"),e.appendChild(s),t.style.cursor="pointer",t.appendChild(e)}}}const se=(t,e,s,i,r)=>{const o=r.createMedia(t,e,["video-wrapper"]);return o.controls=!0,o.preload="metadata",i&&r.addCSSClass(s,"with-top-margin"),o};class ie extends Kt{getContent(){const t=this.util,e=this.settings,s=this.Ge,i="form-message",r=t.createDiv([i]);s.formColumns>2&&(s.formColumns=2);const o=s.forms;return o.forEach(((n,a)=>{if(n.title){const e=t.createTextDiv([`${i}-header`]);e.innerText=n.title,r.appendChild(e)}const[c,h]=re(t,n,s.formColumns,e,this.handleOnActionClick.bind(this),this.te);this.ns=this.ns.concat(h);const l=a+1;l===o.length||o[l].title||t.addCSSClass(c,"with-border"),r.appendChild(c)})),super.getContent(r)}}function re(t,e,s,r,o,n){var a;const c="form-message",h=`${c}-actions-col`,l=null===(a=e.channelExtensions)||void 0===a?void 0:a.c2kReferences,p=t.createDiv([`${c}-item`,l?"c2k-reference":""]),u=Pe(e,!0),d=function(t,e,s,i,r,o){var n;const a=[];if((null===(n=t.actions)||void 0===n?void 0:n.length)>0)for(const n of t.actions){const t=_t.fromActionPayload(n,e,s,r,o);t&&(t.onActionClick=i,a.push(t))}return a}(e,t,r,o,u,n);let m;if(d.length&&(m=function(t,e,s,i){const r=e.createDiv("horizontal"!==s.formActionsLayout?["form-actions","col",i]:["form-actions"]);for(const e of t){const t=e.render();r.appendChild(t)}return r}(d,t,r,h)),(0,i.isFormEntityWithRows)(e)?e.formRows.forEach(((e,s)=>{const a=oe(e,d,t,r,u,o,n),c=e.columns.length;if(e.columns.forEach((e=>{const s=ae(e,t);e.fields.forEach((a=>{if((0,i.isReadOnlyField)(a)){const i=new Xt(r,t,a,u,n);i.isColumnField=!0,i.onActionClick=o,i.action&&d.push(i.action),ce(e.width,a.displayType,s,c),s.appendChild(i.render())}})),a.appendChild(s)})),l&&0!==s){const e=t.createTextSpan(["delimiter"]);e.innerHTML="&bull;",a.firstElementChild.firstElementChild.lastElementChild.prepend(e)}p.appendChild(a)})):e.fields.forEach((e=>{const i=new Xt(r,t,e,u,n,s);i.onActionClick=o,i.action&&d.push(i.action),p.appendChild(i.render())})),m&&p.appendChild(m),e.selectAction){ne(_t.fromActionPayload(e.selectAction,t,r,u,n),d,o,p,e.selectAction.label)}return[p,d]}function oe(t,e,s,i,r,o,n){const a=s.createDiv(["form-row",t.separator?"separator":""]);if(t.selectAction){ne(_t.fromActionPayload(t.selectAction,s,i,r,n),e,o,a,t.selectAction.label)}return a}function ne(t,e,s,i,r){t&&(e.push(t),t.onActionClick=s,i.onclick=e=>t.handleOnClick(e),i.title=r||"",i.style.cursor="pointer")}function ae(t,e){const{width:s,verticalAlignment:i}=t,r=e.createDiv(["form-row-column",s||""]);return"center"===i?e.addCSSClass(r,"align-center"):"bottom"===i?e.addCSSClass(r,"align-end"):e.addCSSClass(r,"align-start"),r}function ce(t,e,s,r){"stretch"===t||e!==i.DisplayType.Media||s.style.maxWidth||(s.style.maxWidth=`calc((100% - ${16*(r-1)}px)/${r})`)}const he="aria-expanded";class le extends Kt{constructor(){super(...arguments),this.Rs=0,this.Ds=0,this.Us=[],this.Bs=new kt("EditFormMessageComponent"),this.Ws={}}disableActions(){super.disableActions(),pe(this.Zs,this.Us,this.util)}disablePostbacks(){super.disablePostbacks(),pe(this.Zs,this.Us,this.util)}enableActions(){super.enableActions(),pe(this.Zs,this.Us,this.util,!1)}enablePostbacks(){super.enablePostbacks(),pe(this.Zs,this.Us,this.util,!1)}getContent(){const t=this.Ge,e=this.settings,s=this.util,r="form-message",o=`${r}-item`,n=s.createDiv([r]),a=s.createDiv([o]);if(t.title){const e=s.createTextDiv([`${r}-header`]);e.innerText=t.title,n.appendChild(e)}return(0,i.isEditFormPayloadWithFields)(t)?(t.formColumns>2&&(t.formColumns=2),t.fields.filter((t=>t)).forEach((e=>{a.appendChild(this.qs(e,r,!1,t.formColumns))}))):t.formRows.forEach((t=>{const i=oe(t,this.ns,s,e,this.shareText,this.handleOnActionClick.bind(this),this.options),o=t.columns.length;t.columns.forEach((t=>{const e=ae(t,s);t.fields.filter((t=>t)).forEach((s=>{e.appendChild(this.qs(s,r,!0)),ce(t.width,s.displayType,e,o)})),i.appendChild(e)})),a.appendChild(i)})),this.actions.concat(this.ns).some((t=>t.getActionType()===i.ActionType.SubmitForm))||this.Bs.error("Payload does not contain submit-form action"),this.Gs(a,t.errorMessage||(this.Ds&&this.Rs>1?this.translations.editFormErrorMessage:""),!0),n.appendChild(a),this.Ys=a,super.getContent(n)}validateForm(){var t;let e=!0;return null===(t=this.Zs)||void 0===t||t.remove(),this.Us.forEach((t=>{e=this.Js(t)&&e})),!e&&this.Rs>1&&this.Gs(this.Ys,this.translations.editFormErrorMessage,!0),e}getSubmittedFields(){return this.Us.filter((t=>{const e=t.tagName.toLowerCase();return"textarea"===e&&(this.Ws[t.id]=t.value),"input"===e})).forEach((t=>{const e=t;switch(e.type){case"checkbox":this.Ws[e.id]=e.checked?e.getAttribute("valueOn"):e.getAttribute("valueOff");break;case"number":this.Ws[e.id]=e.valueAsNumber;break;default:this.Ws[e.id]=e.value}})),this.Ws}qs(t,e,s,r){const o=this.shareText,n=this.util;if(this.Rs++,(0,i.isReadOnlyField)(t)){const e=new Xt(this.settings,n,t,o,this.options,r);return e.isColumnField=s,e.onActionClick=this.handleOnActionClick.bind(this),e.action&&this.ns.push(e.action),e.render()}return s?te(this.Ks(t,r,e,n),t.marginTop,n):this.Ks(t,r,e,n)}Ks(t,e,s,r){var o,n,c,h;const p=`${s}-field`,u=[p,`${p}-col-${e}`,`edit-${p}`],d=r.createDiv(u),m=r.createDiv([`${s}-key`,"with-margin"]),{labelFontSize:f,labelFontWeight:b,id:v,displayType:w,placeholder:x,required:k,clientErrorMessage:y,serverErrorMessage:_,autoSubmit:z}=t;let M,C,S;switch(m.innerHTML=t.label||"",Qt(m,f,b,r),d.appendChild(m),w){case i.DisplayType.SingleSelect:const e=t;if(C=e.defaultValue,S=e.layoutStyle,C&&(this.Ws[v]=C),S&&"list"!==S)if("radioGroup"===S){const t=r.createElement("form",[`${s}-value`,"form-container","col"]);r.setAttributes(t,{id:v,ariaLabel:w,errorMsg:y}),t.onclick=t=>t.stopPropagation(),e.options.forEach((e=>{const s=r.createInputElement({type:"radio",name:v,value:e.label,required:k,checked:e.value===C},["radio-input"]);s.onchange=()=>{s.checked&&(this.Ws[v]=e.value),this.Xs(v,z,t)};const i=r.createLabel();i.innerText=e.label,i.prepend(s),t.appendChild(i)})),this.Us.push(t),d.appendChild(t),this.Gs(t,_)}else this.Bs.error(`Payload contains wrong layout style:${S} for single select field`);else{const t=r.createDiv(["select-wrapper",`${s}-value`]),i=r.createInputElement({type:"text",placeholder:x,required:k,id:v,autocomplete:"off"},[`${s}-value`]),n=r.createDiv(),c=r.createDiv(["listbox","popup","none"]),h=r.createElement("ul",["single-select-list"]),p=h.getElementsByTagName("li"),u=r.createIconButton({css:["select-icon"],icon:l,iconCss:[],title:""}),m=e=>{"true"!==t.getAttribute(he)||n.contains(e.target)||(b||(i.value=""),f(!1))},g=()=>{"false"===t.getAttribute(he)&&(t.setAttribute(he,"true"),r.removeCSSClass(c,"none"),setTimeout((()=>document.addEventListener("click",m))),i.focus())},f=(e=!0)=>{"true"===t.getAttribute(he)&&(b&&(i.value=b.textContent||b.innerText),t.setAttribute(he,"false"),r.addCSSClass(c,"none"),document.removeEventListener("click",m),this.Qs("",p,M),e&&i.focus())};let b,M=[];r.setAttributes(t,{errorMsg:y}),t.setAttribute(he,"false"),t.setAttribute("aria-label",w),t.onclick=t=>{t.stopPropagation(),g()},t.oninput=()=>{this.Qs(i.value,p,M)?g():f()},t.onkeydown=t=>{var e;const s=t.key;s===a.KeyCode.Down||s===a.KeyCode.Up?!b||b.classList.contains(`${this.cssPrefix}-none`)?null===(e=M[0])||void 0===e||e.focus():null==b||b.focus():s!==a.KeyCode.Esc&&s!==a.KeyCode.Tab||f()},i.onfocus=()=>r.addCSSClass(t,"focused"),i.onblur=()=>r.removeCSSClass(t,"focused"),u.onclick=e=>{e.stopPropagation(),"true"===t.getAttribute(he)?f():g()},null===(o=e.options)||void 0===o||o.forEach((e=>{const s=r.createListItem(e.label,e.label,e.label,"","",(()=>{r.addCSSClass(s,"selected"),b&&r.removeCSSClass(b,"selected"),b=s,f(),this.Ws[v]=e.value,this.Xs(v,z,t)}),!1,!1);s.onkeydown=t=>this.ti(t,s,h,i,M),e.value===C&&(r.addCSSClass(s,"selected"),b=s,i.value=e.label),h.appendChild(s)})),M=Array.from(p),n.onclick=t=>t.stopPropagation(),t.appendChild(i),t.appendChild(u),c.appendChild(h),n.appendChild(c),d.appendChild(t),d.appendChild(n),this.Us.push(t),this.Gs(i,_)}break;case i.DisplayType.MultiSelect:const p=t;if(C=p.defaultValue,S=p.layoutStyle,this.Ws[v]=C||[],S&&"list"!==S)if("checkboxes"===S){const t=r.createElement("form",[`${s}-value`,"form-container","col"]);r.setAttributes(t,{id:v,ariaLabel:w,errorMsg:y,ariaRequired:k?"true":""}),t.onclick=t=>t.stopPropagation(),p.options.forEach((e=>{const s=r.createInputElement({type:"checkbox",name:v,value:e.label,checked:null==C?void 0:C.includes(e.value),required:k},["radio-input"]),i=r.createLabel();i.innerText=e.label,i.prepend(s),s.onchange=()=>{if(s.checked)this.Ws[v].push(e.value);else{const t=this.Ws[v];t.splice(t.indexOf(e.value),1)}this.Xs(v,z,t)},t.appendChild(i)})),this.Us.push(t),d.appendChild(t),this.Gs(t,_)}else this.Bs.error(`Payload contains wrong layout style:${S} for multi select field`);else{const t=r.createDiv([`${s}-value`,"text-field-container"]),e=r.createElement("ul",["selected-options"]),i=r.createDiv(),o=r.createDiv(["listbox","popup","none"]),n=[],c=r.createDiv(["filter-message-box"]),h=r.createDiv(["filter-message-text","none"]),l=r.createInputElement({type:"text"},[`${s}-value`,"listbox-search","none"]),u=r.createElement("ul",["multi-select-list"]),m=u.getElementsByTagName("li"),f=r.createDiv(["search-icon-wrapper","none"]),b=r.createImageIcon({icon:$,iconCss:["search-icon"]});h.textContent=this.translations.noResultText,c.appendChild(h),l.oninput=()=>this.Qs(l.value,m,n)?r.addCSSClass(h,"none"):r.removeCSSClass(h,"none"),l.onkeydown=e=>{var s;const i=e.key;i===a.KeyCode.Down?(this.Qs(l.value,m,n),null===(s=n[0])||void 0===s||s.focus()):i!==a.KeyCode.Esc&&i!==a.KeyCode.Tab||t.click()},x&&e.setAttribute("data-placeholder",x),t.setAttribute(he,"false");const w=e=>{"true"!==t.getAttribute(he)||i.contains(e.target)||M()},M=()=>{t.setAttribute(he,"false"),r.addCSSClass(o,"none"),document.removeEventListener("click",w),l.value="",this.Qs(l.value,m,n),r.addCSSClass(l,"none"),r.addCSSClass(f,"none"),r.addCSSClass(h,"none")};t.onclick=e=>{if(e.stopPropagation(),"true"===t.getAttribute(he))M(),t.focus();else{t.setAttribute(he,"true"),r.removeCSSClass(o,"none");const e=u.firstElementChild;e?e.focus():r.removeCSSClass(h,"none"),setTimeout((()=>document.addEventListener("click",w)))}},t.onkeydown=e=>{const s=e.code;e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||s===a.KeyCode.Esc||s===a.KeyCode.Tab||(t.click(),r.removeCSSClass(l,"none"),r.removeCSSClass(f,"none"),l.focus())},t.setAttribute("aria-required",k?"true":"false"),t.tabIndex=0,y&&t.setAttribute("data-error",y),p.options.forEach((s=>{const i=i=>{const o=r.createDiv(["multi-select-option"]);o.innerText=s.label;const n=r.createImageIcon({icon:g,iconCss:["opt-close"]});n.onclick=()=>{e.removeChild(o),u.appendChild(i);const r=this.Ws[v];r.splice(r.indexOf(s.value),1),this.Xs(v,z,t)},o.appendChild(n),o.onclick=e=>{e.stopPropagation(),"true"===t.getAttribute(he)&&t.click()},e.appendChild(o)},o=r.createListItem(s.label,s.label,s.label,"","",(()=>{t.click(),u.removeChild(o),this.Ws[v].push(s.value),i(o),this.Xs(v,z,t)}),!1,!1);o.onkeydown=e=>this.ti(e,o,u,t,n),(null==C?void 0:C.includes(s.value))?i(o):u.appendChild(o)})),i.onclick=t=>t.stopPropagation(),t.appendChild(e),this.Us.push(t),d.appendChild(t),f.appendChild(b),o.appendChild(c),o.appendChild(l),o.appendChild(f),o.appendChild(u),i.appendChild(o),d.appendChild(i),this.Gs(t,_)}break;case i.DisplayType.Toggle:const u=t,m=r.createLabel([`${s}-value`,"toggle"]);m.tabIndex=0,m.onclick=t=>t.stopPropagation(),M=r.createInputElement({id:v,placeholder:x,required:k,type:"checkbox",checked:u.defaultValue===u.valueOn,errorMsg:y,valueOn:u.valueOn,valueOff:u.valueOff});const f=u.labelOn||u.valueOn,b=u.labelOff||u.valueOff;M.setAttribute("aria-label",M.checked?f:b),M.oninput=()=>{M.setAttribute("aria-label",M.checked?f:b),this.Xs(v,z,M)},m.appendChild(M),m.appendChild(r.createDiv(["round-slider"])),d.appendChild(m),this.Gs(M.parentElement,_);break;case i.DisplayType.DatePicker:const T=t;M=r.createInputElement({type:"date",id:v,title:x,required:k,defaultValue:T.defaultValue,min:T.minDate,max:T.maxDate,errorMsg:y},[`${s}-value`]);break;case i.DisplayType.TimePicker:const A=t;M=r.createInputElement({type:"time",id:v,title:x,required:k,defaultValue:A.defaultValue,min:A.minTime,max:A.maxTime,errorMsg:y},[`${s}-value`]);break;case i.DisplayType.TextInput:const O=t;if(O.multiLine){const t=r.createElement("textarea",[`${s}-value`],!0);r.setAttributes(t,{id:v,required:k,minLength:O.minLength,maxLength:O.maxLength,defaultValue:O.defaultValue,placeholder:O.placeholder,errorMsg:y}),t.rows=3,t.onchange=()=>this.Xs(v,z,t),t.onclick=t=>t.stopPropagation(),d.appendChild(t),this.Us.push(t),this.Gs(t,_)}else M=r.createInputElement({type:O.inputStyle||"text",id:v,placeholder:x,required:k,defaultValue:O.defaultValue,errorMsg:y,minLength:O.minLength,maxLength:O.maxLength,pattern:O.validationRegularExpression},[`${s}-value`]);break;case i.DisplayType.NumberInput:const I=t;M=r.createInputElement({type:"number",id:v,placeholder:x,required:k,defaultValue:null===(n=I.defaultValue)||void 0===n?void 0:n.toString(),min:null===(c=I.minValue)||void 0===c?void 0:c.toString(),max:null===(h=I.maxValue)||void 0===h?void 0:h.toString(),errorMsg:y},[`${s}-value`]);break;default:this.Bs.error(`Payload contains wrong display type:${w} for editable field`)}return M&&("checkbox"!==M.type&&(d.appendChild(M),this.Gs(M,_),M.onchange=()=>this.Xs(v,z,M),M.onclick=t=>t.stopPropagation()),this.Us.push(M)),d}Js(t,e=!1){const s=t.dataset.error,r=()=>{e||("SPAN"===(null==n?void 0:n.tagName)&&(this.util.removeCSSClass(t.parentElement,"error"),n.remove(),this.Ds--),a||this.Gs(t,o||this.translations.editFieldErrorMessage))};let o,n=t.nextElementSibling,a=!0;switch(t.tagName.toLowerCase()){case"form":const e=t,c=e.getAttribute("aria-label");if(c===i.DisplayType.MultiSelect&&"true"===e.ariaRequired){e.querySelectorAll("input[type='checkbox']:checked").length||(a=!1,o=s||e.querySelector("input").validationMessage)}else c!==i.DisplayType.SingleSelect||e.checkValidity()||(a=!1,o=s||e.querySelector("input").validationMessage);break;case"input":const h=t;"checkbox"===h.type?n=n.parentElement.nextElementSibling:h.checkValidity()||(o=s||h.validationMessage,a=!1);break;case"textarea":const l=t;l.checkValidity()||(o=s||l.validationMessage,a=!1);break;case"div":const p=t;n=n.nextElementSibling,p.getAttribute("aria-label")===i.DisplayType.SingleSelect?setTimeout((()=>{const t=p.firstElementChild;return t.checkValidity()||(a=!1,o=s||t.validationMessage),r(),a})):"true"===p.getAttribute("aria-required")&&(o=s,a=!!p.firstElementChild.firstElementChild)}return r(),a}Qs(t,e,s){const i=this.util;s.length=0;for(let r=0;r<e.length;r++){const o=e[r],n=o.querySelector("span"),a=o.textContent||o.innerText;a.toLowerCase().indexOf(t.toLowerCase())<0?(i.addCSSClass(o,"none"),n.innerHTML=a.replace(/(<b>)|(<\/b>)/g,"")):(n.innerHTML=t?a.replace(new RegExp(`${t}`,"gi"),"<b>$&</b>"):a.replace(/(<b>)|(<\/b>)/g,""),i.removeCSSClass(o,"none"),s.push(o))}return s.length>0}ti(t,e,s,i,r){var o,n,c,h;const l=this.cssPrefix,p=r.indexOf(e),u=r.length;let d=!1;if(!(t.ctrlKey||t.altKey||t.metaKey)){if(t.shiftKey&&t.code===a.KeyCode.Tab)i.click();else switch(t.code){case a.KeyCode.Return:case a.KeyCode.Space:e.click(),d=!0;break;case a.KeyCode.Esc:case a.KeyCode.Tab:i.click(),t.code===a.KeyCode.Esc&&(i.focus(),d=!0);break;case a.KeyCode.Up:const m=e.previousElementSibling||s.lastElementChild;m.classList.contains(`${l}-none`)?null===(o=r[(p+u-1)%u])||void 0===o||o.focus():m.focus(),d=!0;break;case a.KeyCode.Down:const g=e.nextElementSibling||s.firstElementChild;g.classList.contains(`${l}-none`)?null===(n=r[(p+1)%u])||void 0===n||n.focus():g.focus(),d=!0;break;case a.KeyCode.Home:case a.KeyCode.PageUp:const f=s.firstElementChild;f.classList.contains(`${l}-none`)?null===(c=r[0])||void 0===c||c.focus():f.focus(),d=!0;break;case a.KeyCode.End:case a.KeyCode.PageDown:const b=s.lastElementChild;b.classList.contains(`${l}-none`)?null===(h=r[u-1])||void 0===h||h.focus():b.focus(),d=!0;break;default:if(i instanceof HTMLInputElement)i.focus();else{const t=s.previousElementSibling,e=t.previousElementSibling,i=this.util;i.removeCSSClass(e,"none"),i.removeCSSClass(t,"none"),e.focus()}}d&&(t.stopPropagation(),t.preventDefault())}}Xs(t,e,s){if(this.Js(s)&&e){const e=JSON.parse(JSON.stringify(this.getSubmittedFields()));this.Us.forEach((t=>{this.Js(t,!0)||delete e[t.id]})),Object.keys(e).forEach((t=>{const s=e[t];Array.isArray(s)?0===s.length&&delete e[t]:0===s||s||delete e[t]}));const s=this.settings.sdkMetadata?Object.assign({version:Tt},this.settings.sdkMetadata):{version:Tt};this.te.webCore.sendMessage((0,i.buildUserMessage)({submittedFields:e,partialSubmitField:t,type:i.MessageType.FormSubmission}),{sdkMetadata:s}).then((()=>{const t=this.settings.disablePastActions;"all"===t?this.disableActions():"postback"===t&&this.disablePostbacks()}))}}Gs(t,e,s=!1){if(e){const i=this.util,r=i.createTextSpan(["field-error",s?"form-error":""]),o=i.createImageIcon({icon:v,iconCss:["form-error-icon"]}),n=i.createTextSpan(["error-text"]);if(n.innerText=e,r.appendChild(o),r.appendChild(n),s)t.appendChild(r),this.Zs=r;else{const e=t.parentElement;i.addCSSClass(e,"error"),e.appendChild(r),this.Ds++}}}}function pe(t,e,s,i=!0){t&&(i?s.addCSSClass(t,"disabled"):s.removeCSSClass(t,"disabled")),e.forEach((t=>{switch(t.tagName.toLowerCase()){case"form":const e=t.getElementsByTagName("input");i?s.addCSSClass(t,"disabled"):s.removeCSSClass(t,"disabled");for(let t=0;t<e.length;t++){e[t].disabled=i}break;case"input":const r=t;r.disabled=i,"checkbox"===r.type&&(i?s.addCSSClass(t.parentElement,"disabled"):s.removeCSSClass(t.parentElement,"disabled"));break;case"textarea":t.disabled=i;break;case"div":i?(s.addCSSClass(t,"disabled"),s.addCSSClass(t.parentElement,"disabled")):(s.removeCSSClass(t,"disabled"),s.removeCSSClass(t.parentElement,"disabled"))}}))}const ue=100;class de extends Kt{getContent(){const t=this.util,e=this.Ge,s=ge(e.headings),i="table-message",r=t.createDiv([`${i}-wrapper`]),o=t.createElement("table",[i]);r.appendChild(o);const n=t.createElement("tr",[`${i}-headings`]);return s.forEach((e=>{const s=me(t,[`${i}-heading`],e.width,e.alignment);s.innerText=e.label,n.appendChild(s)})),o.appendChild(n),e.rows.forEach((e=>{const r=t.createElement("tr",[`${i}-row`]);if(e.selectAction){ne(_t.fromActionPayload(e.selectAction,t,this.settings,this.shareText,this.options),this.ns,this.handleOnActionClick.bind(this),r,e.selectAction.label)}e.fields.forEach(((e,o)=>{const n=me(t,[`${i}-item`],s[o].width,e.alignment),a=new Xt(this.settings,t,e,this.shareText,this.options);a.isTableField=!0,a.onActionClick=this.handleOnActionClick.bind(this),a.action&&this.ns.push(a.action),n.appendChild(a.render()),r.appendChild(n)})),o.appendChild(r)})),super.getContent(r)}}function me(t,e,s,i){const r=t.createElement("td",e,!0);return r.style.textAlign=i,r.style.width=`${s}%`,r}function ge(t){let e;if(t.every((t=>!t.width||t.width>=0&&t.width<=ue))){let s=0,i=0;if(t.forEach((t=>{t.width?i+=t.width:s++})),s)if(i<ue){const r=(ue-i)/s;e=t.map((t=>(t.width||(t.width=r),t)))}else e=fe(t);else if(i===ue)e=t;else{const s=ue/i;e=t.map((t=>(t.width=t.width*s,t)))}}else e=fe(t);return e}function fe(t){const e=ue/t.length;return t.map((t=>(t.width=e,t)))}class be extends Kt{getContent(){const t=this.util,e=this.Ge,s=ge(e.headings.concat({alignment:"center",label:""})),i="table-message",r=t.createDiv([`${i}-wrapper`]),o=t.createElement("table",[i,"tableform-message"]);r.appendChild(o);const n=t.createElement("tr",[`${i}-headings`]);s.forEach((e=>{const s=me(t,[`${i}-heading`],e.width,e.alignment);s.innerText=e.label,n.appendChild(s)})),o.appendChild(n);return n.lastElementChild.style.width="32px",e.rows.forEach(((r,n)=>{const a=t.createElement("tr",[`${i}-row`]);r.fields.forEach(((e,r)=>{const o=me(t,[`${i}-item`],s[r].width,e.alignment),n=new Xt(this.settings,t,e,this.shareText,this.options);n.isTableField=!0,n.onActionClick=this.handleOnActionClick.bind(this),n.action&&this.ns.push(n.action),o.appendChild(n.render()),a.appendChild(o)})),e.formColumns>2&&(e.formColumns=2);const c=e.forms[n],h=me(t,[`${i}-item`,"button-cell"]),l=t.createIconButton({css:[`${i}-item`,`${i}-item-form-toggle`],icon:p,iconCss:[],title:c.title||""});h.appendChild(l),a.appendChild(h);const u="none",d="rotate-180",[m,g]=re(t,c,e.formColumns,this.settings,this.handleOnActionClick.bind(this),this.te);this.ns=this.ns.concat(g),t.addCSSClass(m,u);let f=!1;a.onclick=()=>{f?(t.addCSSClass(m,u),t.removeCSSClass(l,d)):(t.removeCSSClass(m,u),t.addCSSClass(l,d)),f=!f},o.appendChild(a),o.appendChild(m)})),super.getContent(r)}}function ve(t){return!!t.source}function we(t){if(t.msgId)return t.msgId;const e=JSON.stringify(t.messagePayload);return`${xe(e)}`}const xe=t=>{let e=0,s=0;const i=Math.pow(9,9);for(;e<t.length;)s=Math.imul(s^t.charCodeAt(e++),i);return s^s>>>9};class ke{static fromMessage(t,e,s,r){let o,n;ve(s)?(o=zt.LEFT,n=s.source||i.SkillMessageSource.Bot):o=zt.RIGHT;const a=s.messagePayload;switch(a.type){case i.MessageType.Postback:case i.MessageType.Text:return a.channelExtensions&&"stars"===a.channelExtensions.displayType?new Jt(t,e,a,o,n,r):new Ut(t,e,a,o,n,r);case i.MessageType.TextStream:return new Gt(t,e,a,o,n,r);case i.MessageType.Attachment:return new Vt(t,e,a,o,n,r);case i.MessageType.Card:return new Nt(t,e,a,o,n,r);case i.MessageType.Location:return new Rt(t,e,a,o,n,r);case i.MessageType.Table:return new de(t,e,a,o,n,r);case i.MessageType.Form:return new ie(t,e,a,o,n,r);case i.MessageType.TableForm:return new be(t,e,a,o,n,r);case i.MessageType.EditForm:return new le(t,e,a,o,n,r);case i.MessageType.Raw:return new Dt(t,e,a,o,n,r);default:throw Error(`Wrong message payload type:${a.type}`)}}}function ye(t,e){if(!e)return Promise.resolve(!1);if(Array.isArray(e)||(e=[e]),!e.length)return Promise.resolve(!1);const s=e.map((t=>{var e;return null===(e=t.lang)||void 0===e?void 0:e.toLowerCase()}));return t.getVoices().then((t=>{let e=!1;const i=t.map((t=>t.lang.toLowerCase()));for(const t of s)if(i.indexOf(t)>=0){e=!0;break}return e}))}function _e(t,e,s,r){const o=ke.fromMessage(s,t,{messagePayload:{type:i.MessageType.Form,forms:[e]}},r);return o.onActionClick=r.onMessageActionClicked,o}const ze=/<br\s*\/?>/g,Me=t=>t.replace(ze,"\n");const Ce=[{match:/<([a-z])/gi,replace:(t,e)=>`&#x3c;${e}`},{match:/<\/([a-z])/gi,replace:(t,e)=>`&#x3c;&#47;${e}`}];function Se(t,e){for(let s=0;s<t.childElementCount;s++){const i=t.children[s];if("a"===i.tagName.toLowerCase()){const t=i;t.rel="noreferrer noopener",e.onclick&&(t.onclick=e.onclick.bind(t)),e.target&&(t.target=e.target)}i.hasChildNodes()&&Se(i,e)}}function $e(t){for(let e=0;e<t.childElementCount;e++){const s=t.children[e];"a"===s.tagName.toLowerCase()&&(s.onclick=t=>(window.open(s.href,"","height=450px,width=800px,menubar,toolbar,personalbar,status,resizable,noopener,noreferrer"),t.preventDefault(),t.stopPropagation(),!1)),s.hasChildNodes()&&$e(s)}}const Te=(()=>{let t=!1;return(e={hasRecognition:!1,hasSynthesis:!1,isReset:!1,recognitionLocale:"",synthesisLocales:[]})=>{var s;e.isReset&&(t=!1);let i=e.synthesisLocales;return Array.isArray(i)||(i=[]),e.hasRecognition&&e.hasSynthesis&&(null===(s=e.recognitionLocale)||void 0===s?void 0:s.length)&&(!t&&e.synthesisLocales.length||(t=!0,i=[{lang:e.recognitionLocale}])),i}})();function Ae(t,e){const s=t.toLowerCase();for(const t in e)if(s===t.toLowerCase())return!0;return!1}function Oe(t,e){const s=t.toLowerCase().split("-")[0];for(const t in e)if(s===t.toLowerCase())return!0;return!1}function Ie(t,e){let s=[t.toLowerCase()],i="en";s=s.concat(o()),s.indexOf(i)<0&&s.push(i);for(const t of s){if(Ae(t,e)){i=t;break}if(Oe(t,e)){i=t.split("-")[0];break}}return i}function Ee(t,e){let s;return function(){const i=this,r=arguments;clearTimeout(s),s=setTimeout((function(){s=null,t.apply(i,r)}),e)}}function Le(t,e){let s=!1;return function(){const i=this;s||(t.apply(i,arguments),s=!0,setTimeout((()=>{s=!1}),e))}}function Pe(t,e=!1){let s=t.title?`${t.title} - `:"";return(0,i.isFormEntityWithFields)(t)?t.fields.forEach((t=>{s+=t.value?`${t.value} - `:""})):t.formRows.forEach((t=>{t.columns.forEach((t=>{t.fields.forEach((t=>{(0,i.isReadOnlyField)(t)&&(s+=t.value?`${t.value} - `:"")}))}))})),e?Ve(s):s}function je(t,e){if(t){const s=["headerBackground","visualizer","ratingStarFill"],i=["botText","userText"],r=Object.assign({},t);s.forEach((e=>{r[e]=t[e]||t.branding})),i.forEach((e=>{r[e]=t[e]||t.text})),Object.keys(r).forEach((t=>{const s=r[t];if(s)if("shareMenuText"===t)e.updateCSSVar("--color-popup-button-text",s);else{const i=`--color-${t.replace(/([A-Z&])/g,"-$1").toLowerCase()}`;e.updateCSSVar(i,s)}}))}}function He(t){const e={};return t&&Object.keys(t).forEach((s=>{var i;e[s]=null===(i=document.getElementById(t[s]))||void 0===i?void 0:i.value})),e}function Ve(t){return t.length?t.slice(0,t.length-3):t}function Fe(t,e){for(const[s,i]of Object.entries(e))t.setAttribute(s,i)}const Ne="aria-expanded",Re="aria-activedescendant",De="expand",Ue=!0;class Be{get cssPrefix(){return this.ei}constructor(t){this.si={},this.ii=[],this.ei=t.name}addCSSClass(t,...e){t.classList?e.forEach((e=>t.classList.add(`${this.ei}-${e}`))):t.setAttribute("class",e.reduce(((t,e)=>`${t} ${this.ei}-${e}`),""))}createAnchor(t,e,s=[],i=!1,r){const o=this.createElement("a",s,Ue);o.rel="noreferrer noopener";let n=!1;return o.href=t,o.innerText=e,r&&(r.onclick&&(o.onclick=r.onclick.bind(o),n=!0),r.target&&(o.target=r.target,n=!0)),n||(i?o.addEventListener("click",(e=>(window.open(t,"","height=450px,width=800px,menubar,toolbar,personalbar,status,resizable,noopener,noreferrer"),e.preventDefault(),e.stopPropagation(),!1))):o.target="_blank"),o}createButton(t=[]){const e="button",s=this.createElement(e,[...t,"flex"],Ue);return s.type=e,s}createDiv(t=[]){return this.createElement("div",t)}createElement(t,e=[],s=!1){const i=document.createElement(t);return this.ri(i,e),s&&(i.dir="auto"),i}createElementFromString(t,e=[]){const s=this.createDiv();s.innerHTML=t.trim();const i=s.firstElementChild;return e&&this.ri(s.firstElementChild,e),i}createIconButton({css:t,icon:e,title:s,iconCss:i}){const r=this.createButton(["icon",...t]);r.innerHTML="",r.title=s;const o=this.createImageIcon({icon:e,iconCss:i});return r.appendChild(o),r}createImage(t,e=[],s=""){const i=this.createElement("img",e);return t&&(i.src=t),i.alt=s,i.setAttribute("draggable","false"),i}createImageIcon({icon:t,iconCss:e}){if((t=>{const e=t.match(/<svg\s/gi);return e&&e.length>0})(t)){const s=this.createElementFromString(t,e);return s.setAttribute("role","presentation"),s.setAttribute("focusable","false"),s}return this.createImage(t,e)}createInputElement(t,e=[]){const s=this.createElement("input",e,!0);return this.setAttributes(s,t),s}createLabel(t=[]){return this.createElement("label",t,Ue)}createTextDiv(t=[]){return this.createElement("div",t,Ue)}createTextSpan(t=[]){return this.createElement("span",t,Ue)}setAttributes(t,e){const s=["valueOn","valueOff"];Object.keys(e).forEach((i=>{const r=e[i];r&&("errorMsg"===i?t.setAttribute("data-error",r):s.includes(i)?t.setAttribute(i,r):t[i]=r)}))}createListItem(t,e,s,i,r,o,n=!1,a=!0){const c=this.createElement("li",[r,n&&"with-sub-menu"],!0);if(c.id=t,c.tabIndex=-1,c.setAttribute("role","menuitem"),s&&c.setAttribute("data-value",s),i){const t=this.createImageIcon({icon:i,iconCss:["icon",`${r}-icon`]});c.appendChild(t)}const h=this.createTextSpan(["text",`${r}-text`,a?"ellipsis":""]);return h.innerText=e,c.appendChild(h),o&&Ze(c,"click",o),c}createMedia(t,e,s=[]){const i=this.createElement(t,s,!0);return e&&(i.src=e),i.autoplay=!1,i}getBanner(t,e){const s=this.createDiv(["dialog-wrapper"]),i="prompt-banner",r=this.createDiv([`${i}-background`]),o=this.createDiv([`${i}-main-content`,"flex"]),n=this.createDiv([`${i}-content`]),a=this.createDiv([i]);if(t.icon){const e=this.createImageIcon({icon:t.icon}),s=this.createDiv([`${i}-icon`]);We(s,e),We(o,s)}const c=this.createTextDiv([`${i}-text`]);if(c.innerText=t.text,c.setAttribute("role","alert"),We(n,c),t.description){const e=this.createTextDiv([`${i}-description`]);e.innerText=t.description,We(n,e)}We(o,n),We(a,o);const h=t.closeIcon||g,l=`${i}-close-button`,p=this.createIconButton({css:[l,"flex"],icon:h,title:t.closeText,iconCss:[`${l}-icon`]}),u=`${i}-out`;Ze(p,"click",(()=>{this.addCSSClass(a,u),setTimeout((()=>{this.removeCSSClass(a,u),s.remove()}),200)})),t.autoClose&&setTimeout((()=>{p&&p.click()}),6e3);const d=t.actions;if(d&&d.length){const t=this.createDiv(["action-wrapper","flex"]);d.forEach((s=>{const i=["popup-action"];"filled"===s.type&&i.push("filled");const r=this.createButton(i);r.innerHTML=s.label,r.onclick=s.handler.bind(e),t.appendChild(r)})),a.appendChild(t)}return We(a,p),We(s,r),We(s,a),s}getMenu(t){const e=this.createElement("ul",["popup",...t.menuClassList]);e.id=t.menuId,e.tabIndex=-1,e.setAttribute("role","menu"),e.setAttribute("aria-labelledby",t.buttonId);const s=t.menuItems;if(s.forEach((t=>e.appendChild(t))),t.defaultValue){const s=e.querySelector(`[data-value="${t.defaultValue}"]`);this.addCSSClass(s,"active")}return Ze(e,"click",(()=>this.oi(e,t.menuButton))),Ze(e,"keydown",(i=>{let r=!1;if(!(i.ctrlKey||i.altKey||i.metaKey)){if(i.shiftKey&&i.code===a.KeyCode.Tab)this.oi(t.menuButton,e);else switch(i.code){case a.KeyCode.Return:case a.KeyCode.Space:i.target.click(),r=!0;break;case a.KeyCode.Esc:case a.KeyCode.Tab:this.oi(t.menuButton,e),i.code===a.KeyCode.Esc&&(t.menuButton.focus(),r=!0);break;case a.KeyCode.Up:this.ni(e),r=!0;break;case a.KeyCode.Down:this.ai(e),r=!0;break;case a.KeyCode.Home:case a.KeyCode.PageUp:this.ci(e,s),r=!0;break;case a.KeyCode.End:case a.KeyCode.PageDown:this.li(e,s),r=!0}r&&(i.stopPropagation(),i.preventDefault())}})),e}getMenuButton(t){const e=t.button,s=t.menu,i=s.querySelectorAll("li"),r=e.classList.contains(`${this.ei}-with-sub-menu`),o=t.widget;return e.setAttribute("role","button"),e.setAttribute("aria-haspopup","true"),e.setAttribute(Ne,"false"),e.setAttribute("aria-controls",t.menuId),Ze(e,"click",(()=>{const s=document.getElementById(t.menuId);"true"===e.getAttribute(Ne)?this.oi(e,s):this.pi(e,s,o,r)})),Ze(e,"keydown",(t=>{let n=!1;switch(t.code){case a.KeyCode.Return:case a.KeyCode.Down:case a.KeyCode.Space:this.pi(e,s,o,r),this.ci(s,i),n=!0;break;case a.KeyCode.Up:this.pi(e,s,o,r),this.li(s,i),n=!0}n&&(t.stopPropagation(),t.preventDefault())})),e}wrapMessageBlock(t,e,s=zt.LEFT){const i="message",r=this.createDiv([`${i}-block`,"flex",s]),o=this.createDiv([`${i}s-wrapper`]),n=this.createDiv([`${i}-list`,"flex","col"]);if(e){const t=this.createImageIcon({icon:e,iconCss:["message-icon"]}),s=this.createDiv(["icon-wrapper"]);s.appendChild(t),r.appendChild(s)}return n.appendChild(t),o.appendChild(n),r.appendChild(o),r}getMessageBlock(t,e,s,i=!1){const r="message",o=this.createDiv([r]),n=this.createDiv([`${r}-wrapper`]),a=this.createDiv([`${r}-bubble`,i&&"error"]);return a.appendChild(e),n.appendChild(a),o.appendChild(n),this.wrapMessageBlock(o,s,t)}removeCSSClass(t,...e){var s,i;if(t.classList)e.forEach((e=>t.classList.remove(`${this.ei}-${e}`)));else{const e="class",r=null!==(i=null===(s=t.getAttribute(e))||void 0===s?void 0:s.split(" "))&&void 0!==i?i:[];if(r.length){const s=r.filter((t=>r.indexOf(`${this.ei}-${t}`)<0)).join(" ");t.setAttribute(e,s)}}}setChatWidgetWrapper(t){this.ui=t;for(const[t,e]of Object.entries(this.si))this.updateCSSVar(t,e)}updateCSSVar(t,e){this.si[t]=e,this.ui&&this.ui.style.setProperty(t,e)}ri(t,e=[]){return e&&this.addCSSClass(t,...e),t}oi(t,e){t.getAttribute(Ne)&&(this.removeCSSClass(e,De),t.setAttribute(Ne,"false"))}ci(t,e){this.di(e[0],t)}li(t,e){this.di(e[e.length-1],t)}ni(t){const e=t.getAttribute(Re),s=t.querySelector(`#${e}`);this.di(s.previousSibling||t.lastChild,t)}ai(t){const e=t.getAttribute(Re),s=t.querySelector(`#${e}`);this.di(s.nextSibling||t.firstChild,t)}di(t,e){t.focus(),e.setAttribute(Re,t.id)}pi(t,e,s,i=!1){if("false"===t.getAttribute(Ne)){this.addCSSClass(e,De),t.setAttribute(Ne,"true");const r=s.getBoundingClientRect(),o=t.getBoundingClientRect(),n="rtl"===window.getComputedStyle(e).direction;if(i){const i=48;e.style.top=`${t.offsetTop+t.offsetHeight+60}px`,n?e.style.left=`${i}px`:e.style.right=`${i}px`,e.style.maxWidth=s.offsetWidth-i+"px"}else{let t=r.right-o.right;n?(t=o.left-r.left,e.style.left=`${t}px`):e.style.right=`${t}px`,e.style.maxWidth=s.offsetWidth-t+"px"}setTimeout((()=>{const s=document.querySelectorAll(`.${this.ei}-with-sub-menu`);document.addEventListener("click",(i=>{let r=!1;s.forEach((t=>{t.contains(i.target)&&(r=!0)})),r?this.ii.push({menu:e,menuButton:t}):(this.ii.length&&(this.ii.forEach((t=>{this.oi(t.menuButton,t.menu)})),this.ii=[]),this.oi(t,e))}),{once:!0})}))}}}function We(t,e){t.appendChild(e)}function Ze(t,e,s,i){t.addEventListener(e,s,i)}class qe{remove(){this.element.remove()}appendToElement(t){t.appendChild(this.element)}prependToElement(t){const e=t.firstChild;e?t.insertBefore(this.element,e):t.appendChild(this.element)}appendContentChildElement(t){this.mi().appendChild(t)}appendContentChild(t){this.mi().appendChild(t.element)}mi(){return this.element}}const Ge={SESSION:"sessionStorage",LOCAL:"localStorage"},Ye={CLASSIC:"classic",DEFAULT:"default",REDWOOD_DARK:"redwood-dark"},Je={AUDIO:"audio",FILE:"file",LOCATION:"location",VISUAL:"visual"},Ke="aria",Xe=`${Ke}-expanded`,Qe=`${Ke}-selected`,ts=`${Ke}-activedescendant`,es="autocomplete-active";class ss{constructor(t,e,s){this.gi=t,this.os=s,this.fi=-1,this.bi=this.vi(e),Fe(t,{"aria-autocomplete":"list","aria-controls":e,[Xe]:"false",autocomplete:"off",role:"combobox"})}display(t,e){this.wi(),this.te=t.map(((s,i)=>{const r=this.xi(i,t.length);return this.ki(r,s,e),r.onclick=()=>{this.gi.value=s,this.hide()},this.bi.appendChild(r),r})),this.gi.setAttribute(Xe,"true")}hide(){this.gi.setAttribute(Xe,"false"),this.gi.removeAttribute(ts),this.wi()}isOpen(){return"true"===this.gi.getAttribute(Xe)}handleKeyboardEvent(t){let e=!1;if(t.ctrlKey)return e;const s=this.te.length;switch(t.code){case a.KeyCode.Return:case a.KeyCode.Space:case a.KeyCode.Tab:this.yi&&rs(this.gi,this.yi.textContent),this.hide();break;case a.KeyCode.Down:this.fi=(this.fi+1)%s,e=!0;break;case a.KeyCode.Up:this.fi=this.fi<0?s-1:(this.fi-1+s)%s,e=!0;break;case a.KeyCode.Esc:this.hide(),this.gi.focus()}return e&&(t.stopPropagation(),t.preventDefault(),this._i(this.te[this.fi])),e}getListbox(){return this.bi}vi(t){const e=this.os.createElement("ul",["autocomplete-items"]);return e.id=t,Fe(e,{"aria-labelledby":`${this.gi.id}-label`,"aria-live":"polite",role:"listbox"}),Ze(e,"keydown",(t=>{this.gi.dispatchEvent(new KeyboardEvent(t.type,t))})),e}xi(t,e){const s=this.os.createElement("li",["autocomplete-item"]);return s.id=`${this.bi.id}item-${t+1}`,s.tabIndex=-1,Fe(s,{"aria-posinset":(t+1).toString(),"aria-setsize":e.toString(),[Qe]:"false",role:"option"}),s}ki(t,e,s){const i=e.toLowerCase().indexOf(s),r=this.os.createTextSpan();if(r.setAttribute("aria-hidden","true"),i>=0){const t=is(e.substring(0,i)),o=this.os.createElement("strong",[],!0);o.textContent=e.substring(i,i+s.length);const n=is(e.substring(i+s.length));r.append(t,o,n)}else r.textContent=e;t.append(r),t.setAttribute("aria-label",e)}_i(t){const e=this.yi;e&&(this.os.removeCSSClass(e,es),e.setAttribute(Qe,"false")),t&&(t.scrollIntoView(!1),t.setAttribute(Qe,"true"),this.os.addCSSClass(t,es),this.yi=t,this.gi.setAttribute(ts,t.id))}wi(){const t=this.bi;for(;t.firstChild;)t.removeChild(t.lastChild);this.te=[],this.yi=null,this.fi=-1}}const is=t=>document.createTextNode(t),rs=(t,e)=>{t.value=e,t.setSelectionRange(e.length,e.length)},os={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",ENTER:"Enter"},ns="keyboard",as="voice",cs={AUDIO:".aac, .amr, .m4a, .mp3, .mp4a, .mpga, .oga, .ogg, .wav, audio/*",FILE:".7z, .csv, .doc, .docx, .eml, .ics, .key, .log, .msg, .neon, .numbers, .odt, .pages, .pdf, .pps, .ppsx, .ppt, .pptx, .rtf, .txt, .vcf, .xls, .xlsx, .xml, .yml, .yaml, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document",IMAGE:".gif, .jfif, .jpeg, .jpg, .png, .svg, .tif, .tiff, .webp, image/*",VIDEO:".3g2, .3gp, .avi, .m4v, .mov, .mp4, .mpeg, .mpg, .ogv, .qt, .webm, .wmv, video/*",ALL:""};cs.ALL=`${cs.AUDIO},${cs.FILE},${cs.IMAGE},${cs.VIDEO}`;const hs=window.setTimeout;class ls extends qe{constructor(t,e,s,i,o,n,c,h,l,p,u){super(),this.os=t,this.zi=e,this.Mi=s,this.Fe=i,this.Ci=o,this.Si=n,this.$i=c,this.Ti=h,this.Ai=l,this.Oi=p,this.Ii=u,this.mode=void 0,this.Ei=Ot,this.Li=[],this.Pi=!1,this.ji=!1,this.Hi=!1,this.Vi=!0,this.Fi=Le((t=>{this.Ai.trigger(r.TYPING,t)}),1e3),this.Ni=Le((t=>{this.Ti("RESPONDING",this.Fe.enableAgentSneakPreview?t:"...")}),this.Fe.typingStatusInterval*It),this.ei=i.name,this.Ri=i.i18n,this.Di=i.icons,this.Ui=this.Ri[i.locale],this.Vi=!(0,a.isMobile)(),this.Bi=`${this.ei}-share-button`}render(){if(this.element=this.Wi(),this.Fe.enableSpeech){const t=this.Zi();this.element.appendChild(t)}const t=this.qi();this.element.appendChild(t),this.setInputMode(ns),this.disable(),window.addEventListener("resize",Ee((()=>{this.Gi()}),100))}setInputMode(t){t!==this.mode&&(this.Fe.enableSpeech?(this.mode=t,this.mode===ns?this.Yi():this.Ji()):(this.mode=ns,this.Yi()))}setUserInputText(t){this.Ki&&(this.Ki.value=t,this.Ki.setSelectionRange(t.length,t.length),this.focusTextArea(),this.Xi())}getUserInputText(){return this.Ki.value}setUserInputPlaceholder(t){this.Ki&&(this.mode===ns?this.Qi(t):this.tr=t)}setRecognitionRequested(t){this.Hi=t}setVoiceRecording(t){this.Fe.enableSpeech&&(t&&this.Hi?this.setInputMode(as):t||this.setInputMode(ns))}updateVisualizer(t,e){this.mode===as&&(0,a.drawVisualizer)(t,this.er,e)}focusTextArea(){this.Vi&&this.Ki.focus(),this.Ki.scrollTop=this.Ki.scrollHeight}disable(t=!0){const e=this.os,s="disabled";this.sr.disabled=t,this.Fe.enableAttachment&&(this.ir.disabled=t),t?(e.addCSSClass(this.Ki,s),this.Fe.enableAutocomplete&&(this.rr(),this.nr())):e.removeCSSClass(this.Ki,s),this.Fe.enableSpeech&&(this.setInputMode(ns),this.disableVoiceModeButton(t,{src:"network"})),this.cr=t}isDisabled(){return this.cr}disableVoiceModeButton(t,{src:e}){if(this.Fe.enableSpeech){switch(e){case"lang":this.Pi=t;break;case"network":this.ji=t}this.Fe.multiLangChat&&(this.Pi||this.ji)?this.hr.disabled=!0:this.hr.disabled=this.ji}}displaySuggestions(t){if(this.lr=t,this.pr=t.length>0,!this.pr||!this.Ki.value)return void this.nr();const e=this.Ki.value.trim().toLowerCase();this.ur.display(t.slice(0,Math.min(t.length,$t.MAX_SUGGESTIONS_COUNT)),e)}getSuggestions(){return this.lr}getSuggestionsValid(){return this.pr}setLocale(t){this.Ui=t,this.ir&&(us(this.ir,t.upload),this.dr.querySelectorAll("li").forEach((t=>{const e=t.dataset.value,s=this.Ui[`share${e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()}`]||this.Ui[e]||t;t.querySelector("span").innerText=s}))),this.setUserInputPlaceholder(t.inputPlaceholder),this.sr&&us(this.sr,t.send),this.hr&&us(this.hr,t.speak),this.mr&&us(this.mr,t.inputPlaceholder)}Wi(){return this.os.createDiv(["footer"])}Yi(){var t;const e=this.os;e.removeCSSClass(this.element,"mode-voice"),e.addCSSClass(this.element,"mode-keyboard"),this.Qi(this.tr),this.Ki.disabled=!1,this.Xi(),this.Fe.enableAutocomplete&&(null===(t=this.Ki.value)||void 0===t?void 0:t.trim().length)>=3&&this.gr()}Ji(){const t=this.os;t.removeCSSClass(this.element,"mode-keyboard"),t.addCSSClass(this.element,"mode-voice"),this.tr=this.Ki.placeholder,this.Qi(this.Ui.recognitionTextPlaceholder),this.Ki.disabled=!0,this.Xi(),this.nr()}qi(){const t=this.os,e=t.createDiv(["footer-mode-keyboard","flex"]);this.br(e);const s=t.createDiv(["footer-actions","flex"]),i=this.vr();if(this.sr=i,this.Ii("send",i),s.appendChild(i),this.Fe.enableSpeech&&(this.hr=this.wr(),s.appendChild(this.hr),this.mr=this.kr(),s.appendChild(this.mr)),this.Fe.enableAttachment){const t=this.yr();s.appendChild(t)}return e.appendChild(s),e}yr(){const t=this.os,e=t.createDiv(),s=ps(this.os,{css:["button-upload","flex"],customIcon:this.Di.shareMenu,defaultIcon:c,title:this.Ui.upload});s.id=this.Bi;const i=t.createElement("input",["none"]);i.type="file",i.tabIndex=-1,i.setAttribute("aria-hidden","true"),this._r=i,this.dr=this.zr(s);const r=t.getMenuButton({button:s,menuId:this.dr.id,menu:this.dr,widget:this.Oi.chatWidgetDiv});return Ze(r,"click",(()=>{this.nr()})),this.ir=r,this.Ii("shareMenu",r),document.addEventListener("deviceready",(()=>{const t=globalThis?globalThis.device:window?window.device:void 0;"Android"===(null==t?void 0:t.platform)&&this._r.removeAttribute("accept")}),!1),Ze(i,"click",(()=>i.value=null)),Ze(i,"change",(t=>{const e=t.target;e.files&&e.files.length&&this.Mr(e.files[0])})),e.appendChild(this.ir),e.appendChild(this.dr),e.appendChild(i),e}zr(t){return this.os.getMenu({menuId:`${this.Fe.name}-share-menu`,menuClassList:["share-popup-list"],buttonId:this.Bi,menuItems:this.Cr(),menuButton:t})}Cr(){const t=this.os,e=this.Di,s=this.Ui,i=this._r,r=`${this.ei}-share-`;let o=this.Fe.shareMenuItems;const n=[],a=[Je.AUDIO,Je.FILE,Je.LOCATION,Je.VISUAL],c=new Set;if((null==o?void 0:o.length)&&!o.every((t=>"string"==typeof t&&a.indexOf(t.toLowerCase())<0))||(o=a),o.forEach((t=>{"string"==typeof t&&c.add(t.toLowerCase())})),c.has(Je.VISUAL)){const o=`${r}visual`,a=e.shareMenuVisual||E,c=t.createListItem(o,s.shareVisual,"visual",a,"share-popup-item",(()=>{i.accept=`${cs.IMAGE},${cs.VIDEO}`,i.click()}));n.push(c),this.Ii("shareMenuVisual",c)}if(c.has(Je.AUDIO)){const o=`${r}audio`,a=e.shareMenuAudio||A,c=t.createListItem(o,s.shareAudio,"audio",a,"share-popup-item",(()=>{i.accept=cs.AUDIO,i.click()}));n.push(c),this.Ii("shareMenuAudio",c)}if(c.has(Je.FILE)){const o=`${r}file`,a=e.shareMenuFile||O,c=t.createListItem(o,s.shareFile,"file",a,"share-popup-item",(()=>{i.accept=cs.FILE,i.click()}));n.push(c),this.Ii("shareMenuFile",c)}if(c.has(Je.LOCATION)){const i=`${r}location`,o=e.shareMenuLocation||I,a=t.createListItem(i,s.shareLocation,"location",o,"share-popup-item",(()=>this.$i()));n.push(a),this.Ii("shareMenuLocation",a)}const h=e.shareMenuFile||O;return this.Fe.shareMenuItems.filter((t=>"string"!=typeof t&&"string"==typeof t.type)).forEach((e=>{const r=e.type.toLowerCase(),o=`share_${r.indexOf("*")>=0?"all":r.replace(/ /g,"_")}`,a=`${this.ei}-${o}`,c=s[o]||this.Ri.en[o];let l=e.label;c?l=c:this.Ri.en[o]=l;const p=e.icon||h,u=e.maxSize&&e.maxSize>=1?Math.min(e.maxSize*At,Ot):Ot;let d="";"wcfs_*"!==r&&(d=r.indexOf("*")>=0&&"wcfs_*"!==r?cs.ALL:r.split(" ").map((t=>`.${t} `)).join(",")),n.push(t.createListItem(a,l,o,p,"share-popup-item",(()=>{this.Ei=u,i.accept=d,i.click()})))})),n}br(t){const e=this.os;this.Ki=this.Sr();const s=e.createLabel(["hidden"]);s.id=`${this.Ki.id}-label`,s.htmlFor=this.Ki.id,this.$r=s,this.Qi(this.tr),t.append(s,this.Ki),this.Fe.enableAutocomplete&&(this.ur=new ss(this.Ki,`${this.ei}-suggestions-list`,this.os),t.append(this.ur.getListbox()))}Sr(){const t=["user-input"];this.Fe.enableSpeech&&t.push("user-input-inline-send");const e=this.os.createElement("textarea",t,!0);return e.setAttribute("enterkeyhint","send"),e.id=`${this.ei}-user-text-input`,this.tr=this.Ui.inputPlaceholder,e.rows=1,e.onkeydown=this.Tr.bind(this),e.onkeyup=this.Ar.bind(this),e.oninput=()=>{const t=e.value;this.Oi.speechFinalResult=this.Oi.speechFinalResult||{speechId:"",text:""},this.Oi.speechFinalResult.text=t,this.Gi()},Ze(e,"paste",(()=>{this.cr||hs(this.Xi.bind(this))})),this.Or(e),this.Ii("input",e),e}Qi(t){this.Ki.placeholder=t,this.$r.innerText=t}Or(t){const e=Object.getOwnPropertyDescriptor(HTMLTextAreaElement.prototype,"value");Object.defineProperty(t,"value",{set:s=>{e.set.call(t,s),this.Xi(),this.Gi()},get:e.get})}vr(){const t=ps(this.os,{css:["button-send"],customIcon:this.Di.send,defaultIcon:T,title:this.Ui.send});return t.onclick=()=>{var t;this.Ir()||(this.Er=void 0,this.Ki.value=null===(t=this.Ki)||void 0===t?void 0:t.value.trim(),this.Fe.enableAutocomplete&&(this.rr(),this.nr()),this.Lr())},t}wr(){const t=ps(this.os,{css:["button-switch-voice"],customIcon:this.Di.mic,defaultIcon:C,title:this.Ui.speak});return t.onclick=()=>{this.Si(!0),this.Hi=!0},this.Ii("mic",t),t}Zi(){const t=this.os,e=t.createDiv(["footer-mode-voice","flex"]),s=t.createDiv(["footer-visualizer-wrapper"]);return this.er=t.createElement("canvas"),this.er.width=244,this.er.height=32,s.appendChild(this.er),e.appendChild(s),e}kr(){const t=ps(this.os,{css:["button-switch-kbd"],customIcon:this.Di.keyboard,defaultIcon:y,title:this.Ui.inputPlaceholder});return t.onclick=()=>{this.Hi=!1,this.Si(!1)},this.Ii("keyboard",t),t}Xi(){const t=this.sr;if(t&&t.nodeType){const e=this.os,s="none",i=this.Ki;i&&i.value&&i.value.trim().length&&this.mode!==as?e.removeCSSClass(t,s):e.addCSSClass(t,s)}}Ir(){return!this.Ki||0===this.Ki.value.trim().length}Tr(t){var e;this.isDisabled()||this.Fe.enableAutocomplete&&this.ur.isOpen()&&this.ur.handleKeyboardEvent(t)||t.key===a.KeyCode.Return&&!t.shiftKey&&(null===(e=this.Ki.value)||void 0===e?void 0:e.trim().length)>0&&(t.preventDefault(),this.sr.click())}Ar(t){var e;if(this.Xi(),this.isDisabled())return this.rr(),void this.nr();if(t.isComposing)return;const s=null===(e=this.Ki.value)||void 0===e?void 0:e.trim();this.Fi(!0),this.Fe.enableSendTypingStatus&&(s?this.Ni(s):this.Ti("LISTENING")),clearTimeout(this.Pr),this.Pr=hs((()=>{this.Fi(!1),this.Fe.enableSendTypingStatus&&this.Ti("LISTENING")}),this.Fe.typingStatusInterval*It),this.Fe.enableAutocomplete&&(t.code===a.KeyCode.Backspace&&(this.Er=void 0,this.rr(),this.nr(),clearTimeout(this.jr)),this.Hr().indexOf(t.code)<0&&(s.length>=3?this.Er!==s&&(this.Er=s,clearTimeout(this.jr),this.gr()):(this.Er=void 0,this.nr(),clearTimeout(this.jr))))}Gi(){this.Ki.style.height=null;const t=.6*this.Oi.chatWidgetDiv.clientHeight,e=this.Ki.scrollHeight;this.Ki.style.height=`${e<t?e:t}px`}Lr(){this.zi(this.Ki.value),this.Ki.value="",this.Ki.innerText="",hs(this.Gi.bind(this))}Mr(t){const e=this.Ei;this.Ei=Ot,this.Mi(t,{maxSize:e}),this._r.value=""}Vr(){this.Ci(this.Ki.value.trim()).catch((()=>{}))}nr(){this.ur&&this.ur.isOpen()&&this.ur.hide()}gr(){this.jr=hs((()=>{this.Vr()}),300)}rr(){this.lr=null,this.pr=!1}Hr(){if(!this.Li.length)for(const t of Object.keys(os))this.Li.push(os[t]);return this.Li}}function ps(t,{css:e,customIcon:s,defaultIcon:i,title:r}){const o=s||i;return t.createIconButton({css:["footer-button","flex"].concat(e),icon:o,iconCss:[],title:r})}function us(t,e){t.title=e}const ds="end-conversation",ms="collapse",gs="clear",fs="tts",bs="none";class vs extends qe{constructor(t,e,s,i,r,o,n,a,c){super(),this.Fe=t,this.os=e,this.tt=s,this.Fr=i,this.Nr=r,this.Rr=o,this.Dr=n,this.Ii=a,this.Oi=c,this.Bs=new kt("ChatHeaderComponent"),this.Ur=[],this.Br=[],this.ei=t.name,this.Ri=this.Fe.i18n}render(){this.element=this.Wi(),this.Fe.showConnectionStatus&&this.Rr.on(i.CoreEvent.State,(t=>this.Wr(t))),this.disable()}addLanguageSelect(t){const e=!(!this.Br||!this.Br.length);this.Zr=t.render(e),this.Ii("language",this.Zr),this.Zr&&(e?this.qr.appendChild(this.Zr):this.Gr.prepend(this.Zr))}closeWidgetPopup(){this.tt()}clearHistory(){this.Fr()}showTTSButton(t){const e=this.Yr(fs);e&&(e.style.display=t?"flex":bs)}disableTTSButton(t){const e=this.Yr(fs);if(e){const s=this.os;if("LI"===e.tagName){const i="disable";t?s.addCSSClass(e,i):s.removeCSSClass(e,i)}else e.disabled=t}}setLocale(t){var e;const s=this.os,i=this.Zr;this.Jr=t;const r=t.chatTitle;r&&(this.Ke.innerText=r);const o=t.chatSubtitle;o?(this.Kr.innerText=o,s.removeCSSClass(this.Kr,bs),s.addCSSClass(this.Xr,bs)):this.Fe.showConnectionStatus?(this.Wr(this.Qr),s.removeCSSClass(this.Xr,bs),s.addCSSClass(this.Kr,bs)):(s.addCSSClass(this.Kr,bs),s.addCSSClass(this.Xr,bs)),this.eo&&ws(this.eo,t.showOptions),null===(e=this.Ur)||void 0===e||e.forEach((e=>{ws(e.element,t[e.title])})),i&&ws(i.querySelector("button")||i,t.languageSelectDropdown)}disable(t=!0){if(this.Fe.enableEndConversation)for(const e of this.Ur)e.name===ds&&(e.element.disabled=t)}addAction(t){this.Ur.push(t)}Wi(){var t;const e=this.os,s=this.Fe,i=s.icons,r=e.createDiv(["header","flex"]),o=e.createDiv(["header-info-wrapper"]),n=e.createDiv(["header-actions","flex"]),a=s.locale,c=this.Ri[a],h=c.chatTitle,l=c.chatSubtitle;if(!("logo"in i)||i.logo){const t=e.createImageIcon({icon:i.logo||M,iconCss:["logo"]});r.appendChild(t)}if(h){const t=e.createTextDiv(["title"]);t.id=`${s.name}-title`,t.innerText=h,o.appendChild(t),this.Ke=t}this.Kr=e.createTextDiv(["subtitle",bs]),o.appendChild(this.Kr),this.Xr=e.createTextDiv(["connection-status",bs]),o.appendChild(this.Xr),l?(this.Kr.innerText=l,e.removeCSSClass(this.Kr,bs)):s.showConnectionStatus&&(this.Wr(this.Rr.getState()),e.removeCSSClass(this.Xr,bs)),r.appendChild(o);const p=e.createDiv(["header-gap"]);if(r.appendChild(p),s.customHeaderElementId){const t=document.getElementById(s.customHeaderElementId);if(t){const s=e.createDiv(["header-custom-element"]);s.appendChild(t),r.appendChild(s)}else this.Bs.error(`Could not find element with ID '${s.customHeaderElementId}'. No custom element added to the chat header.`)}if(this.Gr=n,s.enableEndConversation){const t=i.close||g;this.Ur.push({name:ds,title:"endConversation",icon:t,clickHandler:this.Dr.bind(this),order:10})}if(!s.embedded){const t=i.collapse||f;this.Ur.push({name:ms,title:"close",icon:t,clickHandler:this.closeWidgetPopup.bind(this),order:20})}if(s.enableBotAudioResponse&&(this.so=!s.initBotAudioMuted,this.Ur.push({name:fs,title:this.so?"audioResponseOn":"audioResponseOff",icon:this.so?i.ttsOn||j:i.ttsOff||P,clickHandler:()=>{this.so=!this.so,this.io(),this.Nr(this.so)},order:30})),s.enableClearMessage){const t=i.clearHistory||m;this.Ur.push({name:gs,title:"clear",icon:t,clickHandler:this.clearHistory.bind(this),order:40})}return this.Ur.sort(((t,e)=>t.order>e.order?1:-1)),null===(t=this.Ur)||void 0===t||t.forEach(((t,s)=>{const i=this.Fe.multiLangChat?this.Ur.length+1:this.Ur.length;if(!this.Fe.enableHeaderActionCollapse||s<2&&!(i>2&&1===s)){const s=e.createIconButton({css:["header-button"],icon:t.icon,iconCss:[],title:c[t.title]});s.onclick=t.clickHandler,this.ro(t,s),t.element=s,this.Gr.prepend(s)}else this.Br.push(t)})),this.Br&&this.Br.length&&this.oo(this.Br),r.appendChild(n),r}ro(t,e){switch(e.id=`${this.ei}-${t.name}`,t.name){case ds:this.Ii("close",e);break;case ms:case fs:this.Ii(t.name,e);break;case gs:this.Ii("clearHistory",e)}}oo(t){const e=this.os,s=this.Jr||this.Ri[this.Fe.locale],i=`${this.Fe.name}-action-menu`,r=`${i}-button`,o=t.map((t=>{const i=e.createListItem(`action-menu-option-${t.name}`,s[t.title],t.name,t.icon,"action-item",t.clickHandler);return this.ro(t,i),t.element=i,i})),n=e.createIconButton({css:["header-button","button-show-options"],icon:'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path d="M4.99935 9.99967C4.99935 10.9201 4.25316 11.6663 3.33268 11.6663C2.41221 11.6663 1.66602 10.9201 1.66602 9.99967C1.66602 9.0792 2.41221 8.33301 3.33268 8.33301C4.25316 8.33301 4.99935 9.0792 4.99935 9.99967Z" fill="#161513"/><path d="M11.666 9.99967C11.666 10.9201 10.9198 11.6663 9.99935 11.6663C9.07887 11.6663 8.33268 10.9201 8.33268 9.99967C8.33268 9.0792 9.07887 8.33301 9.99935 8.33301C10.9198 8.33301 11.666 9.0792 11.666 9.99967Z" fill="#161513"/><path d="M18.3327 9.99967C18.3327 10.9201 17.5865 11.6663 16.666 11.6663C15.7455 11.6663 14.9993 10.9201 14.9993 9.99967C14.9993 9.0792 15.7455 8.33301 16.666 8.33301C17.5865 8.33301 18.3327 9.0792 18.3327 9.99967Z" fill="#161513"/></svg',iconCss:[],title:this.Ri[this.Fe.locale].showOptions}),a=e.getMenu({menuId:i,menuClassList:["action-menu"],menuItems:o,buttonId:r,menuButton:n}),c=e.getMenuButton({button:n,menuId:i,menu:a,widget:this.Oi.chatWidgetDiv});this.Gr.prepend(c),this.Gr.appendChild(a),this.eo=c,this.qr=a}no(t){for(const e of this.Ur)if(e.name===t)return e;return null}Yr(t){var e;return null===(e=this.no(t))||void 0===e?void 0:e.element}io(){const t=this.Fe.icons,e=this.no(fs);e.title=this.so?"audioResponseOn":"audioResponseOff",e.icon=this.so?t.ttsOn||j:t.ttsOff||P,this.ao(fs)}ao(t){const e=this.os,s=this.Jr||this.Ri[this.Fe.locale],i=this.no(t),r=this.Yr(t);if(r){r.innerHTML="";const t=s[i.title],o=i.icon,n="LI"===r.tagName,a=e.createImageIcon({icon:o,iconCss:[n?"icon":"","action-item-icon"]});if(n){r.appendChild(a);const s=e.createTextSpan(["text","action-item-text","ellipsis"]);s.innerText=t,r.appendChild(s)}else r.appendChild(a),r.title=t}}Wr(t){const e=this.os,s="connecting",r="connected",o="disconnected",n=this.Xr;this.Qr=t;const a=this.Jr||this.Ri[this.Fe.locale];switch(t){case i.ConnectionState.Open:n.innerText=a.connected,e.removeCSSClass(n,s,o),e.addCSSClass(n,r);break;case i.ConnectionState.Closed:n.innerText=a.disconnected,e.removeCSSClass(n,s,r),e.addCSSClass(n,o);break;case i.ConnectionState.Closing:n.innerText=a.closing,e.removeCSSClass(n,r,o),e.addCSSClass(n,s);break;case i.ConnectionState.Connecting:n.innerText=a.connecting,e.removeCSSClass(n,r,o),e.addCSSClass(n,s)}}}function ws(t,e){if("LI"===t.tagName){const s=t.querySelector("span");s&&(s.innerText=e)}else t.title=e}class xs extends qe{constructor(t){super(),this.element=t.createDiv(["conversation"])}render(){}}class ks{constructor(t){this.util=t}render(){const t=this.util.createDiv(["spinner"]);return t.innerHTML='<svg viewBox="0 0 64 64"><circle transform="translate(32,32)" r="26"></circle></svg>',t}}class ys{constructor(t,e,s,i){this.$s=t,this.co=e,this.Fe=s,this.os=i}render(){const t=this.os,e=this.Fe.icons,s=t.createDiv(["attachment"]),i=this.co===zt.LEFT?e.avatarBot:e.avatarUser,r=t.createDiv(["attachment-footer","flex"]),o=t.createTextDiv(["attachment-title"]);o.innerText=this.$s,r.appendChild(o);const n=t.createDiv(["attachment-placeholder","flex"]);return n.appendChild(new ks(t).render()),s.appendChild(n),s.appendChild(r),this.ho=t.getMessageBlock(this.co,s,i),this.ho}remove(){this.ho.remove()}}class _s{constructor(t,e,s,i,r,o=!0){this.Ke=t,this.$s=e,this.co=s,this.Fe=i,this.os=r,this.lo=o}render(t){const e=this.os,s=this.Fe.icons,i="message",r=e.createDiv([`${i}-content`]),o=this.co===zt.LEFT?s.avatarBot:s.avatarUser;if(t){e.addCSSClass(r,`${i}-with-icon`);const s=e.createImageIcon({icon:t}),o=e.createDiv([`${i}-icon`]);o.appendChild(s),r.appendChild(o)}const n=e.createDiv([`${i}-text`]),a=e.createTextDiv([`${i}-title`]),c=e.createTextDiv([`${i}-description`]);return a.innerText=this.Ke,c.innerText=this.$s,n.appendChild(a),n.appendChild(c),r.appendChild(n),e.getMessageBlock(this.co,r,o,this.lo)}}class zs{constructor(t,e,s){this.co=t,this.Fe=e,this.os=s,this.ho=this.render(),this.po=!1,this.uo=!0}append(t){this.isVisible()||(t.appendChild(this.ho),this.po=!0,this.do&&clearTimeout(this.do),this.uo&&(this.do=window.setTimeout((()=>{this.remove()}),1e3*this.Fe.typingIndicatorTimeout)))}remove(){this.isVisible()&&(this.ho.remove(),this.po=!1)}isVisible(){return this.po}render(){const t=this.os,e=this.Fe,s=t.createDiv(["typing-cue-wrapper"]),i=e.icons.avatarBot;if(e.icons.typingIndicator){const i=e.icons.typingIndicator,r=t.createImageIcon({icon:i});r.style.height=e.chatBubbleIconHeight||r.style.height,r.style.width=e.chatBubbleIconWidth||r.style.width,s.appendChild(r)}else{const e=t.createDiv(["typing-cue"]);s.appendChild(e)}return s.setAttribute("aria-live","polite"),this.xs=s,this.updateTypingCueLocale(e.i18n[e.locale].typingIndicator),t.getMessageBlock(this.co,s,i)}updateTypingCueLocale(t){this.xs.setAttribute("aria-label",t)}resetTypingCueIcon(){this.ho.remove(),this.ho=this.render()}updateTypingCueIcon(t){t.style.marginTop="0px",this.ho.firstChild.replaceWith(t)}setAutoTimeout(t){this.uo=t}}const Ms=["no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","same-origin","strict-origin","strict-origin-when-cross-origin","unsafe-url"],Cs=["allow-downloads-without-user-activation","allow-downloads","allow-forms","allow-modals","allow-orientation-lock","allow-pointer-lock","allow-popups","allow-popups-to-escape-sandbox","allow-presentation","allow-same-origin","allow-scripts","allow-storage-access-by-user-activation","allow-top-navigation","allow-top-navigation-by-user-activation"],Ss="none",$s="webview-container",Ts=`${$s}-open`,As=`${$s}-close`;class Os{constructor(t,e,s){this.os=e,this.Fe=s,this.mo=.8,this.fo={closeButtonIcon:g,closeButtonType:"icon",errorInfoBar:!0,referrerPolicy:"no-referrer-when-downgrade",sandbox:[],size:"tall"},this.bo=!1,this.vo=!1,this.setProps(t||{}),this.ei=s.name}setProps(t){Array.isArray(t.sandbox)&&t.sandbox.length&&(t.sandbox=t.sandbox.map((t=>t.toLowerCase())).filter((t=>Cs.indexOf(t)>=0)));const e=Object.assign(Object.assign({},this.fo),t);var s;e.closeButtonIcon||(e.closeButtonIcon=this.fo.closeButtonIcon),e.closeButtonType||(e.closeButtonType="icon"),e.size||(e.size="tall"),s=e.referrerPolicy,Ms.indexOf(null==s?void 0:s.toLowerCase())>=0||(e.referrerPolicy="no-referrer-when-downgrade"),"full"===e.size&&(this.mo=1),this.fo=e,this.bo=!1,this.vo=!1}open(t){if(this.wo){const e=this.os,s=100;this.wo.style.height=s*this.mo+"%",e.removeCSSClass(this.wo,As,Ss),e.addCSSClass(this.wo,Ts),this.wo.insertBefore(this.xo,this.ko),this.ko.onload=()=>{this.xo.remove(),e.removeCSSClass(this.ko,Ss)},this.fo.title||(this.Ke.textContent=t),this.fo.errorInfoBar&&setTimeout((()=>{this.bo&&!this.vo&&(this.yo=this._o(),t&&(this.zo.href=t),e.removeCSSClass(this.yo,Ss),this.wo.appendChild(this.yo),this.vo=!0)}),1e3),this.bo=!0}}close(){const t=this.os;this.bo=!1,t.removeCSSClass(this.wo,Ts),t.addCSSClass(this.wo,As),this.Mo(),this.ko.setAttribute("src",""),setTimeout((()=>{t.addCSSClass(this.wo,Ss),t.removeCSSClass(this.ko,Ss)}),400)}render(){const t=this.os,e=this.fo;return this.wo=t.createDiv(["webview-container"]),this.Co=t.createDiv(["header","webview-header","flex"]),this.Ke=t.createTextDiv(["title","webview-title","ellipsis"]),this.So=t.createIconButton({css:["header-button","webview-button-close"],icon:e.closeButtonIcon,iconCss:[],title:e.closeButtonLabel}),this.So.id=`${this.ei}-webview-button-close`,this.xo=this.$o(),this.ko=t.createElement("iframe",["webview"]),this.ko.name=`${this.Fe.name}-webview`,this.ko.title=e.accessibilityTitle,e.title&&(this.Ke.textContent=e.title),"label"===e.closeButtonType?(this.So.classList.add(`${this.ei}-label-only`),this.So.appendChild(document.createTextNode(e.closeButtonLabel))):"iconWithLabel"===e.closeButtonType&&(this.So.classList.add(`${this.ei}-with-label`),this.So.appendChild(document.createTextNode(e.closeButtonLabel))),this.ko.setAttribute("referrerpolicy",e.referrerPolicy),this.fo.sandbox.length&&this.fo.sandbox.forEach((t=>{this.ko.sandbox.add(t)})),t.addCSSClass(this.wo,Ss),this.So.onclick=()=>{this.close()},this.Co.appendChild(this.Ke),this.Co.appendChild(this.So),this.wo.appendChild(this.Co),this.wo.appendChild(this.ko),this.wo}$o(){return new ks(this.os).render()}_o(){const t=this.os,e=t.createDiv(["webview-error","flex"]);this.To=t.createDiv(["webview-error-text"]),e.appendChild(this.To),this.Ao(this.fo.errorInfoText);const s=t.createIconButton({css:["webview-error-button-close"],icon:this.fo.closeButtonIcon,iconCss:[],title:this.fo.errorInfoDismissLabel});return s.onclick=this.Mo.bind(this),e.appendChild(s),e}Ao(t){var e;const s=this.os,i=(r=t,Ce.forEach((t=>{r=r.replace((0,a.resetRegex)(t.match),t.replace)})),r);var r;let o;const n=/\{0\}(.*)\{\/0\}/g,c=null===(e=n.exec(i))||void 0===e?void 0:e[1];if(c){const t=s.createAnchor("",c,["webview-alt-link"]);o=i.replace((0,a.resetRegex)(n),t.outerHTML)}else o=s.createAnchor("",i,["webview-alt-link"]).outerHTML;this.To.innerHTML=o,this.zo=this.To.querySelector("a")}Mo(){const t=this.os;this.vo&&(t.addCSSClass(this.yo,Ss),setTimeout((()=>{this.wo.removeChild(this.yo),this.vo=!1}),600))}}const Is=window.setTimeout,Es=window.setInterval,Ls=36e5,Ps=864e5,js="relTimeNow",Hs="relTimeMoment";class Vs{constructor(t,e){this.os=e,this.Ri=t.i18n[t.locale];const s=t.icons,i=t.name,r="-has-message-icon";this.ei=i,this.Oo=`${i}-left ${s.avatarBot?`${i}${r}`:""}`,this.Io=`${i}-right ${s.avatarUser?`${i}${r}`:""}`}render(){const t=this.os;let e=this.ho;return e?(e.setAttribute("aria-live","off"),e.setAttribute("aria-hidden","true")):e=t.createTextDiv(),e.className=`${this.ei}-relative-timestamp ${this.Eo}`,this.ho=e,e}setLocale(t){if(this.Ri=t,this.Lo)switch(this.Lo){case js:case Hs:this.Po(t[this.Lo]);break;default:this.Po(t[this.Lo].replace("{0}",`${this.jo}`))}}setRelativeTime(t){const e=(new Date).getTime()-t.getTime(),s=Math.floor(e/1e3),i=Math.floor(s/60),r=Math.floor(i/60),o=Math.floor(r/24),n=Math.floor(o/30),a=Math.floor(n/12);a>0?this.Ho(a):n>0?this.Vo(n):o>0?this.Fo(o):r>0?this.No(r):i>0?this.Ro(i):this.Uo(s)}refresh(t){this.Eo=t===i.SenderType.Skill?this.Oo:this.Io,this.ho.className=`${this.ei}-relative-timestamp ${this.Eo}`,this.Bo()}remove(){var t;(null===(t=this.ho)||void 0===t?void 0:t.parentElement)&&this.ho.remove()}Bo(){this.Wo(js,1e4,this.Uo.bind(this))}Uo(t=10){t*=1e3,this.Wo(Hs,6e4-t,this.Ro.bind(this))}Ro(t=1){this.Zo("relTimeMin",6e4,60,this.No.bind(this),t)}No(t=1){this.Zo("relTimeHr",Ls,24,this.Fo.bind(this),t)}Fo(t=1){this.Zo("relTimeDay",Ps,30,this.Vo.bind(this),t)}Vo(t=1){this.Zo("relTimeMon",2592e6,12,this.Ho.bind(this),t)}Ho(t=1){this.Zo("relTimeYr",31536e6,60,(()=>{}),t)}Wo(t,e,s){this.qo(),this.Po(this.Ri[t]),this.Lo=t,this.Go=Is((()=>{s()}),e)}Zo(t,e,s,i,r=1){this.qo(),this.Po(this.Ri[t].replace("{0}",`${r}`)),this.Lo=t,this.jo=r,this.Go=Es((()=>{r++,this.jo=r,r>s?(clearInterval(this.Go),i()):this.Po(this.Ri[t].replace("{0}",`${r}`))}),e)}Po(t){this.ho.innerText=t}qo(){clearTimeout(this.Go),clearInterval(this.Go)}}class Fs{constructor(t,e,s){let r,o;if(this.U=e,this.Oi=s,this.Bs=new kt("MultiLangChatComponent"),this.Yo=!0,this.Jo=!0,this.Ko=!1,this.Xo={},this.Qo={},this.tn=[],this.Rr=e.webCore,this.Fe=e.settings,this.sn=this.Fe.i18n[this.Fe.locale],this.ei=e.settings.name,t&&(this.rn=Object.assign(Object.assign({},t),{supportedLangs:t.supportedLangs?[...t.supportedLangs]:[]}),r=this.rn.supportedLangs,o=this.rn.primary,"string"==typeof o&&(this.rn.primary=o.toLowerCase())),r&&r.length)if(r.forEach((t=>{t.lang=t.lang.toLowerCase()})),r.length>1?(r.unshift({lang:"und",label:this.sn.language_detect}),this.rn.primary||(this.rn.primary=null)):this.rn.primary=r[0].lang,this.tn=r.map((t=>t.lang)),this.Fe.enableBotAudioResponse){const t=e.synthesisVoices;if(t&&t.length){const e={};r.filter((t=>t.lang&&"und"!==t.lang)).forEach((s=>{const i=t.filter((t=>t.lang.indexOf(s.lang)>=0));i.push({lang:s.lang}),e[s.lang]=i})),this.Qo=e}else new Set(this.tn.filter((t=>"und"!==t))).forEach((t=>{this.Qo[t]=[{lang:t,name:t}]}))}else this.nn=()=>{};if(this.Fe.enableSpeech){const t={};Object.values(i.RecognitionLocale).forEach((e=>{t[e.substring(0,2)]=e,t[e]=e})),Rs(i.RecognitionLocale.EN_GB,t),Rs(i.RecognitionLocale.EN_AU,t),Rs(i.RecognitionLocale.EN_IN,t),this.Xo=t}else this.an=()=>{}}render(t){const e=this.U.util,s=this.ei,i="language-selection",r=`${s}-${i}-button`,o=`${s}-${i}-menu`,n=this.rn;let a;if(this.Ko=t,!(n&&n.supportedLangs&&n.supportedLangs.length>=2))return null;if(!this.wo){const s=this.Fe.icons.language||_,c=e.createIconButton({css:["header-button","button-lang"],icon:s,iconCss:[],title:this.sn.languageSelectDropdown}),h=e.createListItem("action-menu-option-lang",this.sn.languageSelectDropdown,"lang",s,"action-item",null,!0),l=n.supportedLangs.map((t=>{var s;const{lang:r,label:o}=t,a="und"===r&&n.primary?n.primary:r,c=`language_${"und"===r?"detect":r}`,h=(null===(s=this.Fe.i18n[a])||void 0===s?void 0:s[c])||o||r;return e.createListItem(`${i}-option-${r}`,h,r,"",`${i}-option`,(t=>{let e=t.target;"LI"!==e.tagName&&(e=e.parentElement);const s=e.dataset.value;this.cn(s)}))})),p=e.getMenu({menuId:o,menuClassList:[`${i}-menu`],menuItems:l,buttonId:r,menuButton:t?h:c});if(t){a=e.getMenuButton({button:h,menuId:o,menu:p,widget:this.Oi.chatWidgetDiv});const t=e.createDiv(["arrow-icon"]),s=e.createImageIcon({icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 9L11.9746 15L18 9H6Z" fill="#161513"/></svg>'});t.appendChild(s),a.appendChild(t),this.U.chatWidget.chatWidgetDiv.appendChild(p)}else{a=e.createDiv();const t=e.getMenuButton({button:c,menuId:o,menu:p,widget:this.Oi.chatWidgetDiv});a.appendChild(t),a.appendChild(p),c.id=r}this.disableComponent(!1)}return this.wo=a,a}setLocale(t){this.wo&&this.rn.supportedLangs.forEach((e=>{const{lang:s,label:i}=e,r=`language_${"und"===s?"detect":s}`,o=document.getElementById(`language-selection-option-${s}`);if(!o)return;const n=t[r]||i||s;o.title=n}))}setTag(t,e=!0){let s="";null!==t&&(s=t.toLowerCase()),this.tn.length&&(s=this.tn.indexOf(s)>=0?s:null),this.cn(s,e)}disableComponent(t){if(this.wo){const e=this.U.util,s=this.wo;if(this.Ko){const i="disable";t?e.addCSSClass(s,i):e.removeCSSClass(s,i)}else s.querySelector("button").disabled=t}}cn(t,e=!0){let s=t;this.sn=this.Fe.i18n[s],this.hn!==s&&(this.hn=s,this.U.eventDispatcher.trigger(r.CHAT_LANG,s)),this.wo&&this.ln(s),"und"===s&&(s=null),e&&(this.pn(s),this.U.storageService.setItem(Ns(this.Fe),s)),this.nn(s),this.an(s),this.U.chatWidget.onLanguageUpdate(s,e)}pn(t){if(this.Rr.isConnected()){const e={profile:{languageTag:t}};t||(e.profile.locale=t);const s=this.Fe.sdkMetadata?Object.assign({version:Tt},this.Fe.sdkMetadata):{version:Tt};this.Rr.updateUser(e,{sdkMetadata:s})}}nn(t){const e=this.U.chatWidget;if(t){if(this.Yo||(e.enableSpeechSynthesisService(!0),this.Yo=!0),this.Fe.enableBotAudioResponse){const e=this.Qo[t];this.Rr.setTTSVoice(e).catch((t=>{this.Bs.info(`Failed to set TTS voice for '${e[0].lang}'. ${t}`),this.nn(null)}))}}else this.Yo=!1,this.Fe.enableBotAudioResponse&&this.Rr.cancelTTS(),e.enableSpeechSynthesisService(!1)}an(t){const e=this.U,s=this.Xo[t],i=e.chatWidget;s?(this.Jo||(i.setVoiceRecognitionService(!0),this.Jo=!0),this.Rr.setRecognitionLocale(s)):(this.Jo=!1,this.Rr.stopRecognition(),this.Rr.setRecognitionLocale(null),i.setVoiceRecognitionService(!1))}ln(t){const e=this.U.util,s=t||"und",i=document.getElementById(`${this.ei}-language-selection-menu`),r="active";if(i){const t=i.querySelector(`li.${this.ei}-${r}`);t&&e.removeCSSClass(t,r);const o=i.querySelector(`[data-value="${s}"]`);o&&e.addCSSClass(o,r)}}initLanguage(){const{primary:t}=this.rn||{},e=this.U.storageService.getItem(Ns(this.Fe));let s=t;e&&(s="null"===e?null:e),void 0!==s&&this.setTag(s)}}function Ns(t){return`${t.name}-${t.channelId}-${t.userId}`}function Rs(t,e){navigator.language.toLowerCase()===t&&(e[t.substring(0,2)]=t)}class Ds{constructor(t){this.getItem=t=>(!this.un[t]&&this.dn&&(this.un[t]=this.mn.getItem(t)),this.un[t]),this.setItem=(t,e)=>{this.dn?(this.mn.setItem(t,e),delete this.un[t]):this.un[t]=e},this.removeItem=t=>{this.dn&&this.mn.removeItem(t),delete this.un[t]},this.un={},n(t)?(this.dn=!0,this.mn=window[t]):this.dn=!1}}const Us="keydown";class Bs{constructor(t){var e;this.gn=new Map,this.fn=!0,this.bn=t=>{if(Ws(t)&&this.vn(t.code)){const t=document.querySelector(this.wn);if(t){const e=t.value.length;setTimeout((()=>{t.value.length>e&&(t.value=t.value.slice(0,e))}))}}};const s=null!==(e=t.name)&&void 0!==e?e:"oda-chat";this.wn=`.${s}-user-input`}add(t,e,s=!0){this.fn&&(this.xn(),this.fn=!1);const i=t.toUpperCase(),r=isNaN(i)?`Key${i}`:`Digit${i}`;this.gn.set(r,{check:s,elem:e}),e.setAttribute("aria-keyshortcuts",`Alt+${i}`)}setWidget(t){this.Oi=t}remove(){document.removeEventListener(Us,this.bn)}xn(){document.addEventListener(Us,this.bn)}vn(t){let e=!1;const s=this.gn.get(t),i=s&&s.elem;return i&&Zs(s.check?this.Oi:i)&&!i.disabled&&(i.focus(),i.click(),e=!0),e}}const Ws=t=>t.altKey&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.repeat,Zs=t=>null!==t.offsetParent,qs="resize",Gs=[`nw-${qs}`,`se-${qs}`,`nwse-${qs}`,`w-${qs}`,`e-${qs}`],Ys=[`ne-${qs}`,`sw-${qs}`,`nesw-${qs}`,`e-${qs}`,`w-${qs}`];let Js=200,Ks=375,Xs=!1,Qs=!1;function ti(t,e,s=!0,i=!1){const r=s?Gs:Ys;let o;const n=n=>{const a=parseInt(getComputedStyle(t).maxWidth),c=t.offsetWidth;let h=o-n.x;s||(h=-h);const l=c+h;if(c<Ks&&(Ks=c),o=n.x,document.body.style.cursor=l<=Ks?i?Xs?r[0]:r[2]:r[3]:l>=a?i?Qs?r[1]:r[2]:r[4]:i?r[2]:`col-${qs}`,l>=Ks&&l<=a){const s=`${l}px`;t.style.width=s,e(s)}n.preventDefault()},a=()=>{document.removeEventListener("mouseup",a,!1),document.removeEventListener("mousemove",n,!1),document.body.style.removeProperty("cursor")};return t=>{t.preventDefault(),o=t.x,document.addEventListener("mouseup",a,!1),document.addEventListener("mousemove",n,!1)}}function ei(t,e=!1){let s;const i=i=>{const r=s-i.y,o=parseInt(getComputedStyle(t).maxHeight),n=t.offsetHeight,a=n+r;n<Js&&(Js=n),s=i.y,a<=Js?(Xs=!0,e||(document.body.style.cursor=`n-${qs}`)):a>=o?(Qs=!0,e||(document.body.style.cursor=`s-${qs}`)):(Xs=!1,Qs=!1,e||(document.body.style.cursor=`row-${qs}`)),a>=Js&&a<=o&&(t.style.height=`${a}px`),i.preventDefault()},r=()=>{document.removeEventListener("mouseup",r,!1),document.removeEventListener("mousemove",i,!1),document.body.style.removeProperty("cursor")};return t=>{t.preventDefault(),s=t.y,document.addEventListener("mouseup",r,!1),document.addEventListener("mousemove",i,!1)}}const si=window.BroadcastChannel,ii="collapsed",ri="expanded",oi="none",ni=window.setTimeout,ai=[i.MessageType.Suggest,i.MessageType.SessionClosed,i.MessageType.CloseSession,i.MessageType.Status],ci=[i.MessageType.Text,i.MessageType.Attachment,i.MessageType.Location,i.MessageType.FormSubmission];class hi extends qe{constructor(t,e,s,r,o,n,a,c,h,l,p,u){var d,m;super(),this.Fe=t,this.os=e,this.St=s,this.kn=r,this.yn=o,this._n=n,this.zn=a,this.Mn=c,this.Cn=h,this.Sn=l,this.Rr=p,this.Ai=u,this.skillMessages=[],this.$n=200,this.Tn=[],this.Bs=new kt("ChatComponent"),this.An=[],this.On=0,this.In=[],this.En=!0,this.Ln=!0,this.Pn=!1,this.jn=!1,this.Hn=!0,this.Vn=!1,this.Fn=[],this.Nn=1e4,this.Rn=new Map,this.ei=t.name,this.Dn=t.locale,this.Un=t.i18n[t.locale],this.isOpen=!1,this.jn="init"===(null===(d=t.initMessageOptions)||void 0===d?void 0:d.sendAt)||t.openChatOnLoad||t.embedded,this.Pn=t.enableHeadless,this.Bn=!0,this.Wn=!t.embedded&&!t.sidepanel&&t.enableResizableWidget,this.Zn=this.Fe.enableDefaultClientResponse,this.configureStorage(),this.qn=!1;const g=this.Gn.getItem(this.Yn);g&&(t.icons.avatarUser=g),this.Fe.enableTabsSync||(this.Jn=()=>{}),this.Rr.on(i.CoreEvent.Open,(()=>this.Kn())),this.Rr.on(i.CoreEvent.State,(t=>this.Xn(t))),this.Rr.on(i.CoreEvent.MessageReceived,(t=>{const e=t,{endOfTurn:s,messagePayload:r,threadId:o}=e,n=Boolean(null==o?void 0:o.startsWith(`${i.ContextSource.UIWidget}:`)),a=this.contextWidgetMap[o];if(r.type===i.MessageType.ExecuteApplicationActionCommand){const t=r;return n?a.showFullSizeWidget():this.Qn(Boolean(s)),void u.trigger(t.actionType,t)}if(n)a.onMessageReceived(e);else{const t=r.type===i.MessageType.Command&&"noReply"===r.command;o!==this.ye?this.ta(o).then((()=>{t||this.ea(e)})):t||this.ea(e)}})),this.Fe.enableVoiceOnlyMode&&this.Rr.on(i.CoreEvent.TTSStop,(()=>{this.Si(!0,this.Fe.enableVoiceOnlyMode)})),this.Co=new vs(this.Fe,this.os,this.yn.bind(this),this.clearConversationHistory.bind(this),this.onToggleNarration.bind(this),this.Rr,this.showEndConversationPrompt.bind(this),this.Ii.bind(this),this),this.sa=new ls(this.os,this.sendMessage.bind(this),this.uploadFile.bind(this),this.Fe,this.getSuggestions.bind(this),this.Si.bind(this),this.ia.bind(this),this.Ti.bind(this),this.Ai,this,this.Ii.bind(this)),this.Fe.enableBotAudioResponse&&(this.Ln=this.Fe.initBotAudioMuted),"function"!=typeof l&&(this.Sn=()=>{}),this.Fe.showTypingIndicator&&(this.ra=new zs(zt.LEFT,t,e)),!this.Fe.enableTimestamp||"relative"!==this.Fe.timestampMode&&"default"!==this.Fe.timestampMode?(this.oa=()=>{},this.na=()=>{}):this.aa=new Vs(t,e),"action"!==(null===(m=this.Fe.focusOnNewMessage)||void 0===m?void 0:m.toLowerCase())&&(this.ca=()=>{});const f=this.Gn.getItem(this.ha);f&&(this.la=JSON.parse(f),this.pa()),this.Rr.isConnected()&&this.Kn()}render(){this.element=this.Wi(),this.ua(),this.Fe.multiLangChat&&this.da(),this.ma(this.Fe),this.Xn(this.Rr.getState())}embedInElement(t){const e=document.getElementById(t);if(!e)throw new Error("Can not embed chat widget.");this.os.addCSSClass(e,"wrapper",this.Fe.theme,"embedded"),this.appendToElement(e)}showChat(){if(!this.isOpen){const t=this.os;t.removeCSSClass(this.element,ii),t.addCSSClass(this.element,ri),t.removeCSSClass(this.chatWidgetDiv,oi),this.Fe.embedded||ni((()=>{t.addCSSClass(this.ga,oi)}),250),this.isOpen=!0,this.jn=!0,this.updateNotificationBadge(0),this.fa(),this.sa.focusTextArea(),this.Kn()}}onClose(){if(this.isOpen){const t=this.os;this.ba(),t.removeCSSClass(this.element,ri),t.addCSSClass(this.element,ii),this.Fe.embedded||(t.removeCSSClass(this.ga,oi),ni((()=>{t.addCSSClass(this.chatWidgetDiv,oi),this.ga.focus()}),250),this.updateNotificationBadge(this.Cn())),this.isOpen=!1}}sendExitEvent(){const t={messagePayload:{type:i.MessageType.CloseSession},userId:this.Fe.userId};if(this.Fe.delegate&&this.Fe.delegate.beforeEndConversation&&(0,a.isFunction)(this.Fe.delegate.beforeEndConversation))try{this.Fe.delegate.beforeEndConversation(t).then((t=>{t&&this.sendMessage(t,{hidden:!0,delegate:!1})}))}catch(t){this.Bs.error(t)}else this.sendMessage(t,{hidden:!0,delegate:!1});this.Pn=!1}updateNotificationBadge(t){var e;this.On=t,t>0?(this.va.innerText=`${t}`,this.ga.appendChild(this.va)):(null===(e=this.va)||void 0===e?void 0:e.parentElement)&&this.va.remove()}onToggleNarration(t){this.wa(t),this.Ai.trigger(r.CLICK_AUDIO_RESPONSE_TOGGLE,t)}remove(){super.remove(),this.Fe.embedded&&window.removeEventListener("resize",this.xa);const t=this.ka;t&&t.remove()}clearConversationHistory(t=!1){t?this.ya(t):(this.clearMessages(this.Fe.userId),this.ya(),this._a({type:"actionClearHistory"})),this.za=null,this.Fn=[],this.skillMessages=[],this.Qn(),this.updateNotificationBadge(0)}clearMessages(t,e){const s=`${this.Fe.name}-${t}-messages`;(e?window[e]:this.Gn).getItem(s)&&this.Gn.removeItem(s)}clearAllMessage(){const t=null===window||void 0===window?void 0:window.localStorage,e=(null==t?void 0:t.length)||0;if(e){const s=/oda-chat-.*-messages/g;for(let i=0;i<e;i++){const e=t.key(i);(null==e?void 0:e.match(s))&&t.removeItem(e)}}}setUserInputMessage(t){this.sa.setUserInputText(t)}setUserInputPlaceholder(t){this.sa.setUserInputPlaceholder(t)}getWebViewComponent(){return this.Ma}refreshWebView(t){this.Ma.setProps(t),this.Ca.remove(),this.Ca=this.Ma.render(),this.chatWidgetDiv.appendChild(this.Ca)}orientWidgetAnimation(){const t=this.element,e=Math.floor(window.innerWidth/2),s=t.offsetLeft;s<0?t.style.left="10px":s>window.innerWidth&&(t.style.right="10px"),s<e&&this.os.addCSSClass(t,"pos-left")}updateFullScreenWidth(t){this.os.updateCSSVar("--width-full-screen",t)}setHeight(t){const e=this.chatWidgetDiv;e&&!this.Fe.sidepanel&&(e.style.height=t,this.Fe.height=t)}setWidth(t){const e=this.Fe.sidepanel?this.chatWidgetWrapper:this.chatWidgetDiv;e&&(e.style.width=t,this.Fe.width=t,this.updateFullScreenWidth(t))}setSize(t,e){this.setHeight(e),this.setWidth(t)}setMessagePadding(t){this.Sa("message-bubble",{padding:t}),this.Fe.messagePadding=t}setChatBubbleIconHeight(t){this.Sa("typing-cue-wrapper",{height:t}),this.Fe.height=t}setChatBubbleIconWidth(t){this.Sa("typing-cue-wrapper",{width:t}),this.Fe.width=t}setChatBubbleIconSize(t,e){this.Sa("typing-cue-wrapper",{height:e,width:t}),this.Fe.width=t,this.Fe.height=e}onMessageActionClicked(t){const e=this.os,s=this.Un;switch(this.Si(!1),t.type){case i.ActionType.Postback:this.fa(),t.getPayload().then((s=>{const{label:r,imageUrl:o}=t;this.sendMessage((0,i.buildUserMessage)({postback:s,text:o?e.createImage(o,[],r||"").outerHTML:r,type:i.MessageType.Postback}))}));break;case i.ActionType.Location:this.ia();break;case i.ActionType.Share:navigator.share?t.getPayload().then((e=>navigator.share({text:e,title:t.label}))):this.$a(s.shareFailureMessage,V);break;case i.ActionType.SubmitForm:const r=t.messageComponent;if(!r.validateForm())break;const o=r.getSubmittedFields();if(this.Fe.enableLocalConversationHistory){const t=this.getMessages();for(let e=t.length-1;e>=0;e--){const s=t[e];if(s.msgId===r.msgId&&s.messagePayload.type===i.MessageType.EditForm){const t=s.messagePayload;(0,i.isEditFormPayloadWithFields)(t)?t.fields.forEach((t=>{(0,i.isReadOnlyField)(t)||(t.defaultValue=o[t.id])})):t.formRows.forEach((t=>{t.columns.forEach((t=>{t.fields.forEach((t=>{(0,i.isReadOnlyField)(t)||(t.defaultValue=o[t.id])}))}))}));break}}this.Gn.setItem(this.Ta,JSON.stringify(t))}this.fa(),t.getPayload().then((t=>{const e={postback:t,submittedFields:o,type:i.MessageType.FormSubmission};t||delete e.postback,this.sendMessage((0,i.buildUserMessage)(e),{hidden:!0})}));break;case i.ActionType.Call:t.getPayload().then((t=>{e.createAnchor(`tel:${t}`,"").click()}));break;case i.ActionType.Client:t.getPayload().then((t=>{"string"==typeof t?navigator.clipboard?navigator.clipboard.writeText(t).then((()=>{this.$a(s.copySuccessMessage,L)})):this.$a(s.copyFailureMessage,V):this.Ai.trigger(t.actionType,t)}));break;default:t.getPayload().then((s=>{e.createAnchor(s,"",[],this.Fe.openLinksInNewWindow,t.type===i.ActionType.Url?this.Fe.linkHandler:this.Aa).click()}))}}applyDelegates(t){var e;let s;s="string"==typeof t?(0,i.buildUserTextMessage)(t,null===(e=this.speechFinalResult)||void 0===e?void 0:e.speechId):(0,i.isPostbackPayload)(t)?(0,i.buildPostbackMessage)(t):(0,i.isMessagePayload)(t)?(0,i.buildUserMessage)(t):t;const r=s.messagePayload.type,o=this.Fe.delegate,n=o.beforePostbackSend,c=o.beforeSend;return r===i.MessageType.Postback&&(0,a.isFunction)(n)?s=this.Oa(s,n):ci.includes(r)&&(0,a.isFunction)(c)&&(s=this.Oa(s,c)),s}sendMessage(t,e){if(this.Ia)return pi();this.Qn(),!this.Fe.enableSpeechAutoSend&&this.speechFinalResult&&"string"==typeof t&&t.toLowerCase().indexOf(this.speechFinalResult.text.toLowerCase())>=0&&(t=(0,i.buildUserTextMessage)(t,this.speechFinalResult.speechId)),this.sa.focusTextArea(),this.ba(),void 0===(e=e||{}).delegate&&(e.delegate=!0),e.delegate&&this.Fe.delegate&&(t=this.applyDelegates(t));const s=this.Fe.sdkMetadata?Object.assign({version:Tt},this.Fe.sdkMetadata):{version:Tt};return t&&this.Rr.sendMessage(t,{sdkMetadata:s}).then((s=>{this.Bs.debug("onMessageSent",t),(0,i.isEventPayload)(s.messagePayload)||(this.Mn(s),this.Ea(),this.Vn=!1,this.Zn&&this.La(),this.speechFinalResult=null,(null==e?void 0:e.hidden)?this.za=i.SenderType.User:this.Pa(s),this.getAgentDetails()||this.showTypingIndicator())}))}uploadFile(t,e){if(this.Ia)return pi();const s=this.Un;this.ba(),this.Ea();const r=new Promise(((r,o)=>{var n,a;if(this.Fe.enableHeadless){const e=this.Fe.sdkMetadata?Object.assign({version:Tt},this.Fe.sdkMetadata):{version:Tt};this.Rr.uploadAttachment(t,{sdkMetadata:e}).then((t=>this.Rr.sendMessage(this.Fe.delegate?this.applyDelegates(t):t,{sdkMetadata:e}))).then((t=>{r(t)})).catch((t=>{o(t)}))}else{this.fa();const c=`${null===(n=t.name)||void 0===n?void 0:n.replace(/[\s:'"\\/[\]~,.;^`()@#%*+=$&!{}?<>|]/g,"")}${Math.floor(1e4+9e4*Math.random())}${Date.now()%1e5}`,h=this.os.createDiv();if(h.id=c,this.An.push({divId:c,fileName:t.name}),this.oa(new Date),this.ja(h),this.Ha=this.customFileMaxSize?this.customFileMaxSize:e?e.maxSize:Ot,t.size>this.Ha){this.fa();const e=this.Ha/1048576;let r=e.toString();"number"==typeof(a=e)&&isFinite(a)&&Math.floor(a)===a||(r=e.toFixed(3));const n=`${t.name} - ${s.uploadFailed}`,h=s.uploadFileSizeLimitExceeded.replace("{0}",r);this.Va(n,h,c),this.na(i.SenderType.User),o(new Error(h))}else if(0===t.size){this.fa();const e=`${t.name} - ${s.uploadFailed}`,r=s.uploadFileSizeZeroByte;this.Va(e,r,c),this.na(i.SenderType.User),o(new Error(r))}else{const e=new ys(t.name,zt.RIGHT,this.Fe,this.os),s=this.Fe.sdkMetadata?Object.assign({version:Tt},this.Fe.sdkMetadata):{version:Tt};this.na(i.SenderType.User),h.appendChild(e.render()),this.fa(),this.Rr.uploadAttachment(t,{sdkMetadata:s}).then((t=>this.Rr.sendMessage(this.Fe.delegate?this.applyDelegates(t):t,{sdkMetadata:s}))).then((e=>{e.messagePayload.attachment.title=t.name,h.remove(),this.An=this.An.filter((t=>t.divId!==c)),this.Hn=!1,this.Mn(e),this.Pa(e),r(e)})).catch((e=>{this.Fa(t.name,e.message,c),o(e)}))}}}));return r.catch((t=>{this.Bs.error(t)})),r}refreshTTS(){this.Co.showTTSButton(!!this.Fe.ttsService)}getSuggestions(t){if(this.Ia)return pi();if(!this.Fe.enableAutocompleteClientCache||this.Fe.enableAutocompleteClientCache&&!this.sa.getSuggestionsValid())return this.Rr.getSuggestions(t).then((t=>(this.sa.displaySuggestions(t),t))).catch((()=>[]));const e=this.Na(this.sa.getSuggestions(),t);return null!==this.sa&&this.sa.displaySuggestions(e),Promise.resolve(e)}getUnreadMsgsCount(){return this.On}getMessages(){const t=this.Gn.getItem(this.Ta);let e=[];if(t)try{e=JSON.parse(t).map((t=>Object.assign({},t)))}catch(t){this.Bs.error("Failed to parse saved chat.")}return e}getAgentDetails(){return this.la}setAgentDetails(t){this.la=Object.assign(Object.assign({},this.la),t),this.pa(),this.Gn.setItem(this.ha,JSON.stringify(this.la))}setUserAvatar(t){this.Fe.icons.avatarUser=t,this.Gn.setItem(this.Yn,t);document.querySelectorAll(`.${this.ei}-right .${this.ei}-message-icon`).forEach((e=>{e.parentElement.replaceWith(this.Ra(t,this.Un.avatarUser))}))}Da(t){if(this.Tn.push(t),this.Fe.enableLocalConversationHistory){const e=this.getMessages();e.length>=this.Fe.messageCacheSizeLimit&&e.splice(0,e.length-(this.Fe.messageCacheSizeLimit-1));let s=JSON.stringify(t).substring(1,JSON.stringify(t).length-1);s=`{${s}, "date":"${new Date}"}`,e.push(JSON.parse(s)),this.Gn.setItem(this.Ta,JSON.stringify(e))}}configureStorage(){const t=this.Fe;t.userId?t.storageType!==Ge.LOCAL&&t.storageType!==Ge.SESSION&&(t.storageType=Ge.LOCAL):t.storageType=Ge.SESSION,this.Ta=`${t.name}-${t.userId}-messages`,this.ha=`${t.name}-${t.userId}-agent-details`,this.Yn=`${t.name}-${t.userId}-user-avatar`,this.Gn=new Ds(t.storageType)}setVoiceRecognitionService(t){this.sa.disableVoiceModeButton(!t,{src:"lang"})}enableSpeechSynthesisService(t){this.Co.disableTTSButton(!t)}onShareLocation(){this.ia()}setPrimaryChatLanguage(t){this.Ua.setTag(t)}onLanguageUpdate(t,e=!0){const s=this.Fe.i18n,i=Object.assign(Object.assign(Object.assign({},s.en),s[this.Fe.locale]),s[t]);e&&this._a({type:"actionLanguage",tag:t}),this.Dn=t,this.ga.title=i.chatButtonTitle||i.chatTitle,this.Co.setLocale(i),this.sa.setLocale(i),this.ra.updateTypingCueLocale(i.typingIndicator);document.querySelectorAll(`.${this.ei}-message-icon`).forEach((t=>{const e=t.parentElement.parentElement.className.indexOf(`${this.ei}-left`)<0?i.avatarUser:i.avatarBot;"img"===t.localName?t.alt=e:t.setAttribute("aria-label",e)})),this.refreshWebView({accessibilityTitle:i.webViewAccessibilityTitle,closeButtonLabel:i.webViewClose,errorInfoDismissLabel:i.webViewErrorInfoDismiss,errorInfoText:i.webViewErrorInfoText}),this.Ua&&this.Ua.setLocale(i),this.Ba&&(this.Ba.textContent=(0,a.formatDate)(this.Wa,{pattern:this.Fe.timestampFormat,locale:t})),this.aa&&this.aa.setLocale(i),this.Za&&(this.Za.innerText=i.previousChats),this.Un=i}showTypingIndicator(){const t=document.getElementById(`${this.ei}-connection-error`);t&&t.remove(),this.Fe.showTypingIndicator&&(this.ra.append(this.qa),this.fa())}hideTypingIndicator(){this.Fe.showTypingIndicator&&this.ra.remove()}showConnectionError(){const t={type:i.MessageType.Text,text:this.Un.connectionFailureMessage,globalActions:[{type:i.ActionType.Postback,label:this.Un.connectionRetryLabel}]},e=ke.fromMessage(this.Fe,this.os,{messagePayload:t});e.onActionClick=()=>{this.St()},this.showMessage(`${this.ei}-connection-error`,e)}showMessage(t,e){var s;const i=this.os.wrapMessageBlock(e.render(),this.Fe.icons.avatarBot,zt.LEFT);i.id=t,this.qa.appendChild(i),(null===(s=this.ra)||void 0===s?void 0:s.isVisible())&&this.hideTypingIndicator(),this.fa()}showEndConversationPrompt(){const t=this.Un;this.Ga=this.os.getBanner({text:t.endConversationConfirmMessage||"",description:t.endConversationDescription||"",actions:[{label:t.noText,handler:this.Ya},{label:t.yesText,handler:this.Ja,type:"filled"}]},this),this.os.addCSSClass(this.Ga,"end-conversation-prompt"),We(this.Ka.element,this.Ga)}Xa(t){if(this.Hn=!1,!this.Vn){const e={source:i.SkillMessageSource.Bot,messagePayload:{type:i.MessageType.Text,text:t},userId:this.Fe.userId,msgId:`${Date.now()}`};this.Da(e),this.Qa(t),this.tc([e])}}La(){const t=this.Un;this.ec=ni((()=>{this.Hn&&this.Xa(t.defaultGreetingMessage),this.sc=window.setInterval((()=>{this.Xa(t.defaultWaitMessage)}),this.Fe.defaultWaitMessageInterval*It),this.ic=ni((()=>{window.clearInterval(this.sc)}),(this.Fe.typingIndicatorTimeout-1)*It),this.ec=ni((()=>{this.hideTypingIndicator(),this.Xa(t.defaultSorryMessage)}),this.Fe.typingIndicatorTimeout*It)}),this.Fe.defaultGreetingTimeout*It)}Ja(){this.sendExitEvent(),this.Ya()}Ya(){this.Ga.querySelector(`.${this.ei}-prompt-banner-close-button`).click()}Xn(t){if(this.Bn&&(this.rc(),this.Bn=!1),Number.isInteger(t)&&t!==i.ConnectionState.Open){this.oc(),this.sa.isDisabled()||(this.sa.disable(),this.Co.disable(),this.Bs.debug("WebSocket not open, send message button disabled")),this.nc(),t===i.ConnectionState.Connecting?this.showTypingIndicator():this.hideTypingIndicator();for(const t of this.An)this.Fa(t.fileName,i.CoreError.UploadNetworkFail,t.divId);this.Ua&&this.Ua.disableComponent(!0)}else this.ac=void 0,this.hideTypingIndicator(),this.Jn(),this.sa.isDisabled()&&(this.sa.disable(!1),this.Co.disable(!1),this.Bs.debug("Connection established, send message button enabled")),this.cc();this.Sn(t)}da(){const t=this.Fe;this.Ua=new Fs(t.multiLangChat,{webCore:this.Rr,chatWidget:this,eventDispatcher:this.Ai,settings:t,synthesisVoices:t.ttsVoice,storageService:new Ds(t.storageType),util:this.os},this),this.Co.addLanguageSelect(this.Ua)}ia(){const t=this.Un;if(navigator&&navigator.geolocation){const e=new ys(t.requestLocation,zt.RIGHT,this.Fe,this.os);this.ja(e.render()),this.fa(),(0,i.getCurrentPosition)().then((t=>{const s=(0,i.buildUserMessage)({location:{latitude:t.latitude,longitude:t.longitude,title:void 0},type:i.MessageType.Location});e.remove(),this.sendMessage(s)}),(s=>{let i;switch(s.code){case s.PERMISSION_DENIED:i=t.requestLocationDeniedPermission;break;case s.POSITION_UNAVAILABLE:i=t.requestLocationDeniedUnavailable;break;case s.TIMEOUT:i=t.requestLocationDeniedTimeout;break;default:i=t.requestLocationDeniedPermission}this.$a(i,V),e.remove()}))}else this.$a(t.requestLocationDeniedUnavailable,V)}Na(t,e){const s=[];for(const i of t)i.search(new RegExp(e,"i"))>=0&&s.push(i);return s}Fa(t,e,s){const r=this.Un,o=`${t} - ${r.uploadFailed}`;let n="";switch(e){case i.CoreError.UploadMaxSize:n=r.uploadFileSizeLimitExceeded.replace("{0}",this.Ha.toString());break;case i.CoreError.UploadZeroSize:n=r.uploadFileSizeZeroByte;break;case i.CoreError.UploadBadFile:n=r.uploadUnsupportedFileType;break;case i.CoreError.UploadNetworkFail:n=r.uploadFileNetworkFailure;break;case i.CoreError.UploadUnauthorized:n=r.uploadUnauthorized}this.Va(o,n,s)}Oa(t,e){var s;const r=JSON.parse(JSON.stringify(t));let o,n=JSON.parse(JSON.stringify(t));t.messagePayload.type===i.MessageType.Text&&(null===(s=t.sdkMetadata)||void 0===s?void 0:s.speechId)&&(o=(t.messagePayload.text||"").toLowerCase());try{n=e(r)}catch(t){this.Bs.error(t)}if(n&&n.messagePayload||(n=null),n&&!(0,i.isValidMessage)(n)&&(this.Bs.error("The generated delegate message is invalid. Sending original message instead."),n=t),o&&n)if(n.messagePayload)if(n.messagePayload.type===i.MessageType.Text){const t=n.messagePayload.text;(null==t?void 0:t.toLowerCase().indexOf(o))<0&&delete n.sdkMetadata}else delete n.sdkMetadata;else delete n.sdkMetadata;return n}Va(t,e,s){const i=document.getElementById(s);if(i){i.firstElementChild&&i.removeChild(i.firstElementChild),this.An=this.An.filter((t=>t.divId!==s));const r=new _s(t,e,zt.RIGHT,this.Fe,this.os,!0),o=this.Fe.icons.error||v;i.appendChild(r.render(o))}}hc(t,e){const s=this.os;let i,r,o=!1,n=!1,a=0,c=0,h=0,l=0,p=0,u=0;const d=t=>{let e,s;const i=t.target.classList;for(let r=0;r<i.length;r++){i[r].indexOf("button-drag-handle")&&("touchstart"===t.type?(e=t.touches[0].clientX,s=t.touches[0].clientY):(e=t.clientX,s=t.clientY),a=e-h,c=s-l,p=e,u=s,o=!0)}},m=d=>{let m,g;if(o){"touchmove"===d.type?(m=d.touches[0].clientX,g=d.touches[0].clientY):(m=d.clientX,g=d.clientY);const o=m-p,f=g-u;i=m-a,r=g-c,h=i,l=r,(o>=5||f>=5||o<=-5||f<=-5)&&(s.addCSSClass(t,"drag"),e.style.transform=`translate3d(${i}px, ${r}px, 0)`,e.onclick=null,n=!0)}},g=()=>{if(n){ni((()=>{e.onclick=this.kn.bind(this)}),10),e.focus(),n=!1}o=!1},f=s.createDiv(["button-drag-handle"]);e.appendChild(f),e.addEventListener("touchstart",d),document.addEventListener("touchmove",m),e.addEventListener("touchend",g),e.addEventListener("mousedown",d),document.addEventListener("mousemove",m),e.addEventListener("mouseup",g)}addHeaderAction(t){this.Co.addAction(t)}updateHeaderAction(t){this.Co.ao(t)}Wi(){var t,e,s,i,r;const o=this.Fe,n=this.os,a=this.Un,c=n.createDiv(o.embedded?[]:["wrapper",o.theme,o.enableHeadless?"none":""]);this.chatWidgetDiv=n.createDiv(["widget","flex","col"]),this.chatWidgetDiv.setAttribute("role","region"),this.chatWidgetDiv.setAttribute("aria-labelledby",`${this.ei}-title`),this.os.setChatWidgetWrapper(c),this.Co.render(),this.chatWidgetDiv.appendChild(this.Co.element),o.embedTopStickyId&&this.lc(o.embedTopStickyId,this.chatWidgetDiv,["embed-sticky-top"]),this.Ka=new xs(n),this.uc=n.createDiv(["conversation-pane",o.icons.avatarBot?"bot-icon":"",o.icons.avatarUser?"user-icon":""]),"bottom"===o.conversationBeginPosition&&(this.uc.style.marginTop="auto"),o.embedTopScrollId&&this.lc(o.embedTopScrollId,this.uc,["embed-scroll-top"]),this.qa=n.createDiv(["conversation-container"]),this.qa.setAttribute("role","log"),this.qa.setAttribute("aria-live","polite"),this.qa.setAttribute("aria-atomic","false"),this.uc.appendChild(this.qa),this.Ka.element.appendChild(this.uc),o.embedBottomScrollId&&this.lc(o.embedBottomScrollId,this.Ka.element,["embed-scroll-bottom"]),this.chatWidgetDiv.appendChild(this.Ka.element),o.embedBottomStickyId&&this.lc(o.embedBottomStickyId,this.chatWidgetDiv,["embed-sticky-bottom"]),this.sa.render(),this.chatWidgetDiv.appendChild(this.sa.element),(t=o.webViewConfig).accessibilityTitle||(t.accessibilityTitle=a.webViewAccessibilityTitle),(e=o.webViewConfig).closeButtonLabel||(e.closeButtonLabel=a.webViewClose),(s=o.webViewConfig).errorInfoDismissLabel||(s.errorInfoDismissLabel=a.webViewErrorInfoDismiss),(i=o.webViewConfig).errorInfoText||(i.errorInfoText=a.webViewErrorInfoText),(r=o.webViewConfig).closeButtonIcon||(r.closeButtonIcon=o.icons.close),this.Ma=new Os(o.webViewConfig,n,o),this.Ca=this.Ma.render(),this.chatWidgetDiv.appendChild(this.Ca);const h=this.Ma,l=`${this.ei}-webview`;if(this.Aa={target:l,onclick:function(){h.open(this.href)}},o.linkHandler&&o.linkHandler.target===l&&(o.linkHandler=this.Aa),c.appendChild(this.chatWidgetDiv),o.embedded)this.isOpen=!0,n.addCSSClass(c,"open");else{const t=o.icons.launch||(o.colors&&o.colors.branding?z.replace("#025e7e",o.colors.branding):z),e="button",s=n.createIconButton({css:[e],icon:t,iconCss:[`${e}-icon`],title:a.chatButtonTitle||a.chatTitle});s.classList.remove(`${this.ei}-icon`),this.ga=s,this.ga.onclick=this.kn.bind(this),this.va=n.createTextDiv(["notification-badge"]),c.appendChild(s),this.Rn.set("launch",s),o.enableDraggableButton&&this.hc(c,s),o.openChatOnLoad||n.addCSSClass(c,ii),n.addCSSClass(this.chatWidgetDiv,oi)}if(this.chatWidgetWrapper=c,o.sidepanel){const t=t=>{const e=window.screen.width-t.x;if(n.addCSSClass(this.chatWidgetWrapper,"drag"),document.body.style.cursor=e<=375?"w-resize":e>=800?"e-resize":"col-resize",e>=375&&e<=800){const t=`${e}px`;this.chatWidgetWrapper.style.width=t,this.updateFullScreenWidth(t)}t.preventDefault()};c.addEventListener("mousedown",(e=>{e.offsetX<4&&document.addEventListener("mousemove",t,!1)}),!1),document.addEventListener("mouseup",(()=>{document.removeEventListener("mousemove",t,!1),n.removeCSSClass(this.chatWidgetWrapper,"drag"),this.chatWidgetWrapper.style.removeProperty("cursor"),document.body.style.removeProperty("cursor")}),!1)}else this.Wn&&function(t,e,s){const i=e.createDiv(["resizable",`top-${qs}`]);i.addEventListener("mousedown",ei(t)),t.appendChild(i);const r=e.createDiv(["resizable",`left-${qs}`]);r.addEventListener("mousedown",ti(t,s)),t.appendChild(r);const o=e.createDiv(["resizable",`right-${qs}`]);o.addEventListener("mousedown",ti(t,s,!1)),t.appendChild(o);const n=e.createDiv(["resizable",`left-${qs}`,"corner"]);n.addEventListener("mousedown",ti(t,s,!0,!0)),n.addEventListener("mousedown",ei(t,!0)),t.appendChild(n);const a=e.createDiv(["resizable",`right-${qs}`,"corner"]);a.addEventListener("mousedown",ti(t,s,!1,!0)),a.addEventListener("mousedown",ei(t,!0)),t.appendChild(a)}(this.chatWidgetDiv,n,this.updateFullScreenWidth.bind(this));return this.chatWidgetWrapper}ua(){const t=this.Fe,e=this.os;if(t.embedded)try{const e=document.getElementById(t.targetElement);this.embedInElement(t.targetElement),this.updateFullScreenWidth(`${e.clientWidth}px`),window.addEventListener("resize",Ee((()=>{this.updateFullScreenWidth(`${e.clientWidth}px`)}),500))}catch(t){this.Bs.error("Target Element not specified",t)}else if(t.sidepanel)try{const s=document.getElementById(t.targetElement),i=s.parentNode,r=e.createDiv(["sidepanel-content-wrapper"]);i.replaceChild(r,s),e.addCSSClass(this.chatWidgetDiv,"sidepanel"),r.appendChild(s),r.appendChild(this.chatWidgetWrapper)}catch(t){this.Bs.error("Target Element not specified",t)}else{try{this.appendToElement(document.body)}catch(t){return void this.Bs.error("Initialisation failed as page is not completely loaded. Make sure to initialise the SDK after document.body is available.")}ni((()=>{this.orientWidgetAnimation()}),0),window.addEventListener("resize",Ee((()=>{this.orientWidgetAnimation()}),500));const e=t.width,s=t.height;e&&this.setWidth(e),s&&this.setHeight(s),t.openChatOnLoad&&ni(this.kn.bind(this),0)}}ja(t){var e;this.qa.appendChild(t),(null===(e=this.ra)||void 0===e?void 0:e.isVisible())&&(this.hideTypingIndicator(),this.showTypingIndicator())}fa(){const t=this.Ka.element;ni((()=>{t&&(t.scrollTop=t.scrollHeight)}),$t.CHAT_SCROLL_DELAY)}tc(t){return(null==t?void 0:t.length)?new Promise((e=>{this.Fe.clientAuthEnabled&&this.Fe.enableAttachmentSecurity?this.Rr.getAuthToken().then((s=>{this.dc(t,s.token),e(),this.fa()})).catch((()=>{this.dc(t),e(),this.fa()})):(this.dc(t),e(),this.fa())})):Promise.resolve()}mc(t,e){var s;const i=this.Fe.icons;(null===(s=t.messagePayload.channelExtensions)||void 0===s?void 0:s.agentSession)||(t.messagePayload.channelExtensions?t.messagePayload.channelExtensions.agentSession=this.la:t.messagePayload.channelExtensions={agentSession:this.la}),!this.la.avatarImage&&i.avatarBot&&e.appendChild(this.gc());const r=this.os.createTextDiv(["agent-name"]);return r.title=this.la.name,r.innerHTML=this.la.name,r.setAttribute("aria-hidden","true"),this.la.nameTextColor&&(r.style.color=this.la.nameTextColor),r}gc(){const t=this.la||{},e=t.name.split(" ").filter((t=>t));let s=e[0][0];return e.length>1&&(s+=e[e.length-1][0]),this.Ra(s.toUpperCase(),t.name,!0)}pa(){if(this.Fe.showTypingIndicator){const t=this.la||{},e=this.Fe.icons,s=this.Un;e.avatarBot&&(!t.avatarImage&&t.name?this.ra.updateTypingCueIcon(this.gc()):this.ra.updateTypingCueIcon(this.Ra(t.avatarImage||e.avatarBot,s.avatarAgent||s.avatarBot)))}}Ra(t,e,s=!1){const i=this.os,r=i.createDiv(["icon-wrapper",s?"agent-avatar":""]),o=this.la||{};let n;return s?(n=i.createTextDiv(["agent-icon"]),n.innerText=t,o.avatarTextColor&&(n.style.color=o.avatarTextColor),o.avatarBackgroundColor&&(r.style.background=o.avatarBackgroundColor)):n=i.createImageIcon({icon:t,iconCss:["message-icon"]}),r.appendChild(n),r.setAttribute("aria-label",e),r}fc(t){const e=(0,a.formatDate)(t||new Date,{pattern:this.Fe.timestampFormat,locale:this.Dn}),s=this.os.createTextDiv(["message-date"]);return s.setAttribute("aria-live","off"),s.setAttribute("aria-hidden","true"),s.innerText=`${e}`,s}dc(t,e){const s=this.os,r={locale:this.Dn,webviewLinkHandler:this.Aa,webCore:this.Rr,onMessageActionClicked:this.onMessageActionClicked.bind(this)};(null==e?void 0:e.length)&&(r.authToken=e,r.uri=this.Fe.URI),t.forEach((t=>{var e,o,n,a,c;const h=ke.fromMessage(this.Fe,this.os,t,r);if(!h)return;if(h instanceof Gt){const e=t.messagePayload;switch(e.streamState){case"start":this.sa.disable(),this.Ia=h;break;case"running":if(this.Ia)return this.Ia.update(e),clearTimeout(this.bc),void(this.bc=ni((()=>{this.sa.disable(!1),this.Ia=null}),this.Nn));this.sa.disable(),this.Ia=h;break;case"end":if(clearTimeout(this.bc),this.sa.disable(!1),this.Ia)return this.Ia.update(e),void(this.Ia=null)}}else this.Ia=null,clearTimeout(this.bc);const l=ve(t)?i.SenderType.Skill:i.SenderType.User,p=this.vc(t.messagePayload,l),u=p||this.wc(t,l);let d;if(h.msgId=t.msgId,this.za=l,this.ac=Date.now(),this.qn=t.messagePayload.globalActions&&0!==t.messagePayload.globalActions.length,this.xc=(null===(o=null===(e=t.messagePayload.channelExtensions)||void 0===e?void 0:e.agentSession)||void 0===o?void 0:o.name)||"",ve(t)&&(this.kc=t.source),u||(d=s.createDiv(["message-block","flex"]),this.yc=d),h.onActionClick=this.onMessageActionClicked.bind(this),void 0!==h.ratingId&&(this._c=h),ve(t)){this.En?this.zc(h):this.skillMessages.push(h);const e=we(t);if(this.Fn.indexOf(e)>=0)return;this.Fn.push(e),t.source===i.SkillMessageSource.Agent?((null===(n=t.messagePayload.channelExtensions)||void 0===n?void 0:n.agentName)&&this.setAgentDetails({name:t.messagePayload.channelExtensions.agentName,avatarImage:this.Fe.icons.avatarAgent,nameTextColor:null,avatarTextColor:null,avatarBackgroundColor:null}),(null===(a=t.messagePayload.channelExtensions)||void 0===a?void 0:a.agentSession)&&this.setAgentDetails(t.messagePayload.channelExtensions.agentSession)):(this.Gn.removeItem(this.ha),this.la=null),this.ca(h)}else if(this._c){const e=t;if(e.messagePayload.type===i.MessageType.Text||e.messagePayload.type===i.MessageType.Postback){const t=e.messagePayload;this._c.highlightRating(t.text)}this._c=null}this.oa(t.date||new Date),d&&(this.Mc(t,d),this.ja(d));const m=this.yc.querySelector('[class*="message-list"]'),g=this.Cc(t,h,m);if(g){if(t.messagePayload.type===i.MessageType.Card){const t=m.querySelectorAll('[class*="message-bubble"]');if(t.length){t[t.length-1].classList.add(`${this.ei}-before-card`)}}p&&m.lastElementChild?null===(c=m.lastElementChild)||void 0===c||c.replaceWith(g):m.appendChild(g),h instanceof Nt&&h.setCardsScrollDirection()}this.na(l)}))}vc(t,e){var s,r;if(e===i.SenderType.Skill&&(null===(s=this.yc)||void 0===s?void 0:s.className.includes(`${this.ei}-left`))){const e=null===(r=t.channelExtensions)||void 0===r?void 0:r.replaceMessage;return!0===e||e&&"true"===(null==e?void 0:e.toLowerCase())}return!1}wc(t,e){var s,r;if(!(Date.now()-this.ac<1e4))return!1;if(ve(t)&&t.source===i.SkillMessageSource.Agent&&(null===(s=t.messagePayload.channelExtensions)||void 0===s?void 0:s.agentSession)){const e=null===(r=t.messagePayload.channelExtensions)||void 0===r?void 0:r.agentSession;return this.xc===e.name}return!(this.za!==e||ve(t)&&t.source!==this.kc||this.qn)}Mc(t,e){const s=this.Fe.icons,r=this.Un,o=this.os,n=this.la||{};let a,c,h;if(ve(t)){if(t.source===i.SkillMessageSource.Agent?(a=n.name&&this.mc(t,e),c=s.avatarBot&&(n.avatarImage||!n.name)&&(n.avatarImage||s.avatarAgent||s.avatarBot),h=r.agentMessage.replace("{0}",`${n.name||r.agent}`)):(this.kc===i.SkillMessageSource.Agent&&this.Fe.showTypingIndicator&&this.ra.resetTypingCueIcon(),c=s.avatarBot,h=r.skillMessage),o.addCSSClass(e,"left"),c){const s=this.Ra(c,t.source===i.SkillMessageSource.Agent&&r.avatarAgent||r.avatarBot);s.style.marginTop=t.source===i.SkillMessageSource.Agent&&n.name&&"16px",e.appendChild(s)}}else o.addCSSClass(e,"right"),h=r.userMessage,s.avatarUser&&e.appendChild(this.Ra(s.avatarUser,r.avatarUser));const l=o.createDiv(["messages-wrapper","flex","col"]);a&&l.appendChild(a);const p=this.os.createTextSpan(["screen-reader-only"]);p.innerText=h,l.appendChild(p);const u=o.createDiv(["message-list","flex","col"]);if(l.appendChild(u),this.Fe.enableTimestamp&&"absolute"===this.Fe.timestampMode){const e=this.fc(t.date);l.appendChild(e)}e.appendChild(l)}Cc(t,e,s){const i=this.Fe.delegate;if(i&&i.render){const e=this.os.createDiv(["message"]);e.id=t.msgId,e.lang=this.Fe.locale,s.appendChild(e);if(i.render(t))return null;e.remove()}return e.render()}oa(t){(0,a.isSameDay)(this.Wa,t)||(this.Wa=new Date(t),this.ja(this.Sc(this.Wa)))}Sc(t){const e=this.os.createTextDiv(["timestamp-header"]);return e.textContent=(0,a.formatDate)(t,{pattern:this.Fe.timestampFormat,locale:this.Dn}),this.Ba=e,e}na(t){this.$c||(this.$c=this.aa.render()),this.$c.remove(),this.aa.refresh(t),this.ja(this.$c)}ca(t){t.hasActions()&&ni((()=>{t.focusFirstAction()}),290)}lc(t,e,s){const i=document.querySelector(`#${t}`);if(i){const t=this.os.createDiv(s);t.appendChild(i),e.appendChild(t)}else this.Bs.error(`Could not find element with ID '${t}'. No element embedded to the chat conversation pane.`)}Si(t,e=!1){const s=function(t){const e=document.querySelector(".oda-chat-wrapper");return getComputedStyle(e).getPropertyValue(t)}("--color-visualizer"),o=this.Un;e||(this.ba(),this.Ai.trigger(r.CLICK_VOICE_TOGGLE,t)),this.Fe.enableSpeech&&(t?(this.Tc(),this.Fe.speechLocale&&!(0,i.isValidLocale)(this.Fe.speechLocale)?this.$a(o.errorSpeechUnsupportedLocale,V):this.Rr.startRecognition({onRecognitionText:this.Ac.bind(this),onVisualData:t=>{this.sa.updateVisualizer(t,s)}}).then((()=>{e&&this.sa.setRecognitionRequested(e),this.sa.setVoiceRecording(!0),this.fa()})).catch((t=>{this.sa.setVoiceRecording(!1);let e="";switch(t.message){case i.CoreError.RecognitionMultipleConnection:e=o.errorSpeechMultipleConnection;break;case i.CoreError.RecognitionNotReady:e=o.errorSpeechInvalidUrl;break;case i.CoreError.RecognitionProcessingFailure:e=o.errorSpeechTooMuchTimeout;break;default:e=o.errorSpeechUnavailable}this.$a(e,V)}))):(this.Rr.stopRecognition(),this.sa.setVoiceRecording(!1)))}Ac(t){if(t)switch(t.type){case"error":this.Bs.error("Failed to recognize voice",t.text),t.text===i.CoreError.RecognitionTooMuchSpeechTimeout&&this.$a(this.Un.errorSpeechTooMuchTimeout,V),this.sa.setVoiceRecording(!1);break;case"final":let e=t.text;e.length>0?(this.speechFinalResult&&(e=`${this.speechFinalResult.text} ${e}`),this.sa.setUserInputText(e),this.Fe.enableSpeechAutoSend?ni((()=>{const s=(0,i.buildUserTextMessage)(e,t.requestId);this.sendMessage(s).then((()=>{this.sa.setUserInputText("")}))}),this.$n):this.speechFinalResult={speechId:t.requestId,text:e},this.sa.setVoiceRecording(!1)):this.sa.setUserInputText(this.speechFinalResult.text);break;case"partial":let s=t.text;s.length>0&&(this.speechFinalResult&&(s=`${this.speechFinalResult.text} ${s}`),this.sa.setUserInputText(s))}}Oc(t){switch(this.Fe.disablePastActions){case"all":t.forEach((t=>{t.disableActions()}));break;case"postback":t.forEach((t=>{t.disablePostbacks()}))}}Ic(){this.Oc(this.skillMessages)}zc(t){("none"===this.Fe.disablePastActions?this.skillMessages:this.In).push(t)}Ea(){this.Oc(this.In),this.In=[]}cc(){("none"===this.Fe.disablePastActions?this.skillMessages:this.In).forEach((t=>{t.enablePostbacks()}))}nc(){("none"===this.Fe.disablePastActions?this.skillMessages:this.In).forEach((t=>{t.disablePostbacks()}))}ya(t=!1){var e;let s=!1;for((null===(e=this.ra)||void 0===e?void 0:e.isVisible())&&(s=!0,this.hideTypingIndicator());this.qa.firstChild;)this.qa.removeChild(this.qa.lastChild);s&&this.showTypingIndicator(),this.Hn=!0,this.Wa=null,this.ba(),t||this.Ai.trigger(r.CLICK_ERASE)}Jn(){const{userId:t,channelId:e}=this.Fe;si&&(this.oc(),this.Ec=new si(`${t}-${e}`),this.Ec.onmessage=this.Lc.bind(this))}oc(){this.Ec&&(this.Ec.close(),this.Ec=null)}Pc(t){if(this.Ec){const e={type:"message",message:t};if(ve(t)){const s=we(t);if(this.Fn.indexOf(s)>=0)return;e.digest=s}this.Ec.postMessage(e)}}_a(t){this.Ec&&this.Ec.postMessage(t)}Lc(t){const e=t.data;switch(e.type){case"message":const t=e.message.messagePayload;if(t.type===i.MessageType.Status){const e=t;return void("RESPONDING"===e.status?this.showTypingIndicator():"LISTENING"===e.status&&this.hideTypingIndicator())}if(t.type===i.MessageType.SessionClosed)return void this._n();if(e.digest){if(this.Fn.indexOf(e.digest)>=0)return;this.zn(e.message)}else this.Mn(e.message),this.Ea(),this.showTypingIndicator();this.hideTypingIndicator(),this.tc([e.message]);break;case"actionClearHistory":this.ya();break;case"actionLanguage":this.Ua.setTag(e.tag,!1)}}$a(t,e){We(this.Ka.element,this.os.getBanner({icon:e,text:t,closeText:this.Un.webViewErrorInfoDismiss,closeIcon:this.Fe.icons.close,autoClose:!0}))}Tc(){document.querySelectorAll(`.${this.ei}-prompt-banner-close-button`).forEach((t=>{t.click()}))}Qn(t=!0){window.clearTimeout(this.ec),window.clearInterval(this.sc),window.clearTimeout(this.ic),t?(this.hideTypingIndicator(),this.ra.setAutoTimeout(!0)):(this.ra.setAutoTimeout(!1),this.showTypingIndicator())}ea(t){const e=this.Fe.delegate;if(this.Bs.debug("onMessageReceived",t),this.fa(),this.Vn=!0,this.Hn=!1,this.Fe.enableDefaultClientResponse&&(t.source===i.SkillMessageSource.Agent?this.Zn=!1:this.Zn||(this.Zn=!0)),t){if(e&&e.beforeDisplay&&(0,a.isFunction)(e.beforeDisplay)&&li(t)){let s=JSON.parse(JSON.stringify(t));try{s=e.beforeDisplay(s)}catch(t){this.Bs.error(t)}if(!s)return;(0,i.isValidMessage)(s)?t=s:this.Bs.error("The generated delegate message is invalid. Displaying original message instead.")}switch(this.zn(t),this.Pc(t),t.messagePayload.type){case i.MessageType.Status:{const e=t.messagePayload;"RESPONDING"===e.status?this.showTypingIndicator():"LISTENING"===e.status&&this.hideTypingIndicator();break}case i.MessageType.SessionClosed:this._n();break;case i.MessageType.TextStream:{this.tc([t]);const e=t.messagePayload;if("end"!==e.streamState)this.Qa(t),this.jc=e.text;else{if(!this.Ln){const s=this.jc;if(s.length){const i=e.text.lastIndexOf(s);if(i>=0){const r=e.text.substring(i+s.length);e.text=r,this.Qa(t)}}}this.Da(t)}this.isOpen||this.updateNotificationBadge(++this.On);break}default:this.tc([t]),this.Qa(t),this.Da(t),this.isOpen||this.updateNotificationBadge(++this.On)}this.Qn(Boolean(t.endOfTurn))}}Pa(t){this.Da(t),this.fa(),t&&(this.Pc(t),t.messagePayload&&ai.indexOf(t.messagePayload.type)<0&&(this.isOpen||this.updateNotificationBadge(++this.On),this.tc([t])))}wa(t){t||this.ba(),this.Ln=!t}ta(t){return this.ye=t,this.Rr.setCurrentThreadId(t),this.En=!1,this.clearConversationHistory(!0),this.tc(this.Tn.filter((e=>e.threadId===t))).then((()=>{this.En=!0,this.za===i.SenderType.Skill?this.Oc(this.skillMessages.slice(0,this.skillMessages.length-1)):this.Ic()}))}rc(){if(this.Fe.enableLocalConversationHistory){const t=this.getMessages();t.length&&(this.En=!1,this.tc(t.slice()).then((()=>{this.En=!0,this.Ic(),this.aa&&(this.aa.setRelativeTime(new Date(t[t.length-1].date)),this.$c=this.aa.render(),this.ja(this.$c)),this.Fe.showPrevConvStatus&&(this.Za=this.os.createTextDiv(["hr","flex"]),this.Za.innerText=this.Un.previousChats,this.ja(this.Za))})))}}Kn(){var t;if(this.Rr.isConnected()&&this.jn&&(this.Ua&&(this.Ua.disableComponent(!1),this.Ua.initLanguage()),!this.Pn)){const e=this.Fe.initUserProfile;if(e){const t=this.Fe.sdkMetadata?Object.assign({version:Tt},this.Fe.sdkMetadata):{version:Tt};this.Rr.updateUser(e,{sdkMetadata:t}).then((()=>{this.Pn=!0}))}if(this.Fe.initUserHiddenMessage){const t=this.Fe.initUserHiddenMessage;this.sendMessage(t,{hidden:!0,delegate:!1}).then((()=>{this.Pn=!0}))}if(null===(t=this.Fe.deviceToken)||void 0===t?void 0:t.length){const t=(0,a.getDeviceType)();this.Rr.sendDeviceToken(this.Fe.deviceToken,this.Fe.deviceType||t).then((()=>{this.Pn=!0}))}}}Qa(t){this.Ln||this.Rr.speakTTS(t,this.Un)}ba(){this.Rr.cancelTTS()}Ti(t,e){this.getAgentDetails()&&this.Rr.sendUserTypingStatus(t,e)}ma(t){if(t.hotkeys){const e=new Bs(t);e.setWidget(this.chatWidgetDiv);const s=t.hotkeys;Object.keys(s).forEach((t=>{const i=this.Rn.get(t);i&&e.add(s[t],i,"launch"!==t)})),this.ka=e}}Sa(t,e){const s=document.getElementsByClassName(`${this.ei}-${t}`);for(const t of Array.from(s))for(const[s,i]of Object.entries(e))t.style[s]=i}Ii(t,e){this.Rn.set(t,e)}}const li=t=>{let e=!0;const s=t.messagePayload;if(s){s.type===i.MessageType.TextStream&&(e=!1)}return e},pi=()=>Promise.reject(Error("TextStreamProgress"));var ui=s(168);const di="none",mi="full-size";class gi extends qe{constructor(t,e,s,r,o,n,a,c,h){super(),this.Fe=t,this.Hc=e,this.Vc=s,this.Fc=r,this.Nc=o,this.Rc=n,this.Rr=a,this.Dc=c,this.Ai=h,this.Bs=new kt("ContextualWidgetComponent"),this.Uc=!1,this.ei=t.name,this.Ge={type:i.MessageType.Text,text:"",globalActions:[{type:i.ActionType.Postback,label:"Global1",postback:{}},{type:i.ActionType.Postback,label:"Global2",postback:{}},{type:i.ActionType.Postback,label:"Global3",postback:{}},{type:i.ActionType.Postback,label:"Global4",postback:{}}]},this.threadId=`${i.ContextSource.UIWidget}:${this.Fc||""}-${this.Vc||""}`,this.Bc=this.Fe.sdkMetadata?Object.assign({version:Tt},this.Fe.sdkMetadata):{version:Tt},this.Fe.icons=Object.assign(Object.assign({},this.Fe.icons),{logo:W});const{uploadFile:l,getSuggestions:p,Si:u,ia:d,Ti:m,Ii:g}=this.Dc;this.sa=new ls(e,this.sendMessage.bind(this),l.bind(c),Object.assign(Object.assign({},this.Fe),{enableAttachment:!1}),p.bind(c),u.bind(c),d.bind(c),m.bind(c),this.Ai,c,g.bind(c)),this.contextualElem=document.getElementById(this.Vc),this.Wc=this.contextualElem.querySelector("input, textarea"),this.Zc=[{type:i.ActionType.Postback,label:"Show more",postback:{showMore:!0}}],this.qc=!1,this.Gc=!1,this.Yc=!1,this.Jc=!0,this.Kc={webCore:a,onMessageActionClicked:this.Ne.bind(this)}}render(){const t=this.Hc,e=t.createDiv(["widget-wrapper"]);this.element=t.createDiv(["contextual-widget"]),this.element.id=this.threadId;const s=t.createDiv(["container","none"]);this.appendToElement(s),e.appendChild(s),this.Xc=s;const i=this.contextualElem.parentNode,r=t.createDiv(["contextual-widget-wrapper"]);i.replaceChild(r,this.contextualElem),r.appendChild(this.contextualElem),document.body.appendChild(e),this.contextualElem.parentElement.insertBefore(e,this.contextualElem);const o=t.createDiv([]);this.Qc=t.createDiv(["widget","flex","col"]),this.Qc.setAttribute("role","region"),this.Qc.setAttribute("aria-labelledby",`${this.ei}-title`);const n=t.createDiv(["header","flex"]),a=t.createDiv(["header-info-wrapper"]),c=this.Fe.i18n[this.Fe.locale].chatTitle,h=this.Fe.icons;if(!("logo"in h)||h.logo){const e=t.createImageIcon({icon:h.logo||M,iconCss:["logo"]});n.appendChild(e)}if(c){const e=t.createTextDiv(["title"]);e.id=`${this.ei}-contextual-title`,e.innerText=c,e.title=c,a.appendChild(e)}n.appendChild(a);const l=t.createIconButton({css:["start-over-button",di],icon:q,iconCss:[],title:"Start Again"});l.onclick=()=>{this.Wc?this.Wc.value="":this.Bs.error("The input element is not found for clearing the filled-in text."),this.Jc=!0,this.Uc=!0,t.addCSSClass(l,di),this.th()},n.appendChild(l),this.eh=l;const p=t.createIconButton({css:["close-button"],icon:h.close||g,iconCss:[],title:"close"});p.onclick=this.sh.bind(this),n.appendChild(p),this.Qc.appendChild(n),this.ih=t.createDiv(["widget-content"]),this.Qc.appendChild(this.ih),this.sa.render(),this.sa.disable(!1),this.Qc.appendChild(this.sa.element),t.addCSSClass(o,"open"),o.appendChild(this.Qc),t.addCSSClass(this.element,"wrapper",this.Fe.theme),this.element.appendChild(o),this.Ge.globalActions&&(this.rh=this.Ge.globalActions),this.oh(!0)}sendMessage(t,e=!0){return this.Ia?pi():("string"==typeof t&&(t=(0,i.buildUserTextMessage)(t)),this.sa.focusTextArea(),t&&this.Rr.sendMessage(t,{sdkMetadata:this.Bc,threadId:this.threadId}).then((()=>{this.Yc=!1,this.Hc.removeCSSClass(this.eh,di),e&&this.nh()})))}onMessageReceived(t){var e,s;const r=this.Fe,o=this.Wc,n=this.Hc;if(this.Gc=!1,this.qc||(n.addCSSClass(this.sa.element,"enabled"),this.qc=!0),t.messagePayload.llmGenerated){const e=ke.fromMessage(r,n,t,this.Kc);if(!e)return;if(this.Yc=!0,e instanceof Gt){const s=t.messagePayload;switch(s.streamState){case"start":return this.sa.disable(),e.isCoPilot=!0,e.showDone=this.ah.bind(this),void(this.lh?this.lh(s):o?(e.textElement=o,e.update(s),this.Ia=e):this.Bs.error("The input element is not found for filling in the generated text."));case"running":return void(this.lh?this.lh(s):this.Ia.update(s));case"end":this.sa.disable(!1),this.lh?(this.lh(s),this.ah()):(this.Ia.update(s),this.Ia=null),this.Jc=!1,s.text="",this.Cc(t)}}else if(this.Ia=null,this.Jc=!1,e instanceof Ut){const e=t.messagePayload;this.lh?this.lh(e):(o.innerHTML=(0,ui.convertBreakTagsToNewLines)(e.text),e.text="",this.Cc(t)),this.sh()}}else if(null===(e=t.messagePayload.channelExtensions)||void 0===e?void 0:e.showInDialog){const e=n.createDiv(["wrapper","popup-content-wrapper"]),s=n.createDiv(["popup-dialog"]),i=ke.fromMessage(r,n,t,this.Kc);i.onActionClick=this.Ne.bind(this),s.appendChild(i.render()),e.appendChild(s);const o=i.actionsWrapper;if(o){const t=o.children;for(let s=0;s<t.length;s++)t[s].addEventListener("click",(()=>e.remove()))}e.onclick=t=>{s.contains(t.target)||e.remove()},document.body.appendChild(e),this.Jc=!1,this.sh()}else if(this.Jc=!1,t.messagePayload.type===i.MessageType.Error){if(this.Gc=!0,null===(s=this.ih.firstChild)||void 0===s||s.remove(),!this.ph){const t=n.createDiv(["error-message"]);t.appendChild(n.createImageIcon({icon:Z,iconCss:["error-icon"]}));const e=n.createDiv(["error-info"]),s=n.createTextDiv(["error-text"]),i=n.createTextDiv(["reset-button"]);i.onclick=()=>{this.Gc=!1,this.Jc=!0,this.th()},s.innerText="Something went wrong",i.innerText="Start over",e.appendChild(s),e.appendChild(i),t.appendChild(e),this.ph=t}this.ih.appendChild(this.ph),this.th()}else this.Cc(t),this.showFullSizeWidget()}addText(t){return this.Ge.text=t,this}addAction(t,e,s=!1){return this.Zc.push({type:i.ActionType.Postback,label:t,postback:{actionId:e,generate:s}}),this}addFieldInputParameter(t,e,s){return this.Zc.forEach((i=>{const r=i.postback;r.actionId===t&&(r.fieldInputParameters||(r.fieldInputParameters={}),r.fieldInputParameters[e]=s)})),this}addAdditionalInputParameter(t,e,s){return this.Zc.forEach((i=>{const r=i.postback;r.actionId===t&&(r.additionalInputParameters||(r.additionalInputParameters={}),r.additionalInputParameters[e]=s)})),this}createWidget(){const t=this.contextualElem;return this.element||this.render(),this.Nc&&t.addEventListener("focus",(()=>{this.showWidget()})),this}showWidget(){const t=this.Rc;return Object.keys(t).filter((t=>t!==this.threadId)).forEach((e=>{t[e].hideWidget()})),this.Hc.removeCSSClass(this.Xc,di),this}collapseWidget(){return this.sh(),this}hideWidget(){return this.Hc.addCSSClass(this.Xc,di),this}startWidgetInteraction(t){return this.uh(this.dh(t)),this}onGeneratedText(t){return this.lh=t,this}Cc(t){var e;const s=ke.fromMessage(Object.assign(Object.assign({},this.Fe),{actionsLayout:"horizontal",globalActionsLayout:"horizontal"}),this.Hc,t,this.Kc);s.onActionClick=this.Ne.bind(this),null===(e=this.ih.firstChild)||void 0===e||e.remove(),this.ih.appendChild(s.render())}oh(t=!1){this.Jc&&(t?(1===this.Zc.length?this.Ge.actions=this.Zc.slice(0):this.Ge.actions=this.Zc.slice(0,2).reverse(),this.Ge.globalActions=[]):(this.Ge.actions=this.Zc.slice(1),this.rh&&(this.Ge.globalActions=this.rh.slice(0))),this.Cc({messagePayload:this.Ge}))}sh(){const t=this.Hc;if(!this.mh){const e=t.createDiv(["minimum-size","contextual-widget","wrapper"]),s=t.createIconButton({css:[],icon:B,iconCss:[],title:"open"}),r=t.createIconButton({css:[],icon:U,iconCss:[],title:"like"}),o=t.createIconButton({css:[],icon:D,iconCss:[],title:"dislike"});s.onclick=()=>{this.Jc||this.Gc?this.th():this.showFullSizeWidget()},r.onclick=()=>{this.sendMessage((0,i.buildPostbackMessage)({postback:{rating:"positive",feedbackType:"llm"},type:i.ActionType.Postback}),!1)},o.onclick=()=>{this.sendMessage((0,i.buildPostbackMessage)({postback:{rating:"negative",feedbackType:"llm"},type:i.ActionType.Postback}),!1)},e.appendChild(s),e.appendChild(r),e.appendChild(o),this.Xc.appendChild(e),this.mh=e}t.removeCSSClass(this.element,mi),t.addCSSClass(this.element,di),this.gh&&t.addCSSClass(this.gh,di),this.fh&&t.addCSSClass(this.fh,di),t.removeCSSClass(this.mh,di),this.Yc?t.removeCSSClass(this.mh,"no-feedback"):t.addCSSClass(this.mh,"no-feedback")}th(){const t=this.Hc;this.mh&&t.addCSSClass(this.mh,di),this.gh&&t.addCSSClass(this.gh,di),this.fh&&t.addCSSClass(this.fh,di),t.removeCSSClass(this.element,mi),t.removeCSSClass(this.element,di),this.oh(!0),this.Yc=!1}showFullSizeWidget(){const t=this.Hc;this.mh&&t.addCSSClass(this.mh,di),this.gh&&t.addCSSClass(this.gh,di),this.fh&&t.addCSSClass(this.fh,di),t.addCSSClass(this.element,di),this.oh(),t.addCSSClass(this.element,mi)}nh(){const t=this.Hc;if(!this.gh){const e=t.createDiv(["generate-spinner"]),s=t.createTextDiv(["generate-text"]);s.innerText="Generating...",e.appendChild(t.createImageIcon({icon:R,iconCss:["generate-icon","spin"]}));const i=t.createIconButton({css:["close-button",di],icon:g,iconCss:[],title:"close"});i.onclick=this.sh.bind(this),e.appendChild(s),e.appendChild(i),this.Xc.appendChild(e),this.gh=e}this.mh&&t.addCSSClass(this.mh,di),this.fh&&t.addCSSClass(this.fh,di),t.removeCSSClass(this.element,mi),t.addCSSClass(this.element,di),t.removeCSSClass(this.gh,di)}ah(){const t=this.Hc;if(!this.fh){const e=t.createDiv(["generate-spinner"]),s=t.createTextDiv(["generate-text"]);s.innerText="Done",e.appendChild(t.createImageIcon({icon:N,iconCss:["generate-icon"]})),e.appendChild(s),this.Xc.appendChild(e),this.fh=e}this.mh&&t.addCSSClass(this.mh,di),t.addCSSClass(this.gh,di),t.removeCSSClass(this.fh,di),t.removeCSSClass(this.element,mi),t.addCSSClass(this.element,di),setTimeout(this.sh.bind(this),3e3)}Ne(t){switch(t.type){case i.ActionType.Postback:t.getPayload().then((e=>{(null==e?void 0:e.generate)?this.uh(Object.assign(Object.assign({},(0,ui.getFieldInputValues)(e.fieldInputParameters)),e.additionalInputParameters)):(null==e?void 0:e.showMore)?this.showFullSizeWidget():this.sendMessage((0,i.buildPostbackMessage)({postback:e,text:t.label,type:i.MessageType.Postback}))}));break;case i.ActionType.SubmitForm:const e=t.messageComponent;if(!e.validateForm())break;t.getPayload().then((t=>{const s={postback:t,submittedFields:e.getSubmittedFields(),type:i.MessageType.FormSubmission};t||delete s.postback,this.sendMessage((0,i.buildUserMessage)(s))}))}}uh(t){this.sendMessage({messagePayload:{type:i.MessageType.UpdateApplicationContextCommand,source:i.ContextSource.UIWidget,context:this.Fc,properties:t,reset:this.Uc}})}dh(t){let e;return this.Zc.forEach((s=>{const i=s.postback,{fieldInputParameters:r,additionalInputParameters:o}=i;i.actionId===t&&(e=Object.assign(Object.assign({},(0,ui.getFieldInputValues)(r)),o))})),e}}},420:function(t,e,s){s.r(e),s.d(e,{redwoodStyles:function(){return i}});const i='@keyframes scale-in-center{0%{opacity:1;transform:scale(0)}100%{opacity:1;transform:scale(1)}}@keyframes scale-out-center{0%{display:flex;opacity:1;transform:scale(1)}100%{display:none;opacity:1;transform:scale(0)}}@keyframes scale-in-br{0%{opacity:1;transform:scale(0);transform-origin:100% 100%}100%{opacity:1;transform:scale(1);transform-origin:100% 100%}}@keyframes scale-in-bl{0%{opacity:1;transform:scale(0);transform-origin:0 100%}100%{opacity:1;transform:scale(1);transform-origin:0 100%}}@keyframes scale-in-tl{0%{opacity:1;transform:scale(0);transform-origin:0 0}100%{opacity:1;transform:scale(1);transform-origin:0 0}}@keyframes scale-in-tr{0%{opacity:1;transform:scale(0);transform-origin:100% 0}100%{opacity:1;transform:scale(1);transform-origin:100% 0}}@keyframes scale-out-br{0%{opacity:1;transform:scale(1);transform-origin:100% 100%}99%{opacity:1;transform:scale(0.01);transform-origin:100% 100%}100%{display:none;opacity:1;transform:scale(0);transform-origin:100% 100%}}@keyframes scale-out-bl{0%{opacity:1;transform:scale(1);transform-origin:0 100%}99%{opacity:1;transform:scale(0.01);transform-origin:0 100%}100%{display:none;opacity:1;transform:scale(0);transform-origin:0 100%}}@keyframes popup-suggestion{0%{box-shadow:0 0 0 0 rgba(0,0,0,0),0 0 0 0 rgba(0,0,0,0);transform:scaleY(0.4);transform-origin:0 100%}100%{box-shadow:0 -12px 15px -12px rgba(0,0,0,.35);transform:scaleY(1);transform-origin:0 100%}}@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes banner-in{0%{transform:translateY(-20px);opacity:0}100%{transform:translateY(0);opacity:1}}@keyframes banner-out{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-20px);opacity:0}}@keyframes typing-cue{0%{opacity:1}30%{opacity:.1}50%{opacity:1}100%{opacity:.1}}@keyframes oda-chat-webview-slide-out-bottom{0%{transform:translateY(0);opacity:1}95%{opacity:1}100%{transform:translateY(100%);opacity:0}}@keyframes oda-chat-webview-slide-in-bottom{0%{transform:translateY(100%);opacity:0}1%{opacity:1}100%{transform:translateY(0%);opacity:1}}.flex{display:flex;justify-content:space-between;align-items:center}.col{flex-direction:column}.none{display:none !important}.wrapper{--color-branding: #c0533f;--color-launch-icon-background: #c0533f;--color-text: #161513;--color-text-light: #161513;--color-header-background: #F1EFED;--color-header-button-fill: #161513;--color-header-text: #161513;--color-header-button-background-hover: rgba(22, 21, 19, 0.04);--color-header-button-fill-hover: #161513;--color-conversation-background: #F5F4F2;--color-timestamp: rgba(22, 21, 19, 0.65);--color-typing-indicator: #161513;--color-agent-initials: #FFFFFF;--color-agent-avatar-background: #A890B6;--color-agent-name: rgba(22, 21, 19, 0.65);--color-bot-message-background: #FFFFFF;--color-bot-text: #161513;--color-user-message-background: #E4E1DD;--color-user-text: #161513;--color-error-message-background: #FFF8F7;--color-error-border: #DC5C5E;--color-error-title: #D63B25;--color-error-text: #161513;--color-card-background: #FFFFFF;--color-card-nav-button: #FFF;--color-card-nav-button-focus: #FBF9F8;--color-card-nav-button-hover: #FBF9F8;--color-actions-background: #fff;--color-actions-background-focus: rgba(22, 21, 19, 0.04);--color-actions-background-hover: rgba(22, 21, 19, 0.04);--color-actions-border: rgba(22, 21, 19, 0.5);--color-actions-text: #161513;--color-actions-text-focus: #161513;--color-actions-text-hover: #161513;--color-global-actions-background: transparent;--color-global-actions-background-focus: rgba(22, 21, 19, 0.04);--color-global-actions-background-hover: rgba(22, 21, 19, 0.04);--color-global-actions-border: rgba(22, 21, 19, 0.5);--color-global-actions-text: #161513;--color-global-actions-text-focus: #161513;--color-global-actions-text-hover: #161513;--color-primary-actions-background: rgb(49, 45, 42);--color-primary-actions-background-focus: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-actions-background-hover: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-actions-border: transparent;--color-primary-actions-text: #fff;--color-primary-actions-text-focus: #fff;--color-primary-actions-text-hover: #fff;--color-danger-actions-background: rgb(214, 59, 37);--color-danger-actions-background-focus: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-actions-border: transparent;--color-danger-actions-text: #fff;--color-danger-actions-text-focus: #fff;--color-danger-actions-text-hover: #fff;--color-links: #c0533f;--color-user-links: #c0533f;--color-rating-star: #ececec;--color-rating-star-fill: #f0cc71;--color-horizontal-rule-background: #cbc5bf;--color-attachment-placeholder: #e3e1dc;--color-attachment-footer: #fff;--color-attachment-text: #161513;--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-footer-button-background-hover: rgba(22, 21, 19, 0.04);--color-footer-button-fill-hover: #161513;--color-input-background: #fff;--color-input-border: #fff;--color-input-text: #161513;--color-recognition-view-text: #fff;--color-visualizer: #161513;--color-visualizer-container-background: #fff;--color-notification-badge-background: #312d2a;--color-notification-badge-text: #fff;--color-popup-background: #fff;--color-popup-text: #161513;--color-popup-button-background: #fff;--color-popup-button-text: #161513;--color-popup-horizontal-rule: #cbc5bf;--color-popup-item-background-hover: rgba(22, 21, 19, 0.04);--color-table-header-background: #f1efec;--color-table-header-text: #161513;--color-table-background: #fff;--color-table-text: #161513;--color-table-separator: rgba(22, 21, 19, 0.1);--color-table-row-background-hover: rgba(22, 21, 19, 0.04);--color-table-actions-background: transparent;--color-table-actions-background-focus: rgba(22, 21, 19, 0.04);--color-table-actions-background-hover: rgba(22, 21, 19, 0.04);--color-table-actions-border: rgba(22, 21, 19, 0.5);--color-table-actions-text: #161513;--color-table-actions-text-focus: #161513;--color-table-actions-text-hover: #161513;--color-form-header-background: #f1efec;--color-form-header-text: #161513;--color-form-background: #fff;--color-form-text: #161513;--color-form-input-background: #fff;--color-form-input-border: rgba(22, 21, 19, 0.5);--color-form-input-border-focus: rgb(14, 114, 151);--color-form-input-text: #161513;--color-form-label: rgba(22, 21, 19, 0.65);--color-form-error: rgba(179,49,31);--color-form-error-text: rgba(22, 21, 19, 0.65);--color-form-actions-background: transparent;--color-form-actions-background-focus: rgba(22, 21, 19, 0.04);--color-form-actions-background-hover: rgba(22, 21, 19, 0.04);--color-form-actions-border: rgba(22, 21, 19, 0.5);--color-form-actions-text: #161513;--color-form-actions-text-focus: #161513;--color-form-actions-text-hover: #161513;--color-primary-form-actions-background: rgb(49, 45, 42);--color-primary-form-actions-background-focus: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-form-actions-background-hover: rgb(49, 45, 42) linear-gradient(rgb(58, 54, 50), rgb(58, 54, 50));--color-primary-form-actions-border: transparent;--color-primary-form-actions-text: #fff;--color-primary-form-actions-text-focus: #fff;--color-primary-form-actions-text-hover: #fff;--color-danger-form-actions-background: rgb(214, 59, 37);--color-danger-form-actions-background-focus: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-form-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgb(195, 53, 34), rgb(195, 53, 34));--color-danger-form-actions-border: transparent;--color-danger-form-actions-text: #fff;--color-danger-form-actions-text-focus: #fff;--color-danger-form-actions-text-hover: #fff;--width-full-screen: 375px;--widget-max-height: calc(100vh - 60px);--position-top: 0;--position-left: 0;--position-right: 20px;--position-bottom: 20px;position:fixed;box-sizing:border-box;text-transform:none;z-index:10000;color:var(--color-text);font-size:16px;font-family:"Oracle Sans",-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",sans-serif;transition:all .25s ease-in-out;-webkit-font-smoothing:antialiased}.wrapper.classic{--color-branding: #025e7e;--color-launch-icon-background: #025e7e;--color-text: #161513;--color-text-light: #3a3631;--color-header-background: #025e7e;--color-header-button-fill: #fff;--color-header-button-fill-hover: #fff;--color-header-text: #fff;--color-conversation-background: #fff;--color-timestamp: #5b5652;--color-typing-indicator: #227e9e;--color-bot-message-background: #e5f1ff;--color-user-message-background: #ececec;--color-card-background: #e5f1ff;--color-card-nav-button: #4190ac;--color-card-nav-button-focus: #5fa2ba;--color-card-nav-button-hover: #0e7295;--color-actions-background: transparent;--color-actions-background-focus: rgba(14, 114, 149, 0.04);--color-actions-background-hover: rgba(14, 114, 149, 0.04);--color-actions-border: rgb(14, 114, 149);--color-actions-text: rgb(14, 114, 149);--color-actions-text-focus: rgb(14, 114, 149);--color-actions-text-hover: rgb(14, 114, 149);--color-global-actions-background: #fff;--color-global-actions-background-focus: rgba(14, 114, 149, 0.04);--color-global-actions-background-hover: rgba(14, 114, 149, 0.04);--color-global-actions-border: rgb(14, 114, 149);--color-global-actions-text: rgb(14, 114, 149);--color-global-actions-text-focus: rgb(14, 114, 149);--color-global-actions-text-hover: rgb(14, 114, 149);--color-primary-actions-background: rgb(14, 114, 149);--color-primary-actions-background-focus: rgba(14, 114, 149, 0.95);--color-primary-actions-background-hover: rgba(14, 114, 149, 0.95);--color-links: #0e7295;--color-user-links: #0e7295;--color-agent-name: #5b5652;--color-attachment-footer: #e5f1ff;--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-footer-button-fill-hover: #025e7e;--color-visualizer: #025e7e;--color-primary-form-actions-background: rgb(14, 114, 149);--color-primary-form-actions-background-focus: rgba(14, 114, 149, 0.95);--color-primary-form-actions-background-hover: rgba(14, 114, 149, 0.95);--color-notification-badge-background: #9a0007;--color-notification-badge-text: #fff;--color-popup-button-text: #025e7e}.wrapper.redwood-dark{--color-branding: #c0533f;--color-launch-icon-background: #c0533f;--color-text: #161513;--color-text-light: #fcfbfa;--color-header-background: #201e1c;--color-header-button-fill: #fff;--color-header-button-fill-hover: #fff;--color-header-button-background-hover: rgba(255, 255, 255, 0.04);--color-header-text: #fff;--color-conversation-background: #3a3631;--color-timestamp: #fcfbfa;--color-typing-indicator: #fff;--color-bot-message-background: #655f5c;--color-bot-text: #fff;--color-user-message-background: #fff;--color-user-text: #161513;--color-card-background: #655f5c;--color-card-nav-button: #d5b364;--color-card-nav-button-focus: #f7e0a1;--color-card-nav-button-hover: #b39554;--color-actions-background: #655f5c;--color-actions-background-focus: rgba(22, 21, 19, 0.5);--color-actions-background-hover: rgba(22, 21, 19, 0.3);--color-actions-border: #fff;--color-actions-text: #fff;--color-actions-text-focus: #fff;--color-actions-text-hover: #fff;--color-global-actions-background: #3a3631;--color-global-actions-background-focus: rgba(22, 21, 19, 0.3);--color-global-actions-background-hover: rgba(22, 21, 19, 0.3);--color-global-actions-border: #fff;--color-global-actions-text: #fff;--color-global-actions-text-focus: #fff;--color-global-actions-text-hover: #fff;--color-primary-actions-background: #fff;--color-primary-actions-background-focus: #fff linear-gradient(rgb(251, 249, 248), rgb(251, 249, 248));--color-primary-actions-background-hover: #fff linear-gradient(rgb(251, 249, 248), rgb(251, 249, 248));--color-primary-actions-text: #161513;--color-primary-actions-text-focus: #161513;--color-primary-actions-text-hover: #161513;--color-danger-actions-background-focus: rgb(214, 59, 37) linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08));--color-danger-actions-background-hover: rgb(214, 59, 37) linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08));--color-links: #f7e0a1;--color-user-links: #c0533f;--color-agent-name: #fcfbfa;--color-footer-background: #fff;--color-footer-button-fill: #161513;--color-input-background: #fff;--color-input-text: #161513;--color-recognition-view-text: #fff;--color-visualizer-container-background: #fff;--color-notification-badge-background: #312d2a;--color-notification-badge-text: #fff;--color-popup-button-text: #201e1c}.wrapper:not(.embedded):not(.contextual-widget){bottom:var(--position-bottom);left:var(--position-left);top:var(--position-top);right:var(--position-right)}.wrapper *{box-sizing:border-box}.wrapper b{font-weight:700}.wrapper button{position:relative;max-width:100%;padding:9px 16px;margin:0 0 8px;min-height:36px;line-height:16px;font-size:13.75px;font-weight:600;font-family:inherit;border-radius:4px;border-width:thin;border-style:solid;cursor:pointer;overflow:hidden;word-break:break-word;flex-shrink:0}.wrapper button:disabled{opacity:.5;cursor:not-allowed}.wrapper button.icon{width:36px;height:36px;padding:8px;margin:0;margin-inline-start:4px;border:none;border-radius:4px;color:var(--color-text);background-color:rgba(0,0,0,0);justify-content:center}.wrapper button.icon.with-label{width:auto;max-width:200px}.wrapper button.icon.with-label svg,.wrapper button.icon.with-label img{margin-right:4px}.wrapper button.icon.label-only{width:auto;max-width:200px}.wrapper button.icon.label-only svg,.wrapper button.icon.label-only img{display:none}.wrapper button svg,.wrapper button img{width:20px;height:20px;flex-shrink:0}.wrapper .button{position:absolute;right:0;bottom:0;height:48px;width:48px;max-width:unset;padding:0;margin:0;border:none;background-position:center center;background-repeat:no-repeat;cursor:pointer;justify-content:center;align-items:center;z-index:10000;color:var(--color-text);background-color:var(--color-launch-icon-background);border-radius:0;overflow:visible}.wrapper .button svg,.wrapper .button img{height:unset;width:unset;max-width:100%;max-height:100%}.wrapper .button:not(:disabled):hover,.wrapper .button:not(:disabled):focus,.wrapper .button:not(:disabled):active{background-color:var(--color-launch-icon-background)}@media screen and (min-width: 769px){.wrapper .button{height:64px;width:64px}}.wrapper .dialog-wrapper{position:absolute;top:0;left:0;right:0;width:100%;height:100%}.wrapper .dialog-wrapper .prompt-banner-background{position:fixed;background:rgba(0,0,0,.2);height:100%;width:100%;z-index:5}.wrapper .dialog-wrapper .prompt-banner{align-items:center;box-shadow:rgba(0,0,0,.16) 0px 4px 8px 0px;border-radius:6px;display:flex;flex-direction:row;position:absolute;max-width:450px;min-height:48px;max-height:60%;top:30%;left:0;right:0;padding:8px 16px;margin:8px auto;width:calc(100% - 16px);z-index:5;animation:banner-in .2s cubic-bezier(0.22, 0.45, 0.42, 0.92) both;background-color:var(--color-popup-background);flex-direction:column;align-items:flex-start;overflow-y:auto}.wrapper .dialog-wrapper .prompt-banner.prompt-banner-out{animation:banner-out .2s cubic-bezier(0.5, 0.07, 0.68, 0.48) both}.wrapper .dialog-wrapper .prompt-banner .prompt-banner-main-content{margin:16px 0;align-items:flex-start}.wrapper .dialog-wrapper .prompt-banner .prompt-banner-main-content .prompt-banner-icon{margin:4px 16px 0 0}[dir=rtl] .wrapper .dialog-wrapper .prompt-banner .prompt-banner-main-content .prompt-banner-icon{margin:4px 0 0 16px}.wrapper .dialog-wrapper .prompt-banner .prompt-banner-main-content .prompt-banner-text{margin:0 28px 0 0;font-size:18px;font-weight:bold;color:var(--color-popup-text)}[dir=rtl] .wrapper .dialog-wrapper .prompt-banner .prompt-banner-main-content .prompt-banner-text{margin:0 0 0 28px}.wrapper .dialog-wrapper .prompt-banner .prompt-banner-main-content .prompt-banner-description{color:var(--color-popup-text);opacity:.6;font-size:13px;margin:8px 28px 0 0}[dir=rtl] .wrapper .dialog-wrapper .prompt-banner .prompt-banner-main-content .prompt-banner-description{margin:8px 0 0 28px}.wrapper .dialog-wrapper .prompt-banner .prompt-banner-main-content .prompt-banner-label{color:var(--color-popup-text);font-size:large}.wrapper .dialog-wrapper .prompt-banner .prompt-banner-main-content .prompt-banner-input{font-size:medium;min-height:36px;width:100%;margin:0 0 10px 0;padding:10px;color:var(--color-form-input-text);background-color:var(--color-form-actions-background);border:1px solid var(--color-form-input-border);border-radius:4px}.wrapper .dialog-wrapper .prompt-banner .prompt-banner-close-button{position:absolute;border:none;right:16px}[dir=rtl] .wrapper .dialog-wrapper .prompt-banner .prompt-banner-close-button{right:unset;left:16px}.wrapper .dialog-wrapper .prompt-banner .action-wrapper{width:100%;margin:16px 0 6px}.wrapper .dialog-wrapper .prompt-banner .action-wrapper .popup-action{background-color:var(--color-popup-button-background);border-color:var(--color-popup-button-text);color:var(--color-popup-button-text);border-style:solid;margin:0;height:34px;justify-content:center;width:49%}.wrapper .dialog-wrapper .prompt-banner .action-wrapper .popup-action:hover{background-color:var(--color-footer-button-background-hover)}.wrapper .dialog-wrapper .prompt-banner .action-wrapper .popup-action:last-child{margin:0}.wrapper .dialog-wrapper .prompt-banner .action-wrapper .popup-action.filled{background-color:var(--color-popup-button-text);color:var(--color-popup-button-background)}.wrapper .dialog-wrapper .prompt-banner .action-wrapper .popup-action.filled:hover{opacity:.9}.wrapper .dialog-wrapper.end-conversation-prompt .prompt-banner-close-button{display:none}.wrapper .header{height:56px;padding:0 8px;background-color:var(--color-header-background);color:var(--color-header-text)}.wrapper .header .logo{flex:0 0 auto;max-width:100px;height:36px;max-height:36px;overflow:hidden;padding:0}.wrapper .header .header-info-wrapper{flex-direction:column;flex-wrap:nowrap;width:100%;min-width:0;padding:0;margin:0 8px}.wrapper .header .header-info-wrapper .title{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:1.125em;font-weight:700}.wrapper .header .header-info-wrapper .subtitle{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wrapper .header .header-info-wrapper .connection-status{font-weight:bold;font-size:10px;justify-content:center;padding:0;margin:0;text-transform:uppercase;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.wrapper .header .header-gap{flex:auto}.wrapper .header-actions{flex:1 0 auto;justify-content:flex-end;flex-direction:inherit}.wrapper .header-button svg>path{fill:var(--color-header-button-fill)}.wrapper .header-button:not(:disabled):hover,.wrapper .header-button:not(:disabled):focus{background-color:var(--color-header-button-background-hover)}.wrapper .header-button:not(:disabled):hover svg>path,.wrapper .header-button:not(:disabled):focus svg>path{fill:var(--color-header-button-fill-hover)}.wrapper .conversation{display:flex;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;overflow-x:hidden;overflow-y:auto;scroll-behavior:smooth;width:100%;padding:16px}.wrapper .conversation .conversation-pane .message-date,.wrapper .conversation .conversation-pane .relative-timestamp{font-size:12px;margin:8px 0 8px;color:var(--color-timestamp);text-align:start}.wrapper .conversation .conversation-pane .message-date.right,.wrapper .conversation .conversation-pane .relative-timestamp.right{text-align:end}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal{margin-inline-start:-56px}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .message-global-actions{margin-inline-start:56px}.wrapper .conversation .conversation-pane.bot-icon .message.card-message-horizontal .card-message-content .card-message-cards{padding-inline-start:56px}.wrapper .conversation .conversation-pane.bot-icon .relative-timestamp.left{margin-inline-start:40px}.wrapper .conversation .conversation-pane.user-icon .relative-timestamp.right{margin-inline-end:40px}.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper{max-width:calc(.9*(100% - 40px))}.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:calc(.9*(100% - 72px))}.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper{max-width:calc(.9*(100% - 80px))}.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-global-actions{max-width:calc(.9*(100% - 112px))}.wrapper .timestamp-header{text-align:center;font-size:12px;font-weight:700;color:var(--color-timestamp);margin:16px 0}.wrapper .hr{margin:24px 0;font-size:12px;color:var(--color-horizontal-rule-background)}.wrapper .hr:before{content:"";background-color:var(--color-horizontal-rule-background);height:1px;flex-grow:1;margin-inline-end:10px}.wrapper .hr:after{content:"";background-color:var(--color-horizontal-rule-background);height:1px;flex-grow:1;margin-inline-start:10px}.wrapper .card-actions,.wrapper .form-actions,.wrapper .message-actions,.wrapper .message-global-actions{margin-top:6px;display:flex;align-items:flex-start;justify-content:flex-start;flex-wrap:wrap}.wrapper .card-actions .action-postback.display-link:first-child,.wrapper .form-actions .action-postback.display-link:first-child,.wrapper .message-actions .action-postback.display-link:first-child,.wrapper .message-global-actions .action-postback.display-link:first-child{padding-left:0}.wrapper .card-actions.form-message-actions-col,.wrapper .form-actions.form-message-actions-col,.wrapper .message-actions.form-message-actions-col,.wrapper .message-global-actions.form-message-actions-col{flex-basis:100%;max-width:100%}.wrapper .card-actions:not(.col) .action-postback,.wrapper .form-actions:not(.col) .action-postback,.wrapper .message-actions:not(.col) .action-postback,.wrapper .message-global-actions:not(.col) .action-postback{margin-inline-end:8px}.wrapper .card-actions:not(.col) .action-postback:last-child,.wrapper .form-actions:not(.col) .action-postback:last-child,.wrapper .message-actions:not(.col) .action-postback:last-child,.wrapper .message-global-actions:not(.col) .action-postback:last-child{margin-inline-end:0}.wrapper .action-postback{background:var(--color-actions-background);border-color:var(--color-actions-border);color:var(--color-actions-text);display:flex;flex-direction:row;gap:10px;text-align:start}.wrapper .action-postback:not(:disabled):hover{color:var(--color-actions-text-hover);background-color:var(--color-actions-background-hover)}.wrapper .action-postback:not(:disabled):hover svg>path{fill:var(--color-actions-text-hover)}.wrapper .action-postback:not(:disabled):focus,.wrapper .action-postback:not(:disabled):active{background-color:var(--color-actions-background-focus);color:var(--color-actions-text-focus)}.wrapper .action-postback:not(:disabled):focus svg>path,.wrapper .action-postback:not(:disabled):active svg>path{fill:var(--color-actions-text-focus)}.wrapper .action-postback.primary{background:var(--color-primary-actions-background);color:var(--color-primary-actions-text);border:var(--color-primary-actions-border)}.wrapper .action-postback.primary:not(:disabled):hover{background:var(--color-primary-actions-background-hover);color:var(--color-primary-actions-text-hover)}.wrapper .action-postback.primary:not(:disabled):hover svg>path{fill:var(--color-primary-actions-text-hover)}.wrapper .action-postback.primary:not(:disabled):focus,.wrapper .action-postback.primary:not(:disabled):active{background:var(--color-primary-actions-background-focus);color:var(--color-primary-actions-text-focus)}.wrapper .action-postback.primary:not(:disabled):focus svg>path,.wrapper .action-postback.primary:not(:disabled):active svg>path{fill:var(--color-primary-actions-text-focus)}.wrapper .action-postback.danger{background:var(--color-danger-actions-background);color:var(--color-danger-actions-text);border:var(--color-danger-actions-border)}.wrapper .action-postback.danger:not(:disabled):hover{background:var(--color-danger-actions-background-hover);color:var(--color-danger-actions-text-hover)}.wrapper .action-postback.danger:not(:disabled):hover svg>path{fill:var(--color-danger-actions-text-hover)}.wrapper .action-postback.danger:not(:disabled):focus,.wrapper .action-postback.danger:not(:disabled):active{background:var(--color-danger-actions-background-focus);color:var(--color-danger-actions-text-focus)}.wrapper .action-postback.danger:not(:disabled):focus svg>path,.wrapper .action-postback.danger:not(:disabled):active svg>path{fill:var(--color-danger-actions-text-focus)}.wrapper .action-postback.display-link{outline:1px solid rgba(0,0,0,0);border:none;min-height:unset;background:rgba(0,0,0,0) !important}.wrapper .action-postback.display-link:hover{text-decoration:underline}.wrapper .action-postback.c2k-action{border-radius:0;color:#227e9e !important;border:none;padding:0;min-height:unset;font-size:16px;background:rgba(0,0,0,0) !important;margin-bottom:0}.wrapper .message-global-actions{margin-top:8px}.wrapper .message-global-actions.stars{display:block}.wrapper .message-global-actions button{background:var(--color-global-actions-background);color:var(--color-global-actions-text);border-color:var(--color-global-actions-border)}.wrapper .message-global-actions button:not(:disabled):hover{background-color:var(--color-global-actions-background-hover);color:var(--color-global-actions-text-hover)}.wrapper .message-global-actions button:not(:disabled):hover svg>path{fill:var(--color-global-actions-text-hover)}.wrapper .message-global-actions button:not(:disabled):focus,.wrapper .message-global-actions button:not(:disabled):active{background-color:var(--color-global-actions-background-focus);color:var(--color-global-actions-text-focus)}.wrapper .message-global-actions button:not(:disabled):focus svg>path,.wrapper .message-global-actions button:not(:disabled):active svg>path{fill:var(--color-global-actions-text-focus)}.wrapper .message-bubble{position:relative;display:flex;flex-direction:column;align-items:flex-start;margin:0;padding:6px 16px;color:var(--color-bot-text);background:var(--color-bot-message-background);min-height:32px;line-height:20px;overflow-wrap:break-word;max-width:100%;border-radius:2px 10px 10px 2px;margin-top:2px}.wrapper .message-bubble>*{width:100%}.wrapper .message-bubble.before-card{border-radius:2px 10px 10px 10px}.wrapper .message-bubble .video-wrapper{max-width:100%}.wrapper .message-bubble.error{background-color:var(--color-error-message-background);color:var(--color-error-text);border:1px dashed var(--color-error-border)}.wrapper .message-bubble.error .message-icon path{fill:var(--color-error-title)}.wrapper .message-bubble.error .message-title{color:var(--color-error-title)}.wrapper .message-bubble span.highlight{background-color:rgba(143,191,208,.4)}.wrapper .message-bubble .message-with-icon{display:flex;align-items:flex-start;justify-content:space-between}.wrapper .message-bubble .message-with-icon .message-icon{width:24px;height:24px;align-items:center;margin-inline-end:16px}.wrapper .message-bubble .message-with-icon .message-text{word-break:break-word}.wrapper .message-bubble.message-header{margin-bottom:2px}.wrapper .message-bubble.message-footer{margin-top:2px}.wrapper .message-bubble .message-user-postback>img{max-height:32px;max-width:32px}.wrapper .messages-wrapper{max-width:90%;align-items:flex-start}.wrapper .messages-wrapper .agent-name{position:relative;bottom:3px;max-width:111.1111111111%;height:16px;font-size:12px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--color-agent-name)}.wrapper .messages-wrapper .screen-reader-only{height:1px;left:-20000px;overflow:hidden;position:absolute;top:auto;width:1px}.wrapper .messages-wrapper .message-list{width:100%;align-items:flex-start}.wrapper .messages-wrapper .message-list .message{width:100%;white-space:pre-wrap}.wrapper .messages-wrapper .message-list .message .embeddedAction{padding:2px 6px;border-radius:4px;cursor:pointer;display:inline-block;font-size:12px;font-weight:600;height:20px;line-height:16px;border:1px solid rgba(122,115,110,.2509803922)}.wrapper .messages-wrapper .message-list .message .embeddedAction.display-link{color:var(--color-links);padding:2px 0;outline:1px solid rgba(0,0,0,0);border:none}.wrapper .messages-wrapper .message-list .message .embeddedAction.display-link:hover{text-decoration:underline}.wrapper .messages-wrapper .message-list .message .embeddedAction.display-icon{padding:0;outline:1px solid rgba(0,0,0,0);border:none}.wrapper .messages-wrapper .message-list .message .action-wrapper{display:flex;flex-direction:column;position:relative}.wrapper .messages-wrapper .message-list .message .action-wrapper button:not(:disabled):hover+div>.tooltip{display:block;position:absolute;background-color:var(--color-bot-message-background);max-width:296px;border-radius:2px;box-shadow:0px 1px 4px 0px rgba(0,0,0,.1215686275);padding:8px;z-index:3;font-size:13px;font-weight:400;inset-inline-start:-16px;line-height:20px;margin-top:-4px;overflow-wrap:break-word}.wrapper .messages-wrapper .message-list .message a{color:var(--color-links)}.wrapper .messages-wrapper .message-list .message button.anchor-btn{padding:0}.wrapper .messages-wrapper .message-list .message button.anchor-btn a{display:block;text-decoration:inherit;color:inherit;padding:10px 20px}.wrapper .messages-wrapper .message-list .message button:last-child{margin-bottom:0}.wrapper .messages-wrapper .message-list .message .message-wrapper{display:flex;align-items:flex-start;flex-direction:column;width:100%;max-width:100%}.wrapper .messages-wrapper .message-list .message:first-child .message-bubble:not(.message-footer){margin-top:0}.wrapper .messages-wrapper .message-list .message:first-child .card-message-content:first-child .card-message-cards{margin-top:0}.wrapper .messages-wrapper .message-list .message:last-child .message-bubble:last-child{border-radius:2px 10px 10px 10px}.wrapper .messages-wrapper .message-list .message:last-child .message-bubble:last-child.edit-form-message .form-message-header{border-radius:1px 9px 0 0}.wrapper .messages-wrapper .message-list .message:last-child .message-bubble:last-child.edit-form-message .form-message-item{border-radius:1px 9px 9px 9px}.wrapper .messages-wrapper .message-list .message:last-child .card-message-content:last-child .card-message-cards{margin-bottom:-8px}.wrapper .messages-wrapper .message-list .message.card-message-horizontal{margin-inline-start:-16px;width:100vw}.wrapper .messages-wrapper .message-list .message.card-message-horizontal .message-header,.wrapper .messages-wrapper .message-list .message.card-message-horizontal .message-footer,.wrapper .messages-wrapper .message-list .message.card-message-horizontal .message-global-actions{margin-inline-start:16px;max-width:calc(.9*(100% - 32px))}.wrapper .messages-wrapper .message-list .message.card-message-horizontal .message-header{border-radius:2px 10px 10px 10px}.wrapper .messages-wrapper .message-list .message.card-message-horizontal .card-message-cards{flex-direction:row;overflow-x:auto;padding:0 56px 0 16px}.wrapper .messages-wrapper .message-list .message.card-message-horizontal .card{margin-inline-end:8px}.wrapper .messages-wrapper .message-list .message.card-message-horizontal .next-wrapper,.wrapper .messages-wrapper .message-list .message.card-message-horizontal .prev-wrapper{position:absolute;height:100%;top:0;width:52px;z-index:1}.wrapper .messages-wrapper .message-list .message.card-message-horizontal .next-wrapper{inset-inline-end:0;background:linear-gradient(90deg, rgba(255, 255, 255, 0), var(--color-conversation-background) 60%)}.wrapper .messages-wrapper .message-list .message.card-message-horizontal .prev-wrapper{inset-inline-start:0;background:linear-gradient(90deg, var(--color-conversation-background) 40%, rgba(255, 255, 255, 0))}[dir=rtl] .wrapper .messages-wrapper .message-list .message.card-message-horizontal .next-wrapper{background:linear-gradient(90deg, var(--color-conversation-background) 40%, rgba(255, 255, 255, 0))}[dir=rtl] .wrapper .messages-wrapper .message-list .message.card-message-horizontal .prev-wrapper{background:linear-gradient(90deg, rgba(255, 255, 255, 0), var(--color-conversation-background) 60%)}[dir=rtl] .wrapper .messages-wrapper .message-list .message.card-message-horizontal .next,[dir=rtl] .wrapper .messages-wrapper .message-list .message.card-message-horizontal .previous{transform:rotate(180deg)}.wrapper .messages-wrapper .message-list .message.card-message-horizontal .next,.wrapper .messages-wrapper .message-list .message.card-message-horizontal .previous{position:absolute;z-index:10;width:36px;height:36px;left:8px;padding:0;overflow:hidden;background-color:var(--color-card-nav-button);border:none;box-shadow:0px 2px 4px rgba(0,0,0,.1);top:calc(50% - 18px);justify-content:center}.wrapper .messages-wrapper .message-list .message.card-message-horizontal .next:hover,.wrapper .messages-wrapper .message-list .message.card-message-horizontal .previous:hover{background-color:var(--color-card-nav-button-hover)}.wrapper .messages-wrapper .message-list .message.card-message-horizontal .next:focus,.wrapper .messages-wrapper .message-list .message.card-message-horizontal .next:active,.wrapper .messages-wrapper .message-list .message.card-message-horizontal .previous:focus,.wrapper .messages-wrapper .message-list .message.card-message-horizontal .previous:active{background-color:var(--color-card-nav-button-focus)}.wrapper .message-block{justify-content:flex-start;align-items:flex-start;margin-bottom:8px}.wrapper .message-block.right{flex-direction:row-reverse}.wrapper .message-block.right .icon-wrapper{margin:unset;margin-inline-start:8px}.wrapper .message-block.right .messages-wrapper{align-items:flex-end}.wrapper .message-block.right .messages-wrapper .message a{color:var(--color-user-links)}.wrapper .message-block.right .messages-wrapper .message .message-wrapper{align-items:flex-end}.wrapper .message-block.right .messages-wrapper .message .message-bubble{border-radius:10px 2px 2px 10px}.wrapper .message-block.right .messages-wrapper .message .message-bubble:not(.error){color:var(--color-user-text);background:var(--color-user-message-background)}.wrapper .message-block.right .messages-wrapper .message:last-child .message-bubble:last-child{border-radius:10px 2px 10px 10px}.wrapper .message-block.right .message-date{text-align:right}.wrapper .icon-wrapper{margin-inline-end:8px;width:32px;min-width:32px;height:32px;border-radius:4px;overflow:hidden;z-index:1}.wrapper .icon-wrapper.agent-avatar{background:var(--color-agent-avatar-background);margin-top:16px}.wrapper .icon-wrapper .message-icon{height:32px;max-height:32px;max-width:32px;width:32px;color:var(--color-timestamp);overflow:hidden;text-overflow:ellipsis}.wrapper .icon-wrapper .agent-icon{position:relative;width:20px;height:20px;left:6px;top:6px;font-weight:700;font-size:16px;line-height:20px;text-align:center;color:var(--color-agent-initials)}.wrapper .attachment{width:100%}.wrapper .attachment .attachment-placeholder{background-color:var(--color-attachment-placeholder);max-width:calc(100% + 32px);min-width:228px;min-height:88px;max-height:230px;margin:-6px -16px 0;justify-content:center;overflow:hidden}.wrapper .attachment .attachment-placeholder>*{max-width:100%}.wrapper .attachment .attachment-placeholder .attachment-icon{height:48px;width:48px}.wrapper .attachment .attachment-placeholder .attachment-icon svg{height:48px;width:48px}.wrapper .attachment .attachment-placeholder .attachment-icon img{width:100%}.wrapper .attachment .attachment-placeholder .attachment-audio{height:50px;width:100%}.wrapper .attachment .attachment-placeholder .attachment-audio::-webkit-media-controls-enclosure{background-color:rgba(0,0,0,0)}.wrapper .attachment .attachment-footer{background-color:var(--color-attachment-footer);color:var(--color-attachment-text);margin:0 -16px -6px;height:50px;padding:16px}.wrapper .attachment .attachment-footer.with-actions{border-bottom:thin solid rgba(22,21,19,.1);margin-bottom:6px}.wrapper .attachment .attachment-footer .attachment-title{flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wrapper .card{width:252px;border-radius:6px;padding:16px;margin-block-end:8px;justify-content:flex-start;flex-shrink:0;color:var(--color-bot-text);background:var(--color-card-background);overflow:hidden}.wrapper .card .card-image{display:block;width:calc(100% + 32px);margin:-16px -16px 10px;min-height:88px;background-color:var(--color-attachment-placeholder)}.wrapper .card .card-title{line-height:20px;margin:0 0 4px;font-weight:700;word-break:break-word}.wrapper .card .card-description{margin-bottom:16px;color:var(--color-text-light)}.wrapper .card-message-content{width:100%;position:relative}.wrapper .card-message-content .card-message-cards{width:100%;align-items:stretch;display:flex;scroll-behavior:smooth;overflow-x:visible;flex-direction:column;margin:8px 0 0;scrollbar-width:none}.wrapper .card-message-content .card-message-cards::-webkit-scrollbar{display:none}.wrapper .message-bubble-tabular-message,.wrapper .message-bubble-form-message{width:111%;max-width:unset;border-radius:0 8px 8px 8px;padding:0;background-color:var(--color-table-background);color:var(--color-table-text);border:1px solid var(--color-table-header-background)}.wrapper .message-bubble-tabular-message .popupContent,.wrapper .message-bubble-form-message .popupContent{max-width:280px;position:absolute;height:auto;border-radius:8px;z-index:3;box-shadow:0px 4px 4px 0px rgba(0,0,0,.1019607843);border:1px solid rgba(22,21,19,.1215686275);background:var(--color-bot-message-background);display:none;inset-inline-start:-4px}.wrapper .message-bubble-tabular-message .results-page-status,.wrapper .message-bubble-form-message .results-page-status{align-items:center;background-color:var(--color-table-background);color:var(--color-table-text);display:flex;flex-direction:row;font-size:13.75px;justify-content:flex-end;line-height:16px;padding:12px 16px;border-top:1px solid var(--color-table-separator)}.wrapper .message-bubble-tabular-message~.message-footer,.wrapper .message-bubble-form-message~.message-footer{margin-top:8px}.wrapper .message-bubble-tabular-message .message-actions .action-postback,.wrapper .message-bubble-tabular-message .table-message-item .action-postback{background:var(--color-table-actions-background);color:var(--color-table-actions-text);border-color:var(--color-table-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover{color:var(--color-table-actions-text-hover);background:var(--color-table-actions-background-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):hover svg>path{fill:var(--color-table-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active{background:var(--color-table-actions-background-focus);color:var(--color-table-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback:not(:disabled):active svg>path{fill:var(--color-table-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions,.wrapper .message-bubble-form-message .message-actions{border-top:1px solid var(--color-table-separator);padding:12px 16px;margin-top:auto}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary,.wrapper .message-bubble-form-message .message-actions .action-postback.primary,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary,.wrapper .message-bubble-form-message .form-actions .action-postback.primary,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary{background:var(--color-primary-form-actions-background);color:var(--color-primary-form-actions-text);border:var(--color-primary-form-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover{background:var(--color-primary-form-actions-background-hover);color:var(--color-primary-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):hover svg>path{fill:var(--color-primary-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active{background:var(--color-primary-form-actions-background-focus);color:var(--color-primary-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.primary:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.primary:not(:disabled):active svg>path{fill:var(--color-primary-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger,.wrapper .message-bubble-form-message .message-actions .action-postback.danger,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger,.wrapper .message-bubble-form-message .form-actions .action-postback.danger,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger{background:var(--color-danger-form-actions-background);color:var(--color-danger-form-actions-text);border:var(--color-danger-form-actions-border)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover{background:var(--color-danger-form-actions-background-hover);color:var(--color-danger-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):hover svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):hover svg>path{fill:var(--color-danger-form-actions-text-hover)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active{background:var(--color-danger-form-actions-background-focus);color:var(--color-danger-form-actions-text-focus)}.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-tabular-message .form-message-value .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .table-message-item .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-actions .action-postback.danger:not(:disabled):active svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .form-message-value .action-postback.danger:not(:disabled):active svg>path{fill:var(--color-danger-form-actions-text-focus)}.wrapper .message-bubble-form-message{background-color:var(--color-form-background);color:var(--color-form-text)}.wrapper .message-bubble-form-message.edit-form-message{overflow:visible}.wrapper .message-bubble-form-message.edit-form-message .message-actions{border-top:none;padding-top:0}.wrapper .message-bubble-form-message.edit-form-message .form-message-header{border-radius:0 7px 0 0}.wrapper .message-bubble-form-message.edit-form-message .form-message-item{border-radius:0 7px 7px 7px}.wrapper .message-bubble-form-message .results-page-status{background-color:var(--color-form-background);color:var(--color-form-text)}.wrapper .message-bubble-form-message .message-actions .action-postback{background:var(--color-form-actions-background);color:var(--color-form-actions-text);border-color:var(--color-form-actions-border)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover{color:var(--color-form-actions-text-hover);background:var(--color-form-actions-background-hover)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):hover svg>path{fill:var(--color-form-actions-text-hover)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus,.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):active{background:var(--color-form-actions-background-focus);color:var(--color-form-actions-text-focus)}.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):focus svg>path,.wrapper .message-bubble-form-message .message-actions .action-postback:not(:disabled):active svg>path{fill:var(--color-form-actions-text-focus)}.wrapper .form-message-field,.wrapper .table-message-heading,.wrapper .table-message-item{overflow-wrap:break-word;word-break:break-word}.wrapper .form-message-field:hover .popupContent,.wrapper .table-message-heading:hover .popupContent,.wrapper .table-message-item:hover .popupContent{display:flex}.wrapper .table-message-wrapper{overflow:auto}.wrapper .table-message-wrapper .table-message{min-width:100%;max-width:200%;border-collapse:collapse}.wrapper .table-message-wrapper .table-message .table-message-headings{align-items:center;color:var(--color-table-header-text);background-color:var(--color-table-header-background);display:flex}.wrapper .table-message-wrapper .table-message .table-message-headings .table-message-heading{font-size:12px;font-weight:600;line-height:16px;padding:16px;min-width:120px}.wrapper .table-message-wrapper .table-message .table-message-row{border-top:1px solid var(--color-table-separator);display:flex;align-items:center}.wrapper .table-message-wrapper .table-message .table-message-row .table-message-item{color:var(--color-table-text);font-size:16px;line-height:20px;min-width:120px;padding:10px 16px}.wrapper .form-message-header{align-items:center;background-color:var(--color-form-header-background);color:var(--color-form-header-text);display:flex;font-weight:700;line-height:20px;padding:16px;text-align:start}.wrapper .form-message-item{color:var(--color-form-text);background-color:var(--color-form-background);display:flex;flex-flow:row wrap;justify-content:space-between;padding:16px}.wrapper .form-message-item .form-row{display:flex;flex-basis:100%;flex-wrap:nowrap;width:100%}.wrapper .form-message-item .form-row.separator{border-top:1px solid var(--color-table-separator);margin-top:8px}.wrapper .form-message-item .form-row .form-row-column{display:flex;flex-flow:column wrap;flex:0 1 auto;min-width:0}.wrapper .form-message-item .form-row .form-row-column.stretch{flex-grow:1}.wrapper .form-message-item .form-row .form-row-column.align-center{justify-content:center}.wrapper .form-message-item .form-row .form-row-column.align-start{justify-content:flex-start}.wrapper .form-message-item .form-row .form-row-column.align-end{justify-content:flex-end}.wrapper .form-message-item .form-row .form-row-column:not(:last-child){margin-inline-end:16px}.wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-lg{margin-top:28px}.wrapper .form-message-item .form-row .form-row-column .form-message-field.margin-top-md{margin-top:16px}.wrapper .form-message-item .form-row .form-row-column .edit-form-message-field .listbox{min-width:100%;inset-inline-start:0;max-width:unset}.wrapper .form-message-item.c2k-reference{justify-content:flex-start}.wrapper .form-message-item.c2k-reference .form-row{margin-inline-end:8px;flex-basis:auto;width:auto;line-height:16px;color:rgba(22,21,19,.6509803922)}.wrapper .form-message-item.c2k-reference .form-row .form-row-column:not(:last-child){margin-inline-end:6px}.wrapper .form-message-item.c2k-reference .form-row span.delimiter{margin-inline-end:8px}.wrapper .form-message-item.with-border{border-bottom:1px solid var(--color-table-separator)}.wrapper .form-message-item .form-message-key{color:var(--color-form-label);line-height:16px}.wrapper .form-message-item .form-message-key.with-margin{cursor:auto;margin-bottom:8px}.wrapper .form-message-item .form-message-key.font-size-lg{font-size:14px;line-height:18px}.wrapper .form-message-item .form-message-key.font-size-md{font-size:12px;line-height:15.5px}.wrapper .form-message-item .form-message-key.font-size-sm{font-size:10px;line-height:13px}.wrapper .form-message-item .form-message-key.font-weight-bold{font-weight:700}.wrapper .form-message-item .form-message-key.font-weight-md{font-weight:600}.wrapper .form-message-item .form-message-key.font-weight-light{font-weight:400}.wrapper .form-message-item>.form-message-field{margin-bottom:16px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-lg{font-size:18px;line-height:23.5px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-md{font-size:16px;line-height:21px}.wrapper .form-message-item .form-message-field .form-message-value.font-size-sm{font-size:13.8px;line-height:18px}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-bold{font-weight:600}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-md{font-weight:400}.wrapper .form-message-item .form-message-field .form-message-value.font-weight-light{font-weight:300}.wrapper .form-message-item .form-message-field .form-message-value.with-top-margin{margin-top:2px}.wrapper .form-message-item .form-message-field.form-message-field-col-1{flex-basis:100%;max-width:100%}.wrapper .form-message-item .form-message-field.form-message-field-col-2{flex-basis:calc(50% - 12px);max-width:calc(50% - 12px);height:100%}.wrapper .form-message-item .form-message-field.form-message-field-col-2:nth-child(even) .popupContent{inset-inline-start:calc(50% - 7px)}.wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field:nth-child(even) .listbox{inset-inline:auto 16px}.wrapper .form-message-item .form-message-field.form-message-field-col-2.edit-form-message-field .listbox{min-width:calc(50% - 28px)}.wrapper .form-message-item .form-message-field.edit-form-message-field{display:flex;flex-direction:column;overflow:visible;width:100%}.wrapper .form-message-item .form-message-field.edit-form-message-field.disabled{cursor:not-allowed}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value,.wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value{border-radius:4px;background-color:var(--color-form-input-background);color:var(--color-form-input-text);border:1px solid var(--color-form-input-border);font-size:16px}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value:focus,.wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value:focus,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.form-message-value:focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field input:disabled,.wrapper .form-message-item .form-message-field.edit-form-message-field textarea:disabled,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:disabled{opacity:.5;cursor:not-allowed}.wrapper .form-message-item .form-message-field.edit-form-message-field input:disabled~.field-error,.wrapper .form-message-item .form-message-field.edit-form-message-field textarea:disabled~.field-error,.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper:disabled~.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field.error>input:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>textarea:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.select-wrapper:not(:disabled,.disabled),.wrapper .form-message-item .form-message-field.edit-form-message-field.error>.text-field-container:not(:disabled,.disabled){border-color:var(--color-form-error)}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value{height:42px;padding:0 12px}.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=date]::-webkit-calendar-picker-indicator,.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=time]::-webkit-calendar-picker-indicator,.wrapper .form-message-item .form-message-field.edit-form-message-field input.form-message-value[type=number]::-webkit-inner-spin-button{cursor:pointer;width:20px;height:20px;margin-inline-end:-8px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper{align-items:center;display:flex;height:44px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.focused{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.disabled{opacity:.5;pointer-events:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper.disabled~.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper input{width:calc(100% - 36px);border:none;box-shadow:none !important;outline:1px solid rgba(0,0,0,0);height:40px;margin-inline-start:1px}.wrapper .form-message-item .form-message-field.edit-form-message-field .select-wrapper .select-icon{margin-inline-start:0;color:var(--color-form-input-text)}.wrapper .form-message-item .form-message-field.edit-form-message-field textarea.form-message-value{overflow:auto;padding:11px 12px;resize:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container{display:flex;max-width:max-content}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container.disabled{cursor:not-allowed;opacity:.5}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container.disabled+.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container label{display:flex;min-height:36px;align-items:center;padding:7.5px 0;border-bottom:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field .form-container .radio-input{margin-inline-end:8px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container{background-color:var(--color-form-input-background);border-radius:4px;border:1px solid var(--color-form-input-border);display:flex;min-height:44px;flex-direction:row;cursor:text}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container.disabled{opacity:.5;pointer-events:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container.disabled~.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container:focus{border-color:var(--color-form-input-border-focus);box-shadow:0 0 0 1px var(--color-form-input-border-focus) inset;outline:1px solid rgba(0,0,0,0)}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options{padding:0 12px 5px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty{padding-top:5px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options:empty:before{content:attr(data-placeholder)}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option{float:left;line-height:16px;display:flex;align-items:center;cursor:default;border-radius:4px;border:1px solid var(--color-form-input-border);color:var(--color-form-input-text);background-clip:padding-box;font-size:12px;margin-inline-end:6px;margin-top:5px;padding-inline:6px 4px}.wrapper .form-message-item .form-message-field.edit-form-message-field .text-field-container .selected-options .multi-select-option .opt-close{cursor:pointer;height:16px;width:16px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox{border:1px solid var(--color-table-separator);border-radius:4px;display:flex;flex-direction:column;margin-top:3px;inset-inline-start:16px;max-width:calc(100% - 32px);min-width:calc(100% - 32px);z-index:3}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box{display:flex;flex-direction:column;padding:0 12px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .filter-message-box .filter-message-text{color:var(--color-form-label);font-size:13.75px;height:42px;padding:12px 0;border-bottom:1px solid var(--color-table-separator)}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .listbox-search{flex-shrink:0;margin:12px;padding-inline-end:36px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper{position:relative;height:0}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .search-icon-wrapper .search-icon{position:absolute;inset-inline-end:21px;bottom:23px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list{animation:none;display:block;max-height:400px;margin:1px 0 2px 0;overflow-y:auto;padding:8px 0;z-index:3}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list li,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list li{height:auto;margin:0;padding:12px}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list li:not(.none).selected,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list li:not(.none).selected{border-top:1px solid #227e9e;background-color:#e4f1f7}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list li:not(.none).selected:last-child,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list li:not(.none).selected:last-child{box-shadow:inset 0 -1px 0 0 #227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .multi-select-list li:not(.none).selected+li,.wrapper .form-message-item .form-message-field.edit-form-message-field .listbox .single-select-list li:not(.none).selected+li{border-top:1px solid #227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle{position:relative;width:36px;height:20px}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle.disabled+.field-error{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle input{display:none}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle input:disabled+.round-slider{cursor:not-allowed;opacity:.5}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle input:checked+.round-slider{background-color:#227e9e;border-color:#227e9e}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle input:checked+.round-slider:before{inset-inline:auto 1px;transition:height .3s cubic-bezier(0, 0, 0.2, 1),width .3s cubic-bezier(0, 0, 0.2, 1),right .3s cubic-bezier(0, 0, 0.2, 1)}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider{position:absolute;cursor:pointer;background-color:#8b8580;transition:background-color .2s linear .1s,opacity .2s linear .1s,border-color .2s linear .1s;border:1px solid rgba(0,0,0,0);border-radius:4px;height:20px;width:36px}.wrapper .form-message-item .form-message-field.edit-form-message-field .toggle .round-slider:before{border-radius:4px;width:16px;height:16px;inset-inline:1px auto;position:absolute;content:"";bottom:1px;background-color:var(--color-form-background);transition:height .3s cubic-bezier(0, 0, 0.2, 1),width .3s cubic-bezier(0, 0, 0.2, 1),left .3s cubic-bezier(0, 0, 0.2, 1)}.wrapper .form-message-item span.field-error{display:flex;margin-top:2px;line-height:16px}.wrapper .form-message-item span.field-error .error-text{color:var(--color-form-error-text);font-size:12px;margin-inline-start:4px}.wrapper .form-message-item span.field-error svg.form-error-icon{position:relative;height:16px;width:16px;fill:var(--color-form-error);flex-shrink:0}.wrapper .form-message-item span.field-error.form-error{padding:8px;background:var(--color-error-message-background);border-radius:4px;margin:10px 0;border:thin dashed var(--color-error-border);width:100%}.wrapper .form-message-item span.field-error.form-error.disabled{display:none}.wrapper .form-message-item span.field-error.form-error svg.form-error-icon{top:0}.wrapper .form-message-item span.field-error.form-error .error-text{font-weight:600;color:var(--color-error-title);margin-inline-start:8px;font-size:14px}.wrapper .form-message-item .form-actions .action-postback,.wrapper .form-message-item .form-message-value .action-postback{background:var(--color-form-actions-background);color:var(--color-form-actions-text);border-color:var(--color-form-actions-border)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover{color:var(--color-form-actions-text-hover);background:var(--color-form-actions-background-hover)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):hover svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):hover svg>path{fill:var(--color-form-actions-text-hover)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus,.wrapper .form-message-item .form-actions .action-postback:not(:disabled):active,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active{background:var(--color-form-actions-background-focus);color:var(--color-form-actions-text-focus)}.wrapper .form-message-item .form-actions .action-postback:not(:disabled):focus svg>path,.wrapper .form-message-item .form-actions .action-postback:not(:disabled):active svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):focus svg>path,.wrapper .form-message-item .form-message-value .action-postback:not(:disabled):active svg>path{fill:var(--color-form-actions-text-focus)}.wrapper .tableform-message .table-message-row{cursor:pointer}.wrapper .tableform-message .table-message-row:hover{background-color:var(--color-table-row-background-hover)}.wrapper .tableform-message .table-message-row button:hover,.wrapper .tableform-message .table-message-row button:active,.wrapper .tableform-message .table-message-row button:focus{background-color:unset}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child,.wrapper .tableform-message .table-message-row .table-message-item:last-child{min-width:unset;padding:0}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child button,.wrapper .tableform-message .table-message-row .table-message-item:last-child button{margin:0 2px;transition:transform .25s ease-in-out}.wrapper .tableform-message .table-message-headings .table-message-heading:last-child button.rotate-180,.wrapper .tableform-message .table-message-row .table-message-item:last-child button.rotate-180{transform:rotate3d(0, 0, 1, 180deg)}.wrapper .tableform-message .form-message-item{margin:0;padding:16px;transition:all .25s ease-in-out;border-bottom:none}.wrapper .tableform-message .form-message-item:last-child{border-top:1px solid var(--color-table-bottom)}.wrapper .footer-form{width:100%}.wrapper .footer-form .message-bubble-form-message{background:rgba(0,0,0,0);border:none;width:100%}.wrapper .footer-form .message-bubble-form-message .form-message-item{background:rgba(0,0,0,0);padding:0}.wrapper .footer{max-width:100%;padding:0;background-color:var(--color-footer-background);z-index:3;box-shadow:0px -1px 4px 0px rgba(0,0,0,.1019607843);border-top:1px solid rgba(22,21,19,.1)}.wrapper .footer .footer-mode-keyboard{min-height:44px;margin:5px;background-color:var(--color-input-background);color:var(--color-input-text);border:1px solid var(--color-input-border);border-radius:6px}.wrapper .footer .footer-mode-voice{height:60px;padding:14px 0;background:var(--color-visualizer-container-background);justify-content:center}.wrapper .footer .footer-mode-voice .footer-visualizer-wrapper{max-width:296px;height:32px}.wrapper .footer.mode-keyboard .button-switch-kbd{display:none}.wrapper .footer.mode-keyboard .footer-mode-voice{display:none}.wrapper .footer.mode-voice .button-switch-voice{display:none}.wrapper .user-input{flex-grow:1;min-height:44px;padding:10px;margin:0;font-size:1em;font-family:inherit;line-height:24px;outline:1px solid rgba(0,0,0,0);resize:none;border:none;border-radius:6px;background-color:rgba(0,0,0,0);color:var(--color-input-text)}.wrapper .user-input:focus,.wrapper .user-input:focus-visible{outline:1px solid rgba(22,21,19,0)}.wrapper .footer-actions{padding-inline-end:4px}.wrapper .footer-button.button-send{background-color:var(--color-footer-button-fill);border-radius:50%}.wrapper .footer-button.button-send svg>path{fill:var(--color-input-background)}.wrapper .footer-button.button-send:not(:disabled):hover{background-color:var(--color-footer-button-fill-hover)}.wrapper .footer-button.button-send:not(:disabled):hover svg>path{fill:var(--color-input-background)}.wrapper .footer-button svg>path{fill:var(--color-footer-button-fill)}.wrapper .footer-button:not(:disabled):hover,.wrapper .footer-button:not(:disabled):focus{background-color:var(--color-footer-button-background-hover)}.wrapper .footer-button:not(:disabled):hover svg>path,.wrapper .footer-button:not(:disabled):focus svg>path{fill:var(--color-footer-button-fill-hover)}.wrapper .autocomplete-items{position:absolute;bottom:56px;width:100%;max-height:calc(100% - 56px);overflow-y:auto;background-color:var(--color-input-background);box-shadow:0px -1px 4px 0px rgba(0,0,0,.1019607843);margin:0 -5px}.wrapper .autocomplete-items .autocomplete-item{min-height:40px;padding:8px 16px;cursor:pointer}.wrapper .autocomplete-items .autocomplete-item:hover,.wrapper .autocomplete-items .autocomplete-item.autocomplete-active{background-color:var(--color-card-nav-button-hover)}.wrapper .autocomplete-items .autocomplete-item:first-of-type{margin-top:8px}.wrapper .autocomplete-items .autocomplete-item:last-of-type{margin-bottom:8px}.wrapper .autocomplete-items .autocomplete-item strong{font-weight:700}.wrapper.embedded .open{width:100%;height:100%}.wrapper.embedded .open .widget{border-radius:0;width:100%;min-width:100%;max-width:100%;height:100%;position:inherit;box-shadow:none;max-height:unset}@media(min-width: 1024px){.wrapper.embedded .conversation .conversation-pane .message-bubble{padding:16px 24px}.wrapper.embedded .conversation .conversation-pane .message-bubble .attachment .attachment-placeholder{margin:-16px -24px 0;max-width:calc(100% + 48px)}.wrapper.embedded .conversation .conversation-pane .message-bubble .attachment .attachment-footer{margin:0 -24px -16px}.wrapper.embedded .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.wrapper.embedded .conversation .conversation-pane.user-icon .message-block .messages-wrapper{max-width:780px}.wrapper.embedded .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message-header,.wrapper.embedded .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message-footer,.wrapper.embedded .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message-header,.wrapper.embedded .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message-footer{max-width:780px}.wrapper.embedded .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper,.wrapper.embedded .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper{max-width:780px}.wrapper.embedded .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper.embedded .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper.embedded .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper.embedded .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer{max-width:780px}.wrapper.embedded button:not(.icon){height:44px}}@media(min-width: 900px)and (max-width: 1023px){.wrapper.embedded .conversation .conversation-pane .message-bubble{padding:8px 16px}.wrapper.embedded .conversation .conversation-pane .message-bubble .attachment .attachment-placeholder{margin:-8px -16px 0}.wrapper.embedded .conversation .conversation-pane .message-bubble .attachment .attachment-footer{margin:0 -16px -8px}.wrapper.embedded .conversation .conversation-pane.bot-icon .message-block .messages-wrapper,.wrapper.embedded .conversation .conversation-pane.user-icon .message-block .messages-wrapper{max-width:680px}.wrapper.embedded .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper.embedded .conversation .conversation-pane.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper.embedded .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper.embedded .conversation .conversation-pane.user-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer{max-width:680px}.wrapper.embedded .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper,.wrapper.embedded .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper{max-width:680px}.wrapper.embedded .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-bubble,.wrapper.embedded .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-bubble{padding:16px 24px}.wrapper.embedded .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper.embedded .conversation .conversation-pane.bot-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer,.wrapper.embedded .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-header,.wrapper.embedded .conversation .conversation-pane.user-icon.bot-icon .message-block .messages-wrapper .message.card-message-horizontal .message-footer{max-width:680px}.wrapper.embedded button:not(.icon){height:44px}}.wrapper.popup-content-wrapper{background:rgba(22,21,19,.4);width:100vw;height:100vh;position:fixed;z-index:10000;top:0 !important;left:0 !important;display:flex;align-items:center;justify-content:center}.wrapper.popup-content-wrapper .popup-dialog{overflow:hidden;width:600px;border-radius:6px;box-shadow:0px 6px 12px 0px rgba(0,0,0,.2)}.wrapper.popup-content-wrapper .popup-dialog .message-bubble{width:auto;padding:32px;margin-top:0;border-radius:6px}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message{padding:0}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message .form-message-header{padding:32px 32px 12px}.wrapper.popup-content-wrapper .popup-dialog .message-bubble.message-bubble-form-message .form-message-item{padding:0 32px 32px}.wrapper .full-screen-modal{position:fixed;top:0;left:0;width:100%;height:100vh;z-index:1000000;background-color:rgba(0,0,0,.8)}.wrapper .modal-header{background:linear-gradient(180deg, rgba(0, 0, 0, 0.5), transparent);color:#fff;display:flex;justify-content:space-between;position:relative;padding:10px 20px;z-index:1000001}.wrapper .modal-header .close-btn{border:none;background:rgba(0,0,0,0);cursor:pointer}.wrapper .full-screen-image{position:absolute;max-width:100vw;max-height:100vh;margin:auto;top:0;bottom:0;left:0;right:0}.wrapper .typing-cue-wrapper{width:32px;margin:auto;display:flex}.wrapper .typing-cue-wrapper .typing-cue{position:relative;left:0;right:0;margin:auto;width:8px;height:8px;border-radius:50%;background-color:var(--color-typing-indicator);animation:typing-cue 1550ms infinite linear alternate;animation-delay:250ms;opacity:.1}.wrapper .typing-cue-wrapper .typing-cue::before,.wrapper .typing-cue-wrapper .typing-cue::after{content:"";display:inline-block;position:absolute;width:8px;height:8px;border-radius:50%;background-color:var(--color-typing-indicator);animation:typing-cue 1550ms infinite linear alternate;opacity:.1}.wrapper .typing-cue-wrapper .typing-cue::before{left:-12px;animation-delay:0s}.wrapper .typing-cue-wrapper .typing-cue::after{left:12px;animation-delay:500ms}.wrapper .hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.wrapper .rating-root{display:flex}.wrapper [dir=rtl] .rating-root{flex-direction:row-reverse}.wrapper .rating-wrapper{display:flex;margin-top:8px}.wrapper [dir=rtl] .rating-wrapper{flex-direction:row-reverse}.wrapper .rating-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.wrapper .star-label{background-color:rgba(0,0,0,0);border:0;cursor:pointer;padding:0}.wrapper .star-label>svg>path{fill:var(--color-rating-star)}.wrapper .star-input.active+label>svg>path{fill:var(--color-rating-star-fill)}.wrapper .star-input:disabled+.star-label{cursor:not-allowed;filter:brightness(0.8)}.wrapper .rating-star-icon{height:32px;width:32px}.wrapper.expanded .widget{animation:scale-in-br .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper.expanded .widget.sidepanel{animation:unset}.wrapper.expanded .widget .resizable{width:4px;height:100%;top:0;left:0;background-color:rgba(0,0,0,0);position:absolute;z-index:10000;cursor:col-resize}.wrapper.expanded .widget .resizable.right-resize{right:0;left:unset}.wrapper.expanded .widget .resizable.top-resize{width:100%;height:4px;cursor:row-resize}.wrapper.expanded .widget .resizable.corner{height:8px;width:8px;cursor:nwse-resize}.wrapper.expanded .widget .resizable.corner.right-resize{cursor:nesw-resize}.wrapper.expanded:not(.pos-left) .right-resize{display:none}.wrapper.expanded:not(.drag) .button{animation:scale-out-center .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}.wrapper.collapsed .widget{animation:scale-out-br .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}.wrapper.collapsed .widget.sidepanel{animation:unset}.wrapper.collapsed .notification-badge{background-color:var(--color-notification-badge-background);color:var(--color-notification-badge-text);right:-5px;top:-5px;align-items:center;border-radius:24px;display:flex;font-size:14px;height:24px;justify-content:center;position:absolute;text-align:center;width:32px}.wrapper.collapsed:not(.drag) .button{animation:scale-in-center .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper.pos-left .widget{right:unset;left:calc(var(--position-left)*-1);max-width:100vw}.wrapper.pos-left.expanded .widget{animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper.pos-left.expanded .widget .left-resize{display:none}.wrapper.pos-left.collapsed .widget{animation:scale-out-bl .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}.wrapper .ellipsis{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.wrapper .popup{position:absolute;background-color:var(--color-popup-background);color:var(--color-popup-text);min-width:140px;max-height:calc(100% - 128px);display:none;padding:4px 0;border-radius:6px;box-shadow:rgba(0,0,0,.16) 0px 4px 8px 0px;overflow-y:auto;z-index:5}.wrapper .popup li{display:flex;align-items:center;height:48px;margin:4px 0;cursor:pointer;overflow:hidden;color:var(--color-popup-button-text)}.wrapper .popup li svg>path{fill:var(--color-popup-text)}.wrapper .popup li#action-menu-option-lang{border-top:1px solid var(--color-popup-horizontal-rule)}.wrapper .popup li.disable{pointer-events:none;cursor:not-allowed;opacity:.5}.wrapper .popup li:hover,.wrapper .popup li:focus,.wrapper .popup li.active{background-color:var(--color-popup-item-background-hover)}.wrapper .popup li .icon{margin-inline-start:16px;height:20px;width:20px}.wrapper .popup li .text{padding:0 16px 0 16px}.wrapper .popup.expand{display:block;-webkit-animation:scale-in-br .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-br .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper .popup.action-menu,.wrapper .popup.language-selection-menu{top:50px;bottom:unset}.wrapper .popup.action-menu.expand,.wrapper .popup.language-selection-menu.expand{display:block;-webkit-animation:scale-in-tr .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-tr .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}.wrapper .popup.language-selection-menu{max-height:calc(100% - 280px)}.wrapper .popup.share-popup-list{bottom:50px;left:unset}.wrapper .spinner{height:48px;width:48px}.wrapper .spinner svg{animation-duration:750ms;-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite}.wrapper .spinner svg circle{fill:rgba(0,0,0,0);stroke:var(--color-user-text);stroke-width:2px;stroke-dasharray:128px;stroke-dashoffset:82px}.wrapper .webview-container{position:absolute;width:100%;height:80%;bottom:0;box-shadow:0px -4px 32px rgba(0,0,0,.1);z-index:10}.wrapper .webview-container .webview-header svg{fill:var(--color-actions-text)}.wrapper .webview-container .webview-header button{color:var(--color-actions-text)}.wrapper .webview-container .spinner{position:absolute;margin:auto;left:0;right:0;top:40%}.wrapper .webview-container iframe{width:100%;height:100%;background:var(--color-conversation-background);border:none}.wrapper .webview-container .webview-error{position:absolute;bottom:0;background:var(--color-popup-background);width:calc(100% - 32px);margin:10px 16px;padding:6px 16px;border-radius:6px;display:flex;align-items:center;box-shadow:0px -4px 32px rgba(0,0,0,.1)}.wrapper .webview-container .webview-error .webview-error-button-close{border:none}.wrapper .webview-container.webview-container-close{animation:oda-chat-webview-slide-out-bottom .4s cubic-bezier(0.55, 0.085, 0.68, 0.53) both}.wrapper .webview-container.webview-container-open{animation:oda-chat-webview-slide-in-bottom .4s cubic-bezier(0.25, 0.46, 0.45, 0.94) both}.widget{position:absolute;bottom:calc(var(--position-bottom)*-1);border-radius:6px 6px 0 0;box-shadow:0px -4px 32px rgba(0,0,0,.1);right:calc(var(--position-right)*-1);width:100vw;min-width:100vw;max-width:100vw;max-height:var(--widget-max-height);margin:0;overflow:hidden;text-decoration:none;text-transform:none;z-index:10000;align-items:stretch;background:var(--color-conversation-background)}.widget .alert-wrapper{position:absolute;top:48px;width:100%}.widget .alert-wrapper .alert-prompt{position:relative;left:0;right:0;width:auto;margin:6px;padding:10px;border-radius:10px;z-index:11}.widget .msg-icon{padding:5px 10px 0 0}.widget .msg{flex-grow:1}.sidepanel-content-wrapper{display:flex;width:100vw}.sidepanel-content-wrapper>*{flex-grow:1}.sidepanel-content-wrapper .wrapper:not(.contextual-widget){position:absolute;bottom:0;right:0;height:100vh;flex-grow:unset;width:0;min-width:0;max-width:0;flex-shrink:0;--width-full-screen: 375px}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded{min-width:100vw;max-width:100vw}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded::after{content:"";background-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:4px;height:100%;cursor:col-resize;z-index:10000}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded.drag{transition:unset}.sidepanel-content-wrapper .wrapper:not(.contextual-widget).expanded.drag::after{background-color:#ccc}.sidepanel-content-wrapper .widget{position:relative;bottom:0;right:0;left:0;top:0;width:100%;min-width:unset;max-width:unset;height:100%;max-height:100%;box-shadow:none;border-radius:0}.contextual-widget-wrapper{position:relative}.contextual-widget-wrapper .widget-wrapper{position:sticky;height:0;z-index:1;top:8px;max-width:100%}.contextual-widget-wrapper .widget-wrapper .container{position:absolute;right:-44px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget{position:relative;width:272px;border-radius:6px;background-color:#f5f4f2;box-shadow:0px 6px 12px 0px rgba(0,0,0,.2)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size{width:36px;box-shadow:0px 1px 4px 0px rgba(0,0,0,.1215686275);border-radius:4px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size.no-feedback>:first-child{border-bottom:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size.no-feedback>:not(:first-child){display:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size>:not(:last-child){border-bottom:1px solid rgba(22,21,19,.1215686275)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.minimum-size button{background:#f5f4f2;margin-inline-start:0;border-radius:0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size{width:416px;display:block}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size .conversation .message-wrapper{border-bottom:1px solid rgba(22,21,19,.1215686275)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget.full-size .footer.enabled{display:block}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget:not(.full-size) .message-actions>:only-child,.contextual-widget-wrapper .widget-wrapper .container .contextual-widget:not(.full-size) .message-actions>:nth-child(2){border:none}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header{height:44px;background:#f5f4f2;padding:8px 12px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header .logo{height:16px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .header .title{height:16px;font-weight:400;font-size:12px;line-height:16px;color:rgba(22,21,19,.6980392157)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message{display:flex;height:76px;border-radius:6px;border:1px solid rgba(22,21,19,.1215686275);margin:0 12px 12px;background:#fef9f2;padding:8px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-icon{height:18px;margin:8px;padding-top:2px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info{margin:8px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info .error-text{color:#8f520a;line-height:20px;font-weight:700}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .error-message .error-info .reset-button{cursor:pointer;line-height:16px;font-size:13.75px;font-weight:600;margin-top:8px;color:#161513}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-global-actions{margin-top:0px;padding:12px 12px 4px;background:#fff}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-global-actions button.action-postback{height:auto}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper{padding:0 12px 0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper .message-actions{margin-top:0;margin-bottom:4px;padding:0}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-wrapper .message-actions .action-postback{background:rgba(0,0,0,0)}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-bubble{font-size:13.75px;line-height:16px;margin-top:0;margin-bottom:0;background:rgba(0,0,0,0);border-radius:0;min-height:unset;padding:0 !important}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .message-bubble .message-text{margin-bottom:12px}.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .footer,.contextual-widget-wrapper .widget-wrapper .container .contextual-widget .footer-form{display:none}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner{background-color:#f5f4f2;box-sizing:border-box;width:154px;height:52px;padding:8px 12px;border-radius:6px;box-shadow:0px 6px 12px 0px rgba(0,0,0,.2);position:sticky;top:8px;bottom:8px;z-index:1;display:flex;align-items:center}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-icon{height:16px;width:16px}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-icon.spin{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .generate-text{width:70px;height:16px;font-size:12px;line-height:16px;color:rgba(22,21,19,.6980392157)}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner .close-button{border:rgba(0,0,0,0);cursor:pointer;background:#f5f4f2;width:36px;height:36px;padding:8px}.contextual-widget-wrapper .widget-wrapper .container .generate-spinner>:not(:last-child){margin-inline-end:4px}.contextual-widget-wrapper .widget-wrapper .widget{position:relative;bottom:0;right:0;left:0;top:0;width:100%;height:100%;border-radius:6px}.button-drag-handle{position:absolute;width:100%;height:100%}.image-preview-wrapper{background:rgba(0,0,0,.8);height:100%;position:fixed;top:0;left:0;width:100%;z-index:10000}.image-preview-wrapper .image-preview-header{align-items:center;background:linear-gradient(180deg, rgba(0, 0, 0, 0.5), transparent);color:#fff;display:flex;justify-content:space-between;position:relative;padding:10px 20px;z-index:1000001}.image-preview-wrapper .image-preview-header .image-preview-close{background:rgba(0,0,0,0);border:none;cursor:pointer;height:36px;width:36px}.image-preview-wrapper .image-preview-header .image-preview-close .image-preview-close-icon{fill:#fff;height:100%;width:100%}.image-preview-wrapper .image-preview{bottom:0;left:0;margin:auto;max-height:100vh;max-width:100vw;position:absolute;right:0;top:0}.arrow-icon{margin-inline-end:2px;width:32px;height:32px;display:flex;align-items:center;flex-shrink:0}@media screen and (min-width: 426px){.wrapper.pos-left .widget{left:0}.wrapper:not(.embedded) .widget:not(.sidepanel){max-width:calc(100vw - var(--position-right))}.wrapper:not(.embedded).pos-left .widget:not(.sidepanel){max-width:calc(100vw - var(--position-left))}.wrapper .messages-wrapper .message-list .message.card-message-horizontal{width:var(--width-full-screen)}.widget:not(.sidepanel){width:var(--width-full-screen);min-width:unset;max-height:var(--widget-max-height);bottom:0;right:0}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget){position:sticky;top:0}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget).expanded{min-width:375px;max-width:800px}.sidepanel-content-wrapper .wrapper.wrapper:not(.contextual-widget) .widget{border-left:thin solid #ccc}}@media(prefers-reduced-motion){.open{animation:none}.close{animation:none}}[dir=rtl] .wrapper *{direction:rtl}[dir=rtl] .multi-select-option{float:right !important}[dir=rtl] .wrapper{text-align:right}[dir=rtl] .wrapper .widget.open{animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}[dir=rtl] .wrapper .widget.close{animation:scale-out-bl .25s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards}[dir=rtl] .wrapper .message-bubble{border-radius:10px 2px 2px 10px}[dir=rtl] .wrapper .message-block .message:last-child .message-bubble:last-child{border-radius:10px 2px 10px 10px}[dir=rtl] .wrapper .message-block.right .messages-wrapper .message .message-bubble{border-radius:2px 10px 10px 2px}[dir=rtl] .wrapper .message-block.right .messages-wrapper .message:last-child .message-bubble:last-child{border-radius:2px 10px 10px 10px}[dir=rtl] .wrapper .button{left:0;right:unset}[dir=rtl] .wrapper .popup.expand{-webkit-animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-bl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}[dir=rtl] .wrapper .popup.action-menu.expand,[dir=rtl] .wrapper .popup.language-selection-menu.expand{-webkit-animation:scale-in-tl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both;animation:scale-in-tl .25s cubic-bezier(0.25, 0.46, 0.45, 0.94) .2s both}'},476:function(t,e,s){s.r(e),s.d(e,{AuthError:function(){return i},AuthTokenService:function(){return u},Deferred:function(){return B},JWT:function(){return r},KeyCode:function(){return w},ShareCategory:function(){return x},buildURL:function(){return I},deepFreeze:function(){return a},drawVisualizer:function(){return W},formatDate:function(){return y},generateEventDispatcher:function(){return k},getDeviceType:function(){return N},getLongPollURL:function(){return L},getWebSocketURL:function(){return E},isAndroid:function(){return H},isApple:function(){return V},isFunction:function(){return n},isMobile:function(){return F},isObject:function(){return o},isSameDay:function(){return O},parseDOM:function(){return U},pipe:function(){return h},removeDisplayNoneAndDecode:function(){return R},resetRegex:function(){return l},setReadOnly:function(){return c},startTimer:function(){return nt},stripHTTP:function(){return j}});const i={AuthExpiredToken:"AuthExpiredToken",AuthNoToken:"AuthNoToken",AuthNoChannelId:"AuthNochannelId",AuthNoUserId:"AuthNouserId",AuthNoExp:"AuthNoexp",AuthNoIat:"AuthNoiat",AuthInvalidChannelId:"AuthInvalidchannelId",AuthInvalidUserId:"AuthInvaliduserId",AuthInvalidExp:"AuthInvalidexp",AuthInvalidIat:"AuthInvalidiat",AuthEmptyChannelIdClaim:"AuthInvalidchannelId",AuthEmptyUserIdClaim:"AuthInvaliduserId",AuthNegativeExp:"AuthNegativeexp",AuthNegativeIat:"AuthNegativeiat",AuthExpLessThanIat:"AuthExpLessThanIat"};class r{constructor(t){this.token=t;const e=this.token.split(".");this.header=JSON.parse(atob(e[0])),this.payload=JSON.parse(atob(e[1]))}getClaim(t){return this.payload[t]}}const o=t=>"object"==typeof t&&null!==t,n=t=>t instanceof Function,a=t=>{if(!o(t))return t;for(const e of Object.keys(t)){const s=t[e];o(s)&&a(s)}return Object.freeze(t)},c=t=>{const e={};return Object.keys(t).forEach((s=>{Object.defineProperty(e,s,{get:()=>t[s],enumerable:!0,configurable:!0})})),e},h=(t,...e)=>e.reduce(((t,e)=>e(t)),t),l=t=>(t.lastIndex=0,t),p=Promise;class u{static getInstance(){return this.v||(this.v=new u),this.v}get(){return this.bh&&f(this.bh)?p.resolve(this.bh):new p(((t,e)=>{p.resolve(this.wh()).then((s=>{this.bh=new r(s);try{if(function(t){t||v(i.AuthNoToken);const e="iat",s=t.getClaim(e);b(e,m,s);const r=t.getClaim(g);b(g,m,r),r<=s&&v(i.AuthExpLessThanIat);const o="channelId",n=t.getClaim(o);b(o,d,n);const a="userId",c=t.getClaim(a);b(a,d,c)}(this.bh),f(this.bh))return void t(this.bh);v(i.AuthExpiredToken)}catch(t){e(t)}}))}))}reset(){this.bh=void 0}setFetch(t){if(!n(t))throw new Error("'generateAuthToken' is not a function. Create a function that returns a Promise that resolves to a new JWT when called.");this.wh=t,this.reset()}}const d="string",m="number",g="exp";function f(t){const e=Math.floor((Date.now()+2e4)/1e3);return t.getClaim(g)>e}function b(t,e,s){null==s&&v(`AuthNo${t}`),typeof s!==e&&v(`AuthInvalid${t}`),"number"==typeof s?s<=0&&v(`AuthNegative${t}`):s.length||v(`AuthEmpty${t}`)}function v(t){throw Error(t)}const w={Return:"Enter",Esc:"Escape",Space:"Space",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Tab:"Tab",PageDown:"PageDown",PageUp:"PageUp",Home:"Home",End:"End",Backspace:"Backspace"},x={Audio:"audio",File:"file",Location:"location",Visual:"visual"};function k(){let t={};return{bind:(e,s)=>{e&&s&&n(s)&&(Object.prototype.hasOwnProperty.call(t,e)?t[e].push(s):t[e]=[s])},trigger:(e,...s)=>{if(Object.prototype.hasOwnProperty.call(t,e)){const i=null!=s?s:[];t[e].forEach((t=>{try{t.call(null,...i)}catch(t){console.error(`${e} listener error`,t)}}))}},unbind:(e,s)=>{e?s||!Object.prototype.hasOwnProperty.call(t,e)?t[e]&&(t[e]=t[e].filter((t=>t!==s))):t[e].splice(0,t[e].length):t={}}}}const y=(t,{pattern:e,locale:s})=>{const i=new Date(t);if("string"==typeof e)try{return _(i,e)}catch(t){}else if(o(e))return new Intl.DateTimeFormat(s,e).format(i);return z(i,s)},_=(t,e)=>{const s=t.getDate(),i=t.getDay(),r=M[i],o=t.getMonth()+1,n=C[o-1],a=`${t.getFullYear()}`,c=t.getHours(),h=t.getMinutes(),l=t.getSeconds(),p=t.getMilliseconds(),u=c>=S?"PM":"AM",d=$(t),m=c%S||S,g={DD:A(s),Do:`${s}${T(s)}`,D:`${s}`,dddd:r,ddd:r.substring(0,3),d:`${i}`,MMMM:n,MMM:n.substring(0,3),MM:A(o),M:`${o}`,YYYY:a,YY:a.slice(-2),HH:A(c),H:`${c}`,hh:A(m),h:`${m}`,mm:A(h),m:`${h}`,ss:A(l),s:`${l}`,SSS:`${p}`,SS:""+p%100,S:""+p%1e3,A:u,a:u.toLowerCase(),ZZ:d.replace(":",""),Z:d};return e.replace(/DD|Do|D|dddd|ddd|d|MMMM|MMM|MM|M|YYYY|YY|HH|H|hh|h|mm|m|ss|s|SSS|SS|S|A|a|ZZ|Z/g,(t=>g[t]))},z=(t,e)=>`${t.toLocaleDateString(e,{weekday:"short",month:"short",day:"numeric"}).replace(/,/g,"")}, ${t.toLocaleTimeString(e,{hour:"numeric",minute:"numeric",hour12:!0})}`,M=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],C=["January","February","March","April","May","June","July","August","September","October","November","December"],S=12,$=t=>{const e=t.getTimezoneOffset(),s=Math.abs(e);return`${s===e?"+":"-"}${A(Math.floor(s/60))}:${A(s%60)}`},T=t=>{let e="th";if(t>=11&&t<=13)return e;switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},A=t=>`${t}`.padStart(2,"0"),O=(t,e)=>{const s=new Date(t),i=new Date(e);return s.getDate()===i.getDate()&&s.getMonth()===i.getMonth()&&s.getFullYear()===i.getFullYear()},I=(t,e,s,i)=>P(`${t}${e}${i}`,s),E=(t,e,s=!0,i="websdk")=>I(`ws${s?"s":""}://`,t,e,`/chat/v1/chats/sockets/${i}`),L=(t,e,s=!0)=>I(`http${s?"s":""}://`,t,e,"/chat/v1/chats/message"),P=(t,e)=>{const s=Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&");return s.length?`${t}?${s}`:t},j=t=>t.replace(/^https?:\/\//i,""),H=()=>/Android/i.test(navigator.userAgent),V=()=>/iPhone|iPad/i.test(navigator.userAgent)&&!window.MSStream,F=()=>H()||V(),N=()=>H()?"android":V()?"ios":"desktop",R=t=>{const e=document.createElement("div");e.style.display="none",document.body.appendChild(e),e.innerHTML=t,D(e);const s=e.innerText;return e.remove(),s},D=t=>{for(let e=t.childElementCount-1;e>=0;e--){const s=t.children[e],i=window.getComputedStyle(s);"none"===i.display||"hidden"===i.visibility?s.remove():D(s)}},U=t=>{const e=(new DOMParser).parseFromString(t,"text/html");return e&&e.body};class B{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e})),Object.freeze(this)}}const W=(t,e,s="#000")=>{const i=e.height,r=e.width,o=Math.floor(i/2);let n=Z(t,31);n=q(n,i/255);const a=e.getContext("2d");if(a){a.fillStyle=s,a.clearRect(0,0,r,i),a.save();let t=0;n.forEach((e=>{const s=Math.ceil(e/2)+1;a.fillRect(t,o-s,2,2*s),t+=8})),a.save()}},Z=(t,e)=>{const s=Math.ceil(e/2),i=t.length/s,r=[],o=[];for(let e=0;e<t.length;e+=i){const s=t.slice(e,e+i).map((t=>t*t)).reduce(((t,e)=>t+e),0)/i;r.push(s),o.unshift(s)}return r.splice(0,1),o.concat(r)},q=(t,e)=>t.map((t=>t*e)),G=window.setInterval,Y=window.setTimeout,J=36e5,K=864e5;let X;const Q=()=>{clearTimeout(X),clearInterval(X)},tt=(t,e,s,i,r,o)=>{var n;let a=1;Q(),t((null===(n=e[r])||void 0===n?void 0:n.replace("{0}",`${a}`))||""),X=G((()=>{var i;a++,s&&o&&a>=s?o(t,e):t((null===(i=e[r])||void 0===i?void 0:i.replace("{0}",`${a}`))||"")}),i)},et=(t,e)=>{tt(t,e,60,6e4,"relTimeMin",st)},st=(t,e)=>{tt(t,e,24,J,"relTimeHr",it)},it=(t,e)=>{tt(t,e,30,K,"relTimeDay",rt)},rt=(t,e)=>{tt(t,e,12,2592e6,"relTimeMon",ot)},ot=(t,e)=>{tt(t,e,0,31536e6,"relTimeYr")},nt=(t,e)=>{Q(),t(e.relTimeNow||""),X=Y((()=>{((t,e)=>{Q(),t(e.relTimeMoment||""),X=Y((()=>{et(t,e)}),5e4)})(t,e)}),1e4)}},8:function(t,e){Object.defineProperty(e,"xh",{value:!0}),e.Constants=e.SEC_MULTIPLIER=e.ATTACHMENT_MAX_HEIGHT=e.MESSAGE_BLOCK_THRESOLD=e.ATTACHMENT_MAX_SIZE=e.BYTE_MULTIPLIER=e.SDK_VERSION=void 0;var s=function(){function t(){}return t.GEOLOCATION_REQUEST_DENIED=1,t.CHAT_SCROLL_DELAY=300,t.WEBSOCKET_READY_STATE=["CONNECTING","OPEN","CLOSING","CLOSED"],t.WEBSOCKET_CLOSE_EVENT={CODE:{ABNORMAL_CLOSURE:1006}},t.ATTACHMENT_HEADER={AUTHORIZATION:"Authorization",FILE_AUTH_TYPE:"x-oda-meta-file-authType",FILE_IS_PROTECTED:"x-oda-meta-file-isProtected",FILE_SIZE:"x-oda-meta-file-size"},t.MAX_SUGGESTIONS_COUNT=5,t.MIN_SUGGESTIONS_COUNT=1,t.SUGGESTIONS_COUNT_THRESHOLD=30,t.TIME={MIN_FIFTY:3e6},t}();e.Constants=s;e.SDK_VERSION="{version}",e.BYTE_MULTIPLIER=1024,e.ATTACHMENT_MAX_SIZE=25*e.BYTE_MULTIPLIER*e.BYTE_MULTIPLIER,e.MESSAGE_BLOCK_THRESOLD=1e4,e.ATTACHMENT_MAX_HEIGHT=211,e.SEC_MULTIPLIER=1e3},549:function(t,e,s){Object.defineProperty(e,"xh",{value:!0}),e.linkify=e.getEmbeddedVideo=void 0;var i=s(476),r=/\b(?:(?:https?|ftp):\/\/|(www\.))[-a-z0-9+&@#/%?=~_|!:,.;]*[-a-z0-9+&@#/%=~_|]/gimu;e.linkify=function(t,e,s){var o=a(t),c=p(o).replace((0,i.resetRegex)(r),n(s,e)),h=u(c);return w(h,e)};var o=function(t,e){var s;return v.some((function(i){var r=i.getID(t);return r&&(s=i.embed(r,e)),!!r})),s};e.getEmbeddedVideo=o;var n=function(t,e){return function(s,i){if(t){var r=o(s,e);if(r)return r}var n=i?"https://".concat(s):s;return'<a href="'.concat(n,'" target="_blank" rel="noreferrer">').concat(s,"</a>")}},a=function(t){var e;try{e=(0,i.parseDOM)(t)}catch(e){return t}return c(e),h(e),e.innerHTML},c=function(t){return t.querySelectorAll("a").forEach((function(t){t.outerHTML=l(t.outerHTML)})),t},h=function(t){t.querySelectorAll("*").forEach((function(t){if("A"!==t.tagName)for(var e=t.attributes,s=0;s<e.length;s++){var i=e[s];i.value=l(i.value)}}))},l=function(t){return t.replace(/(https?|www)/gim,m)},p=function(t){return t.replace(/&lt;|&gt;|&nbsp;|&amp;/gim,m)},u=function(t){var e=t;return d.forEach((function(t,s){e=e.replace(new RegExp(s,"g"),t)})),d.clear(),e},d=new Map,m=function(t){var e=performance.now().toString(36).replace(".","_")+Math.random().toString(36).substring(2);return d.set(e,t),e},g=function(t,e){var s;return t.replace((0,i.resetRegex)(e),(function(t,e){return e&&e.length&&(s=e),t})),s},f=/(?:youtu.*be.*)\/(?:watch\?v=|embed\/|v\/|shorts|)(.*?((?=[&#?])|$))/gm,b=/(?:https?:\/\/)?videohub\.oracle\.com\/media\/\S+\/([\w]+)/gim,v=[{getID:function(t){return g(t,f)},embed:function(t,e){return'<div class="'.concat(e,'-youtube-wrapper">')+'<iframe class="'.concat(e,'-video-wrapper" src="https://www.youtube.com/embed/').concat(t,'" frameborder="0" ')+'allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>'}},{getID:function(t){return g(t,b)},embed:function(t,e){var s="flashvars",i="allow";return'<div class="'.concat(e,'-ovh-wrapper"><iframe class="').concat(e,'-video-wrapper" src="https://cdnapisec.kaltura.com/p/2171811/sp/217181100/embedIframeJs/uiconf_id/35965902/partner_id/2171811?iframeembed=true&playerId=kaltura_player&entry_id=').concat(t,"&").concat(s,"[streamerType]=auto&amp;").concat(s,"[localizationCode]=en&amp;").concat(s,"[leadWithHTML5]=true&amp;").concat(s,"[sideBarContainer.plugin]=true&amp;").concat(s,"[sideBarContainer.position]=left&amp;").concat(s,"[sideBarContainer.clickToClose]=true&amp;").concat(s,"[chapters.plugin]=true&amp;").concat(s,"[chapters.layout]=vertical&amp;").concat(s,"[chapters.thumbnailRotator]=false&amp;").concat(s,"[streamSelector.plugin]=true&amp;").concat(s,"[EmbedPlayer.SpinnerTarget]=videoHolder&amp;").concat(s,"[dualScreen.plugin]=true&amp;").concat(s,"[hotspots.plugin]=1&amp;").concat(s,'[Kaltura.addCrossoriginToIframe]=true&amp;&wid=1_yz4xoltb" ').concat(i,'="autoplay *; fullscreen *; encrypted-media *" frameborder="0" height="auto" sandbox="').concat(i,"-forms ").concat(i,"-same-origin ").concat(i,"-scripts ").concat(i,"-top-navigation ").concat(i,"-pointer-lock ").concat(i,"-popups ").concat(i,"-modals ").concat(i,"-orientation-lock ").concat(i,"-popups-to-escape-sandbox ").concat(i,"-presentation ").concat(i,'-top-navigation-by-user-activation" ').concat(i,"fullscreen></iframe></div>")}}],w=function(t,e){var s=(0,i.parseDOM)(t);if(!s)return t;var r=s.querySelectorAll("video"),o="".concat(e,"-video-wrapper");return r.forEach((function(t){t.classList.add(o)})),s.innerHTML}},609:function(t,e){Object.defineProperty(e,"xh",{value:!0}),e.iconStartOver=e.iconInlineError=e.iconInlineLogo=e.iconInlineLaunch=e.iconThumbsUp=e.iconThumbsDown=e.iconSuccess=e.iconGenerating=e.iconCheck=e.iconZoom=e.iconWarn=e.iconVideo=e.iconTTSUnmute=e.iconTTSMute=e.iconShareMedia=e.iconShareLocation=e.iconShareFile=e.iconShareAudio=e.iconSend=e.iconSearch=e.iconRating=e.iconMic=e.iconLogo=e.iconLaunchButton=e.iconLanguage=e.iconKeyboard=e.iconImage=e.iconFile=e.iconExternalLink=e.iconExpandArrow=e.iconExpand=e.iconError=e.iconDownload=e.iconCollapse=e.iconClose=e.iconClearHistory=e.iconChevronPrevious=e.iconChevronNext=e.iconChevronDown=e.iconCaretDown=e.iconAudio=e.iconAttach=void 0;var s=R('<path d="M11.007 15.117A1 1 0 0 0 13 15V7l-.005-.176A3 3 0 0 0 7 7v8l.005.217A5 5 0 0 0 17 15V5h2v10a7 7 0 1 1-14 0V7a5 5 0 0 1 10 0v8l-.005.176A3 3 0 0 1 9 15V9h2v6z"/>');e.iconAttach=s;var i=R('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m7.764 17 1.849-4.87h1.012L12.486 17H11.32l-.32-.998H9.204L8.882 17zm1.722-1.883h1.226l-.617-1.916zm3.278-.415v-2.573h1.045v2.553c0 .531.079.916.235 1.152.156.233.404.349.744.349.344 0 .591-.116.743-.349.157-.236.235-.62.235-1.152v-2.553h1.045v2.573c0 .822-.165 1.427-.496 1.816-.326.384-.835.576-1.527.576s-1.204-.192-1.535-.576c-.326-.389-.489-.994-.489-1.816zM17.686 17v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>');e.iconAudio=i;var r=R('<path fill="#161513" d="m6 9 5.975 6L18 9H6z"/>');e.iconCaretDown=r;var o=R('<path d="M6.35 8L5 9.739 12 16l7-6.261L17.65 8 12 13.054z"/>');e.iconChevronDown=o;var n=R('<path d="M8 17.65L9.739 19 16 12 9.739 5 8 6.35 13.054 12z"/>');e.iconChevronNext=n;var a=R('<path d="M16 17.65L14.261 19 8 12l6.261-7L16 6.35 10.946 12z"/>');e.iconChevronPrevious=a;var c=R('<path d="M6 11h8v2H6zm0-4h12v2H6z"/><path d="M2 2v20h3.5l3-4H14v-2H7.5l-3 4H4V4h16v6h2V2z"/><path d="M20.3 12.3L19 13.6l-1.3-1.3-1.4 1.4 1.3 1.3-1.3 1.3 1.4 1.4 1.3-1.3 1.3 1.3 1.4-1.4-1.3-1.3 1.3-1.3z"/>');e.iconClearHistory=c;var h=R('<path d="M17.524 5 19 6.476 13.475 12 19 17.524 17.524 19 12 13.475 6.476 19 5 17.524 10.525 12 5 6.476 6.476 5 12 10.525z"/>');e.iconClose=h;var l=R('<path d="M11 13v9H9v-5.586l-6.293 6.293-1.414-1.414L7.586 15H2v-2zM21.293 1.293l1.414 1.414L16.414 9H22v2h-9V2h2v5.586z"/>');e.iconCollapse=l;var p=R('<path d="M4 15v5h16v-5h2v7H2v-7zm9-13v10.587l3.293-3.294 1.414 1.414L12 16.414l-5.707-5.707 1.414-1.414L11 12.585V2z"/>');e.iconDownload=p;var u=R('<path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM8.707 7.293l8 8-1.414 1.414-8-8z"/></svg>');e.iconError=u;e.iconExpand='<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path d="M4.99935 9.99967C4.99935 10.9201 4.25316 11.6663 3.33268 11.6663C2.41221 11.6663 1.66602 10.9201 1.66602 9.99967C1.66602 9.0792 2.41221 8.33301 3.33268 8.33301C4.25316 8.33301 4.99935 9.0792 4.99935 9.99967Z" fill="#161513"/><path d="M11.666 9.99967C11.666 10.9201 10.9198 11.6663 9.99935 11.6663C9.07887 11.6663 8.33268 10.9201 8.33268 9.99967C8.33268 9.0792 9.07887 8.33301 9.99935 8.33301C10.9198 8.33301 11.666 9.0792 11.666 9.99967Z" fill="#161513"/><path d="M18.3327 9.99967C18.3327 10.9201 17.5865 11.6663 16.666 11.6663C15.7455 11.6663 14.9993 10.9201 14.9993 9.99967C14.9993 9.0792 15.7455 8.33301 16.666 8.33301C17.5865 8.33301 18.3327 9.0792 18.3327 9.99967Z" fill="#161513"/></svg';e.iconExpandArrow='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 9L11.9746 15L18 9H6Z" fill="#161513"/></svg>';var d=R('<path class="st0" d="M20 20H4V4h7V2H2v20h20v-9h-2z"/><path xmlns="http://www.w3.org/2000/svg" class="st0" d="M14 2v2h4.6L8.3 14.3l1.4 1.4L20 5.4V10h2V2z"/>');e.iconExternalLink=d;var m=R('<path d="M14.414 2 21 8.584V22H3V2.009zM13 3.999l-8 .007v15.995h14V9.996l-6 .001zm4.585 3.998L15 5.413v2.585z"/>');e.iconFile=m;var g=R('<path d="M4 2h10.414L20 7.586V22H4zm2 2v16h12V9h-5V4zm9 1.414L16.586 7H15z"/><path d="M16 12a1 1 0 11-2 0 1 1 0 012 0zm-6.143 1L7 19h10l-2.857-4.5L12 16.75z"/>');e.iconImage=g;var f=R('<path d="M22 5v14H2V5zm-2 2H4v10h16zM7 13v2H5v-2zm12 0v2h-2v-2zm-4 0v2H9v-2zM7 9v2H5V9zm12 0v2h-2V9zm-4 0v2h-2V9zm-4 0v2H9V9z" />');e.iconKeyboard=f;var b=R('<path d="M13 14c-1.5 0-2.9-.4-4-1.1 1.1-2.4 1.7-5 1.9-6.9h9V4H7V2H5v2H2v2h6.9c-.2 1.7-.7 3.7-1.5 5.6C6.5 10.5 6 9.2 6 8H4c0 1.9.9 4 2.5 5.5C5.3 15.5 3.8 17 2 17v2c2.6 0 4.6-1.9 6.1-4.3 1.4.8 3 1.3 4.9 1.3zm7.6 4.6L17 10.5l-3.6 8.1-1.3 3 1.8.8L15 20h4l1.1 2.4 1.8-.8zm-4.7-.6l1.1-2.5 1.1 2.5z"/>');e.iconLanguage=b;e.iconLaunchButton='<svg width="36" height="36" viewBox="0 0 36 36"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.875 8.625a2.25 2.25 0 00-2.25 2.25v16c0 .621.504 1.125 1.125 1.125h.284c.298 0 .585-.119.796-.33l2.761-2.76a2.25 2.25 0 011.59-.66h15.944a2.25 2.25 0 002.25-2.25V10.875a2.25 2.25 0 00-2.25-2.25H7.875zM24.75 18a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm-4.5-2.25a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-9 2.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z" fill="#fff"/></svg>';var v=R('<path d="M4.014 3C2.911 3 2 3.888 2 4.992v15c0 .6.408 1.008 1.007 1.008h.6a.887.887 0 0 0 .695-.288l3.094-3.12c.407-.384.91-.6 1.415-.6h11.175C21.089 16.992 22 16.104 22 15V4.992C22 3.888 21.089 3 19.986 3zm3.981 7.008A1.986 1.986 0 0 1 6.005 12c-1.103 0-1.99-.888-1.99-1.992s.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.995 0C13.99 11.112 13.103 12 12 12s-1.99-.888-1.99-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016zm5.996 0c0 1.104-.888 1.992-1.99 1.992s-1.991-.888-1.991-1.992.887-2.016 1.99-2.016 1.99.912 1.99 2.016z" fill="#fff"/>');e.iconLogo=v;var w=R('<path d="M7 22v-2h4v-2.062C7.06 17.444 4 14.073 4 10h2c0 3.309 2.691 6 6 6s6-2.691 6-6h2c0 4.072-3.059 7.444-7 7.938V20h4v2h-6zm5-20c2.206 0 4 1.794 4 4v4c0 2.206-1.794 4-4 4s-4-1.794-4-4V6c0-2.206 1.794-4 4-4zm0 2c-1.103 0-2 .897-2 2v4c0 1.103.897 2 2 2s2-.897 2-2V6c0-1.103-.897-2-2-2z"/>');e.iconMic=w;var x=R('<path d="M19.33 23.02l-7.332-3.666-7.332 3.666 1.418-7.995L1 9.555l7.331-1.222L11.998 1l3.666 7.333 7.332 1.222-5.084 5.47z"/>');e.iconRating=x;var k=R('<path d="M10 2a8 8 0 016.317 12.91l5.383 5.384-1.414 1.414-5.386-5.384A8 8 0 1110 2zm0 2a6 6 0 100 12 6 6 0 000-12z" fill="rgb(22, 21, 19)"/>');e.iconSearch=k;var y=R('<path d="M13 22V5.414l5.293 5.293 1.414-1.414L12 1.585 4.293 9.293l1.414 1.414L11 5.414V22h2z" fill="#161513"/>');e.iconSend=y;var _=R('<path d="M22 2v20H2V2zm-2 2H4v16h16zm-3 1.674V14a2 2 0 11-2.15-1.995L15 12V8.326l-5 1.428V16a2 2 0 11-2.15-1.995L8 14V8.246z"/>');e.iconShareAudio=_;var z=R('<path d="M13.414 2L17 5.586V7h.414L21 10.586V22H7v-4H3V2zM17 9.414V18H9v2h10v-8.586zm-2-3L12.586 4H5v12h10zM13 11v2H7v-2zm-2-4v2H7V7z"/>');e.iconShareFile=z;var M=R('<path d="M12 2c3.874 0 6.994 3.28 6.99 7.214l.011.285c.008.927-.202 2.23-.787 3.837-.96 2.639-2.73 5.452-5.49 8.353L12 22.45l-.724-.761c-2.76-2.901-4.53-5.714-5.49-8.353-.627-1.722-.823-3.095-.782-4.03l.006-.252C5.134 5.147 8.205 2 12 2zm0 2C9.254 4 7.006 6.362 7.002 9.386L7 9.529c-.004.694.168 1.753.667 3.123.741 2.036 2.038 4.221 4.014 6.507l.32.365.32-.365c1.867-2.159 3.127-4.228 3.886-6.166l.128-.34c.535-1.469.694-2.58.664-3.259l-.008-.32C16.879 6.244 14.676 4 12 4zm0 2a3 3 0 1 1-.001 6A3 3 0 0 1 12 6zm0 2a1 1 0 1 0 .001 2A1 1 0 0 0 12 8z"/>');e.iconShareLocation=M;var C=R('<path d="M22 2v16h-4v4H2V6h4V2zm-9.036 12.378L6.93 20H16v-2.585zM16 8H4v11.999l9.036-8.377L16 14.585zm4-4H8v2h10v10h2zM7 9a2 2 0 110 4 2 2 0 010-4z"/>');e.iconShareMedia=C;var S=R('<path fill="#161513" d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12zm15.207-2.793-1.414-1.414L10 13.586l-2.293-2.293-1.414 1.414L10 16.414z"/>');e.iconSuccess=S;var $=R('<path d="M1.707.293l22 22-1.414 1.414L12 13.414V21l-6.35-5.114H1V7.954h4.65l.5-.39L.293 1.707zM19.67 4.446c2.119 1.967 3.302 4.613 3.33 7.452a10.363 10.363 0 01-1.392 5.295l-1.476-1.476c.58-1.18.88-2.472.868-3.8-.023-2.29-.981-4.43-2.697-6.025zM7.583 8.996l-1.232.955H3v3.964h3.351L10 16.875v-5.461zm8.051-1.68C17.15 8.547 17.991 10.21 18 11.999c.003.482-.055.956-.17 1.416l-1.86-1.86c-.133-1.017-.691-1.964-1.604-2.706zM12 3v4.586L9.424 5.01z"/>');e.iconTTSMute=$;var T=R('<path d="M13 3v18l-6.35-5.114H2V7.954h4.65zm5.67 1.446c2.119 1.967 3.302 4.613 3.33 7.452.029 2.904-1.15 5.658-3.316 7.75l-1.396-1.421c1.772-1.71 2.735-3.95 2.712-6.31-.023-2.29-.981-4.43-2.697-6.025zM11 7.125L7.351 9.95H4v3.964h3.351L11 16.875zm4.634.19C17.15 8.548 17.991 10.212 18 12c.01 1.806-.828 3.5-2.358 4.771l-1.284-1.519c1.065-.885 1.65-2.037 1.642-3.242-.006-1.187-.587-2.309-1.634-3.16z"/>');e.iconTTSUnmute=T;var A=R('<path d="M4 2h10.414L20 7.586V10h-2V9h-5V4H6v16h12v-1h2v3H4zm11 3.414L16.586 7H15z"/><path d="m12.36 17-1.796-4.87h1.18l1.138 3.584 1.153-3.585h1.132L13.37 17zm3.33 0v-4.87h1.046V17zm1.996 0v-4.87h1.635c.795 0 1.396.205 1.802.616.407.41.61 1.018.61 1.822 0 .795-.203 1.4-.61 1.816-.402.41-1.002.616-1.802.616zm1.622-4.02h-.577v3.17h.577c.45 0 .786-.128 1.005-.383.223-.259.335-.659.335-1.2s-.11-.94-.329-1.198c-.218-.26-.556-.389-1.011-.389z"/>');e.iconVideo=A;var O=R('<path fill="#161513" d="m12 2 10 18H2zm-1 12h2v-4h-2zm0 1v2h2v-2z"/>');e.iconWarn=O;var I=R('<path d="M11 2a9 9 0 017.032 14.617l3.675 3.676-1.414 1.414-3.676-3.675A9 9 0 1111 2zm0 2a7 7 0 100 14 7 7 0 000-14zm1 3v3h3v2h-3v3h-2v-3H7v-2h3V7z"/>');e.iconZoom=I;var E=R('<path fill="#161513" fill-rule="evenodd" d="M21.205 6.707 8.998 18.914l-6.707-6.707 1.414-1.414 5.293 5.293L19.791 5.293l1.414 1.414Z" clip-rule="evenodd"/>');e.iconCheck=E;var L=R('<path fill="#161513" d="M10.998 3c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm0 18c0-.55.45-1 1-1s1 .44 1 1c0 .55-.44 1-.99 1a.999.999 0 0 1-1.01-1Zm11-9c0-.55-.45-1-1-1-.56 0-1 .45-1 1.01 0 .55.45.99 1 .99.56 0 1-.45 1-1Zm-19-1c.55 0 1 .45 1 1s-.44 1-1 1c-.55 0-1-.44-1-.99 0-.56.44-1.01 1-1.01Zm1.93-6.072a1.004 1.004 0 0 0 0 1.415.998.998 0 0 0 1.42-.007.995.995 0 0 0-.007-1.408.997.997 0 0 0-1.414 0Zm12.727 14.143a1.004 1.004 0 0 1 0-1.415.997.997 0 0 1 1.414 0 .995.995 0 0 1 .007 1.408.998.998 0 0 1-1.421.007ZM6.34 17.657a1.003 1.003 0 0 0-1.414 0 .998.998 0 0 0 .007 1.42.994.994 0 0 0 1.407-.005.997.997 0 0 0 0-1.415ZM3.336 9.359a1.004 1.004 0 0 1-.523-1.314.997.997 0 0 1 1.314-.523.995.995 0 0 1 .527 1.305 1 1 0 0 1-1.318.532Zm16.01 5.806a1 1 0 1 0 1.841.782.994.994 0 0 0-.527-1.305.997.997 0 0 0-1.314.523ZM7.52 19.87a1.003 1.003 0 0 1 1.314-.523.996.996 0 0 1 .523 1.314.995.995 0 0 1-1.305.527 1 1 0 0 1-.532-1.318Zm-4.18-5.23a.995.995 0 0 0-.527 1.305 1 1 0 1 0 .527-1.305Zm5.488-9.984a.995.995 0 0 1-1.305-.527.997.997 0 0 1 .523-1.314.999.999 0 1 1 .782 1.841Zm5.814 16.005c.218.505.8.744 1.305.527a.999.999 0 1 0-.782-1.841.997.997 0 0 0-.523 1.314Z"/>');e.iconGenerating=L;var P=R('<path fill="#161513" d="M3.47 1.667h14.862v9.166h-4.459l-3.333 7.5h-.542c-1.157 0-2.002-.324-2.566-.846-.551-.511-.767-1.152-.767-1.654V12.5H1.5L3.47 1.667Zm10.695 7.5h2.5V3.333h-2.5v5.834Zm-1.667-5.834H4.86l-1.363 7.5h4.835v5c0 .055.034.247.232.43.143.132.412.298.908.369l3.026-6.809v-6.49Z"/>',"20");e.iconThumbsDown=P;var j=R('<path fill="#161513" d="M3.47 18.333h14.862V9.167h-4.459l-3.333-7.5h-.542c-1.157 0-2.002.324-2.566.847-.551.51-.767 1.151-.767 1.653V7.5H1.5l1.97 10.833Zm10.695-7.5h2.5v5.834h-2.5v-5.834Zm-1.667 5.834H4.86l-1.363-7.5h4.835v-5c0-.055.034-.247.232-.43.143-.132.412-.298.908-.369l3.026 6.809v6.49Z"/>',"20");e.iconThumbsUp=j;var H=R('<path fill="#C74634" d="M3.345 2.5c-.92 0-1.679.74-1.679 1.66v12.5c0 .5.34.84.84.84h.499c.26 0 .42-.08.58-.24l2.577-2.6c.34-.32.76-.5 1.18-.5h9.312c.92 0 1.679-.74 1.679-1.66V4.16c0-.92-.76-1.66-1.679-1.66H3.344Zm3.317 5.84c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Zm4.996 0c0 .92-.74 1.66-1.659 1.66s-1.658-.74-1.658-1.66c0-.92.74-1.68 1.658-1.68.92 0 1.659.76 1.659 1.68Z"/>',"20");e.iconInlineLaunch=H;var V=R('<path fill="#C74634" d="M2.677 2c-.736 0-1.343.592-1.343 1.328v10c0 .4.272.672.671.672h.4a.591.591 0 0 0 .464-.192l2.062-2.08c.272-.256.608-.4.943-.4h7.45c.736 0 1.343-.592 1.343-1.328V3.328c0-.736-.607-1.328-1.343-1.328H2.677ZM5.33 6.672C5.33 7.408 4.739 8 4.004 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.997 0C9.328 7.408 8.736 8 8 8a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.327.608 1.327 1.344Zm3.996 0c0 .736-.591 1.328-1.326 1.328a1.324 1.324 0 0 1-1.327-1.328c0-.736.591-1.344 1.327-1.344.735 0 1.326.608 1.326 1.344Z"/>',"16");e.iconInlineLogo=V;var F=R('<path fill="#8F520A" d="M1.332 14.667 7.998 1.333l6.667 13.334H1.332Zm6-7.334V10h1.333V7.333H7.332Zm0 4v1.334h1.333v-1.334H7.332Z"/>',"16");e.iconInlineError=F;var N=R('<path fill="#211e1c" fill-rule="evenodd" d="M10.364 4c4.665 0 8.492 3.29 8.632 7.747L19 12v1.585l1.293-1.292 1.414 1.414L18 17.414l-3.707-3.707 1.414-1.414L17 13.585V12c0-3.419-2.935-6-6.636-6C6.853 6 4 8.906 4 12.5S6.853 19 10.364 19a6.243 6.243 0 0 0 3.764-1.258l.228-.18 1.272 1.544A8.25 8.25 0 0 1 10.364 21C5.74 21 2 17.19 2 12.5 2 7.81 5.74 4 10.364 4z"/>');function R(t,e){return'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 '.concat(e||"24"," ").concat(e||"24",'">').concat(t,"</svg>")}e.iconStartOver=N},168:function(t,e,s){var i=this&&this.kh||function(){return i=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};Object.defineProperty(e,"xh",{value:!0}),e.setAttributes=e.getFieldInputValues=e.configureColorCustomization=e.getFormShareText=e.getShareText=e.getColor=e.throttle=e.debounce=e.configureLocale=e.syncTTSLocaleIfUnavailable=e.setLinksOpenInNewWindow=e.setEmbeddedLinksHandler=e.sanitizeText=e.matchStringIgnoreCase=e.convertBreakTagsToNewLines=e.isSVG=e.isInteger=e.isFeedbackComponent=e.getPopupContent=e.getFooterFormComponent=e.isAnyVoiceAvailable=void 0;var r=s(373),o=s(517),n=s(476),a=s(819);e.isAnyVoiceAvailable=function(t,e){if(!e)return Promise.resolve(!1);if(Array.isArray(e)||(e=[e]),!e.length)return Promise.resolve(!1);var s=e.map((function(t){var e;return null===(e=t.lang)||void 0===e?void 0:e.toLowerCase()}));return t.getVoices().then((function(t){for(var e=!1,i=t.map((function(t){return t.lang.toLowerCase()})),r=0,o=s;r<o.length;r++){var n=o[r];if(i.indexOf(n)>=0){e=!0;break}}return e}))},e.getFooterFormComponent=function(t,e,s,i){var o=a.MessageComponentFactory.fromMessage(s,t,{messagePayload:{type:r.MessageType.Form,forms:[e]}},i);return o.onActionClick=i.onMessageActionClicked,o},e.getPopupContent=function(t,e,s,i){var o=t.createDiv(["wrapper","popup-content-wrapper","none"]),n=t.createDiv(["popup-dialog"]),c=a.MessageComponentFactory.fromMessage(s,t,{messagePayload:e});return c.onActionClick=function(e){(e.type!==r.ActionType.SubmitForm||c.validateForm())&&(t.addCSSClass(o,"none"),i(e))},n.appendChild(c.render()),o.appendChild(n),o.onclick=function(e){n.contains(e.target)||t.addCSSClass(o,"none")},o},e.isFeedbackComponent=function(t){return void 0!==t.ratingId};e.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};e.isSVG=function(t){var e=t.match(/<svg\s/gi);return e&&e.length>0};var c=/<br\s*\/?>/g;e.convertBreakTagsToNewLines=function(t){return t.replace(c,"\n")},e.matchStringIgnoreCase=function(t,e){return t.toLowerCase()===e.toLowerCase()};var h,l=[{match:/<([a-z])/gi,replace:function(t,e){return"&#x3c;".concat(e)}},{match:/<\/([a-z])/gi,replace:function(t,e){return"&#x3c;&#47;".concat(e)}}];function p(t,e){var s=t.toLowerCase();for(var i in e)if(s===i.toLowerCase())return!0;return!1}function u(t,e){var s=t.toLowerCase().split("-")[0];for(var i in e)if(s===i.toLowerCase())return!0;return!1}function d(t,e){void 0===e&&(e=!1);var s=t.title?"".concat(t.title," - "):"";return(0,r.isFormEntityWithFields)(t)?t.fields.forEach((function(t){s+=t.value?"".concat(t.value," - "):""})):t.formRows.forEach((function(t){t.columns.forEach((function(t){t.fields.forEach((function(t){(0,r.isReadOnlyField)(t)&&(s+=t.value?"".concat(t.value," - "):"")}))}))})),e?m(s):s}function m(t){return t.length?t.slice(0,t.length-3):t}e.sanitizeText=function(t){return l.forEach((function(e){t=t.replace((0,n.resetRegex)(e.match),e.replace)})),t},e.setEmbeddedLinksHandler=function t(e,s){for(var i=0;i<e.childElementCount;i++){var r=e.children[i];if("a"===r.tagName.toLowerCase()){var o=r;o.rel="noreferrer noopener",s.onclick&&(o.onclick=s.onclick.bind(o)),s.target&&(o.target=s.target)}r.hasChildNodes()&&t(r,s)}},e.setLinksOpenInNewWindow=function t(e){for(var s=function(s){var i=e.children[s];"a"===i.tagName.toLowerCase()&&(i.onclick=function(t){return window.open(i.href,"","height=450px,width=800px,menubar,toolbar,personalbar,status,resizable,noopener,noreferrer"),t.preventDefault(),t.stopPropagation(),!1}),i.hasChildNodes()&&t(i)},i=0;i<e.childElementCount;i++)s(i)},e.syncTTSLocaleIfUnavailable=(h=!1,function(t){var e;void 0===t&&(t={hasRecognition:!1,hasSynthesis:!1,isReset:!1,recognitionLocale:"",synthesisLocales:[]}),t.isReset&&(h=!1);var s=t.synthesisLocales;return Array.isArray(s)||(s=[]),t.hasRecognition&&t.hasSynthesis&&(null===(e=t.recognitionLocale)||void 0===e?void 0:e.length)&&(!h&&t.synthesisLocales.length||(h=!0,s=[{lang:t.recognitionLocale}])),s}),e.configureLocale=function(t,e){var s=[t.toLowerCase()],i="en";(s=s.concat((0,o.getLocales)())).indexOf(i)<0&&s.push(i);for(var r=0,n=s;r<n.length;r++){var a=n[r];if(p(a,e)){i=a;break}if(u(a,e)){i=a.split("-")[0];break}}return i},e.debounce=function(t,e){var s;return function(){var i=this,r=arguments;clearTimeout(s),s=setTimeout((function(){s=null,t.apply(i,r)}),e)}},e.throttle=function(t,e){var s=!1;return function(){s||(t.apply(this,arguments),s=!0,setTimeout((function(){s=!1}),e))}},e.getColor=function(t){var e=document.querySelector(".oda-chat-wrapper");return getComputedStyle(e).getPropertyValue(t)},e.getShareText=function(t){var e="";switch(t.type){case r.MessageType.Card:return t.cards.forEach((function(t){var s;e+="".concat((t.title?"".concat(t.title," - "):"")+(t.description?"".concat(t.description," - "):"")+(null!==(s=t.url)&&void 0!==s?s:""),"\n")})),e;case r.MessageType.Text:return t.text;case r.MessageType.Attachment:return t.attachment.url;case r.MessageType.Location:var s=t.location;return"".concat(s.title?"".concat(s.title," - "):"").concat(s.latitude,", ").concat(s.longitude);case r.MessageType.Table:t.rows.forEach((function(t){t.fields.forEach((function(t){e+=t.value?"".concat(t.value," - "):""}))}));break;case r.MessageType.Form:t.forms.forEach((function(t){var s=d(t);e+=s?"".concat(s," - "):""}));break;case r.MessageType.EditForm:var i=t;e=i.title?"".concat(i.title," - "):"",(0,r.isEditFormPayloadWithFields)(i)?i.fields.forEach((function(t){(0,r.isReadOnlyField)(t)?e+=t.value?"".concat(t.value," - "):"":e+=t.label?"".concat(t.label," - "):""})):i.formRows.forEach((function(t){t.columns.forEach((function(t){t.fields.forEach((function(t){(0,r.isReadOnlyField)(t)?e+=t.value?"".concat(t.value," - "):"":e+=t.label?"".concat(t.label," - "):""}))}))}));break;case r.MessageType.TableForm:var o=t;o.rows.forEach((function(t,s){t.fields.forEach((function(t){e+=t.value?"".concat(t.value," - "):""})),e+=d(o.forms[s])}))}return m(e)},e.getFormShareText=d,e.configureColorCustomization=function(t,e){if(t){var s=i({},t);["headerBackground","visualizer","ratingStarFill"].forEach((function(e){s[e]=t[e]||t.branding})),["botText","userText"].forEach((function(e){s[e]=t[e]||t.text})),Object.keys(s).forEach((function(t){var i=s[t];if(i)if("shareMenuText"===t)e.updateCSSVar("--color-popup-button-text",i);else{var r="--color-".concat(t.replace(/([A-Z&])/g,"-$1").toLowerCase());e.updateCSSVar(r,i)}}))}},e.getFieldInputValues=function(t){var e={};return t&&Object.keys(t).forEach((function(s){var i;e[s]=null===(i=document.getElementById(t[s]))||void 0===i?void 0:i.value})),e},e.setAttributes=function(t,e){for(var s=0,i=Object.entries(e);s<i.length;s++){var r=i[s],o=r[0],n=r[1];t.setAttribute(o,n)}}},517:function(t,e){Object.defineProperty(e,"xh",{value:!0}),e.isStorageAvailable=e.getLocales=e.getBrowserLocale=void 0;e.getBrowserLocale=function(){return navigator.language.toLowerCase()};e.getLocales=function(){var t;return(null===(t=navigator.languages)||void 0===t?void 0:t.map((function(t){return t.toLowerCase()})))||[]};e.isStorageAvailable=function(t){return s(t)};var s=function(t){var e;try{e=window[t];var s="__storage_test__";return e.setItem(s,s),e.removeItem(s),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}},820:function(t,e,s){Object.defineProperty(e,"xh",{value:!0}),e.ActionComponentFactory=void 0;var i=s(373),r=s(480),o=s(81),n=s(600),a=s(887),c=s(103),h=s(161),l=s(817),p=s(291),u=s(25),d=function(){function t(){}return t.fromActionPayload=function(e,s,p,d,m){switch(e.type){case i.ActionType.Postback:return new a.PostbackActionComponent(s,e);case i.ActionType.Url:return new l.UrlActionComponent(s,e,p.openLinksInNewWindow,p.linkHandler);case i.ActionType.Webview:return new l.UrlActionComponent(s,e,p.openLinksInNewWindow,m.webviewLinkHandler);case i.ActionType.Location:return new o.LocationActionComponent(s,e);case i.ActionType.Call:return new r.CallActionComponent(s,e);case i.ActionType.Share:return new c.ShareActionComponent(s,e,d);case i.ActionType.SubmitForm:return new h.SubmitFormActionComponent(s,e);case i.ActionType.Popup:return new n.PopupActionComponent(s,e,p,m.onMessageActionClicked);case i.ActionType.Client:return new u.ClientActionComponent(s,e,d);default:return t.logger.error("Payload contains wrong action type:".concat(e.type)),null}},t.logger=new p.Logger("ActionComponentFactory"),t}();e.ActionComponentFactory=d},819:function(t,e,s){Object.defineProperty(e,"xh",{value:!0}),e.MessageComponentFactory=void 0;var i=s(776),r=s(512),o=s(346),n=s(398),a=s(913),c=s(858),h=s(65),l=s(774),p=s(462),u=s(158),d=s(643),m=s(865),g=s(373),f=s(305),b=function(){function t(){}return t.fromMessage=function(t,e,s,b){var v,w;(0,f.isBotMessage)(s)?(v=n.MESSAGE_SIDE.LEFT,w=s.source||g.SkillMessageSource.Bot):v=n.MESSAGE_SIDE.RIGHT;var x=s.messagePayload;switch(x.type){case g.MessageType.Postback:case g.MessageType.Text:return x.channelExtensions&&"stars"===x.channelExtensions.displayType?new l.FeedbackComponent(t,e,x,v,w,b):new c.TextMessageComponent(t,e,x,v,w,b);case g.MessageType.TextStream:return new h.TextStreamMessageComponent(t,e,x,v,w,b);case g.MessageType.Attachment:return new i.AttachmentMessageComponent(t,e,x,v,w,b);case g.MessageType.Card:return new r.CardMessageComponent(t,e,x,v,w,b);case g.MessageType.Location:return new o.LocationMessageComponent(t,e,x,v,w,b);case g.MessageType.Table:return new m.TableMessageComponent(t,e,x,v,w,b);case g.MessageType.Form:return new u.FormMessageComponent(t,e,x,v,w,b);case g.MessageType.TableForm:return new d.TableFormMessageComponent(t,e,x,v,w,b);case g.MessageType.EditForm:return new p.EditFormMessageComponent(t,e,x,v,w,b);case g.MessageType.Raw:return new a.RawMessageComponent(t,e,x,v,w,b);default:throw Error("Wrong message payload type:".concat(x.type))}},t}();e.MessageComponentFactory=b},291:function(t,e){Object.defineProperty(e,"xh",{value:!0}),e.Logger=void 0;var s={NONE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},i=function(){function t(t){this.Ze=t}return t.prototype.debug=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];this.qe(t.LOG_LEVEL.DEBUG,e)},t.prototype.error=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];this.qe(t.LOG_LEVEL.ERROR,e)},t.prototype.info=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];this.qe(t.LOG_LEVEL.INFO,e)},t.prototype.warn=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];this.qe(t.LOG_LEVEL.WARN,e)},t.prototype.qe=function(e,s){if(t.logLevel>=e){s.unshift("[".concat(t.appName,".").concat(t.appVersion,".").concat(this.Ze,"]"));var i=void 0;switch(e){case t.LOG_LEVEL.ERROR:i=console.error;break;case t.LOG_LEVEL.WARN:i=console.warn;break;case t.LOG_LEVEL.INFO:i=console.info;break;case t.LOG_LEVEL.DEBUG:i=console.debug}i.apply(console,s)}},t.LOG_LEVEL=s,t.logLevel=t.LOG_LEVEL.NONE,t}();e.Logger=i},305:function(t,e){Object.defineProperty(e,"xh",{value:!0}),e.getMessageDigest=e.isBotMessage=void 0,e.isBotMessage=function(t){return!!t.source},e.getMessageDigest=function(t){if(t.msgId)return t.msgId;var e=JSON.stringify(t.messagePayload);return"".concat(s(e))};var s=function(t){for(var e=0,s=0,i=Math.pow(9,9);e<t.length;)s=Math.imul(s^t.charCodeAt(e++),i);return s^s>>>9}},777:function(t,e,s){Object.defineProperty(e,"xh",{value:!0}),e.ActionComponent=void 0;var i=s(549),r=s(373),o=function(){function t(t,e){var s,i;this.util=t,this.$e=!1,this.Te=e.type,this.Ae=e.label,this.Oe=e.imageUrl,this.Ie=e.style,this.Ee=e.tooltip,this.Le=e.displayType,this.Pe=null===(s=e.channelExtensions)||void 0===s?void 0:s.activeImageUrl,this.je=null===(i=e.channelExtensions)||void 0===i?void 0:i.c2kText,this.Te!==r.ActionType.SubmitForm||this.Ie||(this.Ie=r.ActionStyle.Primary)}return t.prototype.render=function(){var t=this,e=this.util,s=e.createButton(["action-postback",this.Ie===r.ActionStyle.Primary?"primary":this.Ie===r.ActionStyle.Danger?"danger":""]);if(this.Le===r.ActionDisplayType.Icon&&e.addCSSClass(s,r.ActionDisplayType.Icon),s.onclick=this.handleOnClick.bind(this),this.Oe&&s.appendChild(e.createImage(this.Oe,["action-image"],this.Ae||"")),this.Ae){var o=(0,i.linkify)(this.Ae,e.cssPrefix),n=e.createTextDiv();if(this.Le===r.ActionDisplayType.Link){var a=e.createAnchor("",o);a.onclick=function(t){return t.preventDefault()},n.appendChild(a),e.addCSSClass(s,"display-link")}else if(this.je){n.innerHTML=String.fromCharCode(parseInt(this.Ae)+10111),e.addCSSClass(s,"c2k-action");var c=document.getElementsByClassName(this.je),h=Array.from(c);s.onmouseover=function(){n.innerHTML=String.fromCharCode(parseInt(t.Ae)+10121);for(var s=0,i=h;s<i.length;s++){var r=i[s];e.addCSSClass(r,"highlight")}},s.onmouseleave=function(){n.innerHTML=String.fromCharCode(parseInt(t.Ae)+10111);for(var s=0,i=h;s<i.length;s++){var r=i[s];e.removeCSSClass(r,"highlight")}}}else n.innerHTML=o;s.appendChild(n)}if(this.$e&&e.addCSSClass(s,"disabled"),this.Ee){var l=e.createDiv(["action-wrapper"]),p=e.createDiv(),u=e.createTextDiv(["tooltip","none"]);return u.innerText=this.Ee,u.setAttribute("role","tooltip"),p.appendChild(u),l.appendChild(s),l.appendChild(p),l}return this.He=s,s},t.prototype.handleOnClick=function(t){if(this.onActionClick&&!this.$e){var e={getPayload:this.getEventPayload.bind(this),label:this.Ae,imageUrl:this.Pe||this.Oe,type:this.Te};this.Pe&&this.He.lastElementChild.replaceWith(this.util.createImage(this.Pe,["action-image"],this.Ae||"")),this.onActionClick(e)}this.Te!==r.ActionType.Postback&&this.Te!==r.ActionType.Location&&this.Te!==r.ActionType.Share||(t.preventDefault(),t.stopPropagation())},t.prototype.disable=function(){this.$e=!0,this.He&&(this.util.addCSSClass(this.He,"disabled"),this.He.disabled=!0)},t.prototype.enable=function(){this.$e=!1,this.He&&(this.util.removeCSSClass(this.He,"disabled"),this.He.disabled=!1)},t.prototype.getActionType=function(){return this.Te},t}();e.ActionComponent=o},480:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.CallActionComponent=void 0;var o=function(t){function e(e,s){var i=t.call(this,e,s)||this;return i.Ve=s.phoneNumber,i}return r(e,t),e.prototype.render=function(){var e=this.util,s=t.prototype.render.call(this);"button"===s.tagName.toLowerCase()?e.addCSSClass(s,"action-call"):e.addCSSClass(s.firstElementChild,"action-call");var i=e.createAnchor("tel:".concat(this.Ve),"");return this.onActionClick=function(){i.click()},s},e.prototype.getEventPayload=function(){return Promise.resolve(this.Ve)},e}(s(777).ActionComponent);e.CallActionComponent=o},25:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.ClientActionComponent=void 0;var o=s(373),n=function(t){function e(e,s,i){var r=t.call(this,e,s)||this;return r.Ge=s,r.Ue=i,r}return r(e,t),e.prototype.render=function(){var e=this.util,s=t.prototype.render.call(this);return"button"===s.tagName.toLowerCase()?e.addCSSClass(s,"action-client"):e.addCSSClass(s.firstElementChild,"action-client"),s},e.prototype.getEventPayload=function(){return this.Ge.actionType===o.ClientActionType.COPY_MESSAGE_TEXT?Promise.resolve(this.Ue):Promise.resolve(this.Ge)},e}(s(777).ActionComponent);e.ClientActionComponent=n},81:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.LocationActionComponent=void 0;var o=s(373),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var e=this.util,s=t.prototype.render.call(this);return"button"===s.tagName.toLowerCase()?e.addCSSClass(s,"action-location"):e.addCSSClass(s.firstElementChild,"action-location"),s},e.prototype.getEventPayload=function(){return(0,o.getCurrentPosition)()},e}(s(777).ActionComponent);e.LocationActionComponent=n},600:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.PopupActionComponent=void 0;var o=s(777),n=s(168),a=function(t){function e(e,s,i,r){var o=t.call(this,e,s)||this;return o.Fe=i,o.Ne=r,o.Re=s.popupContent,o}return r(e,t),e.prototype.render=function(){var e=this.util,s=t.prototype.render.call(this);"button"===s.tagName.toLowerCase()?e.addCSSClass(s,"action-popup"):e.addCSSClass(s.firstElementChild,"action-popup");var i=(0,n.getPopupContent)(e,this.Re,this.Fe,this.Ne);return document.body.appendChild(i),this.onActionClick=function(){e.removeCSSClass(i,"none")},s},e.prototype.getEventPayload=function(){return Promise.resolve(this.Re)},e}(o.ActionComponent);e.PopupActionComponent=a},887:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.PostbackActionComponent=void 0;var o=function(t){function e(e,s){var i=t.call(this,e,s)||this;return i.De=s.postback,i}return r(e,t),e.prototype.getEventPayload=function(){return Promise.resolve(this.De)},e}(s(777).ActionComponent);e.PostbackActionComponent=o},103:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.ShareActionComponent=void 0;var o=function(t){function e(e,s,i){var r=t.call(this,e,s)||this;return r.Ue=i,r}return r(e,t),e.prototype.render=function(){var e=this.util,s=t.prototype.render.call(this);return"button"===s.tagName.toLowerCase()?e.addCSSClass(s,"action-share"):e.addCSSClass(s.firstElementChild,"action-share"),s},e.prototype.getEventPayload=function(){return Promise.resolve(this.Ue)},e}(s(777).ActionComponent);e.ShareActionComponent=o},161:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.SubmitFormActionComponent=void 0;var o=function(t){function e(e,s){var i=t.call(this,e,s)||this;return i.De=s.postback,i}return r(e,t),e.prototype.getEventPayload=function(){return Promise.resolve(this.De)},e}(s(777).ActionComponent);e.SubmitFormActionComponent=o},817:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.UrlActionComponent=void 0;var o=function(t){function e(e,s,i,r){void 0===i&&(i=!1);var o=t.call(this,e,s)||this;return o.Be=i,o.We=r,o.P=s.url,o}return r(e,t),e.prototype.render=function(){var e=this.util,s=t.prototype.render.call(this);if("button"===s.tagName.toLowerCase()?e.addCSSClass(s,"action-url"):e.addCSSClass(s.firstElementChild,"action-url"),this.P){var i=e.createAnchor(this.P,"",[],this.Be,this.We);s.onclick=function(){i.click()}}return s},e.prototype.getEventPayload=function(){return Promise.resolve(this.P)},e}(s(777).ActionComponent);e.UrlActionComponent=o},776:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.AttachmentMessageComponent=void 0;var o=s(72),n=s(212),a=s(717),c=s(495),h=s(398),l=s(373),p=function(t){function e(s,i,r,o,n,a){var c=t.call(this,s,i,r,o,n,a)||this;return c.rs=e.fromPayload(s,i,r.attachment,o,a,c.hasActions()),c}return r(e,t),e.fromPayload=function(t,e,s,i,r,h){if(void 0===h&&(h=!1),r&&r.authToken&&r.uri&&s.url.indexOf(r.uri)>=0&&!this.ts.test(s.url)){var p=null==r?void 0:r.authToken;(null==p?void 0:p.length)&&(s.url="".concat(s.url,"?token=").concat(p))}switch(s.type){case l.AttachmentType.Image:return new a.ImageAttachmentComponent(t,e,s,i,h);case l.AttachmentType.Video:return new c.VideoAttachmentComponent(t,e,s,i,h);case l.AttachmentType.Audio:return new o.AudioAttachmentComponent(t,e,s,i,h);case l.AttachmentType.File:return new n.FileAttachmentComponent(t,e,s,i,h);default:throw Error("Payload contains wrong attachment type")}},e.prototype.getContent=function(){return t.prototype.getContent.call(this,this.rs.render())},e.ts=/token=[a-z\.\d]+/i,e}(h.MessageComponent);e.AttachmentMessageComponent=p},61:function(t,e,s){Object.defineProperty(e,"xh",{value:!0}),e.AttachmentComponent=void 0;var i=s(609),r=s(398),o=s(373),n=s(8),a=function(){function t(t,e,s,i,r){this.settings=t,this.util=e,this.side=i,this.Je=r,this.P=s.url,this.Te=s.type;var o=s.url.split("/");this.Ke=decodeURI(s.title||o[o.length-1]),this.Xe=s.filename}return t.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t.prototype.Qe=function(t,e){var s=this.util,r=this.settings,o=s.createElement("a",[],!0),n=s.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:r.icons.download||i.iconDownload,iconCss:["attachment-download-icon"],title:r.i18n[r.locale].download});return o.setAttribute("href",t),o.setAttribute("download",e||""),o.setAttribute("target","_blank"),o.appendChild(n),o},t.prototype.createAttachment=function(t,e){var s=this,a=this.util,c=this.settings,h=a.createDiv(["attachment"]),l=a.createDiv(["attachment-placeholder","flex"]),p=a.createDiv(["attachment-icon"]),u=a.createImageIcon({icon:t});p.appendChild(u);var d=this.Ke,m=a.createDiv(["attachment-footer","flex",this.Je&&"with-actions"]),g=a.createLabel(["attachment-title"]),f=a.createDiv(["attachment-controls","flex"]);if(g.innerText=d,g.setAttribute("title",d),m.appendChild(g),this.Te===o.AttachmentType.Image){var b=a.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:c.icons.expandImage||i.iconZoom,iconCss:["attachment-expand-icon"],title:c.i18n[c.locale].imageViewerOpen});b.onclick=function(){s.createImagePreview(s.P,d)},f.appendChild(b)}if(this.side===r.MESSAGE_SIDE.LEFT&&f.appendChild(this.Qe(this.P,this.Xe)),e)switch(l.appendChild(e),e.onerror=function(){e.remove(),l.appendChild(p)},this.Te){case o.AttachmentType.Image:e.onload=function(){e.clientHeight>n.ATTACHMENT_MAX_HEIGHT&&(l.style.alignItems="flex-start"),m.appendChild(f)},e.onclick=function(){s.createImagePreview(s.P,s.Ke)};break;case o.AttachmentType.Audio:case o.AttachmentType.Video:e.onloadeddata=function(){m.appendChild(f)}}else l.appendChild(p),m.appendChild(f);return h.appendChild(l),null==h||h.appendChild(m),h},t.prototype.createImagePreview=function(t,e){var s=this.util,r="image-preview",o=this.settings,n=s.createDiv(["".concat(r,"-wrapper")]),a=s.createImage(t,[r]),c=s.createLabel(["".concat(r,"-title")]);c.innerText=e;var h=document.querySelector(".".concat(this.settings.name,"-wrapper")),l=o.icons.close||i.iconClose,p=s.createIconButton({css:["".concat(r,"-close")],icon:l,iconCss:["".concat(r,"-close-icon")],title:o.i18n[o.locale].imageViewerClose});p.onclick=function(){n.remove()},p.onkeydown=function(t){"Tab"===t.code&&(n.focus(),t.preventDefault())};var u=s.createDiv(["".concat(r,"-header")]);u.appendChild(c),u.appendChild(p),n.appendChild(u),n.appendChild(a),n.setAttribute("tabindex","-1"),n.onkeydown=function(t){"Escape"===t.code&&n.remove()},h.appendChild(n),n.focus()},t}();e.AttachmentComponent=a},72:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.AudioAttachmentComponent=void 0;var o=s(609),n=s(168),a=s(398),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var t=this.util,e=this.settings,s=e.icons.fileAudio||o.iconAudio,i=t.createMedia("video",this.P,["attachment-audio"]);i.controls=!0,i.preload="metadata",a.MESSAGE_SIDE.RIGHT===this.side&&i.setAttribute("controlsList","nodownload");var r='<a href="'.concat(this.P,'">'),c=e.i18n[e.locale].attachmentAudioFallback.replace("{0}",r).replace("{/0}","</a>");return i.innerHTML=c,e.linkHandler?(0,n.setEmbeddedLinksHandler)(i,e.linkHandler):e.openLinksInNewWindow&&(0,n.setLinksOpenInNewWindow)(i),this.createAttachment(s,i)},e}(s(61).AttachmentComponent);e.AudioAttachmentComponent=c},212:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.FileAttachmentComponent=void 0;var o=s(609),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var t=this.settings.icons.fileGeneric||o.iconFile;return this.createAttachment(t)},e}(s(61).AttachmentComponent);e.FileAttachmentComponent=n},717:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.ImageAttachmentComponent=void 0;var o=s(61),n=s(609),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var t=this.util,e=this.settings.icons.fileImage||n.iconImage,s=t.createImage(this.P,["attachment-image"],this.Ke);return this.createAttachment(e,s)},e}(o.AttachmentComponent);e.ImageAttachmentComponent=a},495:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.VideoAttachmentComponent=void 0;var o=s(549),n=s(609),a=s(168),c=s(398),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var t=this.util,e=this.settings,s=this.P,i=e.icons.fileVideo||n.iconVideo,r=(0,o.getEmbeddedVideo)(s,t.cssPrefix);if(r){var h=t.createElement("span");return h.innerHTML=r,h}var l=t.createMedia("video",this.P,["attachment-video"]);l.controls=!0,l.preload="metadata",c.MESSAGE_SIDE.RIGHT===this.side&&l.setAttribute("controlsList","nodownload");var p='<a href="'.concat(this.P,'">'),u=e.i18n[e.locale].attachmentVideoFallback.replace("{0}",p).replace("{/0}","</a>");return l.innerHTML=u,this.settings.linkHandler?(0,a.setEmbeddedLinksHandler)(l,e.linkHandler):this.settings.openLinksInNewWindow&&(0,a.setLinksOpenInNewWindow)(l),this.createAttachment(i,l)},e}(s(61).AttachmentComponent);e.VideoAttachmentComponent=h},548:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.C2SQLBaseMessageComponent=void 0;var o=s(398),n=s(373),a=s(752),c=function(t){function e(e,s,i,r,o,n){var a=t.call(this,e,s,i,r,o,n)||this;return a.ns=[],a.cssPrefix=e.name,a.te=n,a.Ge=i,a}return r(e,t),e.prototype.disableActions=function(){t.prototype.disableActions.call(this),this.ns.forEach((function(t){t.disable()}))},e.prototype.disablePostbacks=function(){t.prototype.disablePostbacks.call(this),(0,a.getPostActions)(this.ns).forEach((function(t){t.disable()}))},e.prototype.enableActions=function(){t.prototype.enableActions.call(this),this.ns.forEach((function(t){t.enable()}))},e.prototype.enablePostbacks=function(){t.prototype.enablePostbacks.call(this),(0,a.getPostActions)(this.ns).forEach((function(t){t.enable()}))},e.prototype.render=function(){return t.prototype.render.call(this)},e.prototype.getHeader=function(){var e=this.util,s=t.prototype.getHeader.call(this);return e.addCSSClass(s,"message-header-yellow"),s},e.prototype.getContent=function(t){var e=this.util,s="message-bubble",i=this.Ge.type,r=e.createDiv([s]);i===n.MessageType.Table||i===n.MessageType.TableForm?e.addCSSClass(r,"".concat(s,"-tabular-message")):e.addCSSClass(r,"".concat(s,"-form-message"),i===n.MessageType.EditForm?"edit-form-message":""),t&&r.appendChild(t);var o=this.getPageStatus();return o&&r.appendChild(o),r},e.prototype.getPageStatus=function(){var t,e=this.util,s=this.Ge.paginationInfo;return s&&s.totalCount>s.rangeSize&&((t=e.createTextDiv(["results-page-status"])).innerText=s.status),t},e}(o.MessageComponent);e.C2SQLBaseMessageComponent=c},462:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}),o=this&&this.kh||function(){return o=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};Object.defineProperty(e,"xh",{value:!0}),e.EditFormMessageComponent=void 0;var n=s(373),a=s(609),c=s(8),h=s(548),l=s(476),p=s(291),u=s(955),d=s(158),m="aria-expanded",g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Rs=0,e.Ds=0,e.Us=[],e.Bs=new p.Logger("EditFormMessageComponent"),e.Ws={},e}return r(e,t),e.prototype.disableActions=function(){t.prototype.disableActions.call(this),f(this.Zs,this.Us,this.util)},e.prototype.disablePostbacks=function(){t.prototype.disablePostbacks.call(this),f(this.Zs,this.Us,this.util)},e.prototype.enableActions=function(){t.prototype.enableActions.call(this),f(this.Zs,this.Us,this.util,!1)},e.prototype.enablePostbacks=function(){t.prototype.enablePostbacks.call(this),f(this.Zs,this.Us,this.util,!1)},e.prototype.getContent=function(){var e=this,s=this.Ge,i=this.settings,r=this.util,o="form-message",a="".concat(o,"-item"),c=r.createDiv([o]),h=r.createDiv([a]);if(s.title){var l=r.createTextDiv(["".concat(o,"-header")]);l.innerText=s.title,c.appendChild(l)}return(0,n.isEditFormPayloadWithFields)(s)?(s.formColumns>2&&(s.formColumns=2),s.fields.filter((function(t){return t})).forEach((function(t){h.appendChild(e.qs(t,o,!1,s.formColumns))}))):s.formRows.forEach((function(t){var s=(0,d.getFormRow)(t,e.ns,r,i,e.shareText,e.handleOnActionClick.bind(e),e.options),n=t.columns.length;t.columns.forEach((function(t){var i=(0,d.getFormRowColumn)(t,r);t.fields.filter((function(t){return t})).forEach((function(s){i.appendChild(e.qs(s,o,!0)),(0,d.setMaxColumnWidth)(t.width,s.displayType,i,n)})),s.appendChild(i)})),h.appendChild(s)})),this.actions.concat(this.ns).some((function(t){return t.getActionType()===n.ActionType.SubmitForm}))||this.Bs.error("Payload does not contain submit-form action"),this.Gs(h,s.errorMessage||(this.Ds&&this.Rs>1?this.translations.editFormErrorMessage:""),!0),c.appendChild(h),this.Ys=h,t.prototype.getContent.call(this,c)},e.prototype.validateForm=function(){var t,e=this,s=!0;return null===(t=this.Zs)||void 0===t||t.remove(),this.Us.forEach((function(t){s=e.Js(t)&&s})),!s&&this.Rs>1&&this.Gs(this.Ys,this.translations.editFormErrorMessage,!0),s},e.prototype.getSubmittedFields=function(){var t=this;return this.Us.filter((function(e){var s=e.tagName.toLowerCase();return"textarea"===s&&(t.Ws[e.id]=e.value),"input"===s})).forEach((function(e){var s=e;switch(s.type){case"checkbox":t.Ws[s.id]=s.checked?s.getAttribute("valueOn"):s.getAttribute("valueOff");break;case"number":t.Ws[s.id]=s.valueAsNumber;break;default:t.Ws[s.id]=s.value}})),this.Ws},e.prototype.qs=function(t,e,s,i){var r=this.shareText,o=this.util;if(this.Rs++,(0,n.isReadOnlyField)(t)){var a=new u.FieldComponent(this.settings,o,t,r,this.options,i);return a.isColumnField=s,a.onActionClick=this.handleOnActionClick.bind(this),a.action&&this.ns.push(a.action),a.render()}return s?(0,u.applyMarginTop)(this.Ks(t,i,e,o),t.marginTop,o):this.Ks(t,i,e,o)},e.prototype.Ks=function(t,e,s,i){var r,o,c,h,p,d,g,f=this,b="".concat(s,"-field"),v=[b,"".concat(b,"-col-").concat(e),"edit-".concat(b)],w=i.createDiv(v),x=i.createDiv(["".concat(s,"-key"),"with-margin"]),k=t.labelFontSize,y=t.labelFontWeight,_=t.id,z=t.displayType,M=t.placeholder,C=t.required,S=t.clientErrorMessage,$=t.serverErrorMessage,T=t.autoSubmit;switch(x.innerHTML=t.label||"",(0,u.applyFontStyles)(x,k,y,i),w.appendChild(x),z){case n.DisplayType.SingleSelect:var A=t;if(d=A.defaultValue,g=A.layoutStyle,d&&(this.Ws[_]=d),g&&"list"!==g)if("radioGroup"===g){var O=i.createElement("form",["".concat(s,"-value"),"form-container","col"]);i.setAttributes(O,{id:_,ariaLabel:z,errorMsg:S}),O.onclick=function(t){return t.stopPropagation()},A.options.forEach((function(t){var e=i.createInputElement({type:"radio",name:_,value:t.label,required:C,checked:t.value===d},["radio-input"]);e.onchange=function(){e.checked&&(f.Ws[_]=t.value),f.Xs(_,T,O)};var s=i.createLabel();s.innerText=t.label,s.prepend(e),O.appendChild(s)})),this.Us.push(O),w.appendChild(O),this.Gs(O,$)}else this.Bs.error("Payload contains wrong layout style:".concat(g," for single select field"));else{var I,E=i.createDiv(["select-wrapper","".concat(s,"-value")]),L=i.createInputElement({type:"text",placeholder:M,required:C,id:_,autocomplete:"off"},["".concat(s,"-value")]),P=i.createDiv(),j=i.createDiv(["listbox","popup","none"]),H=i.createElement("ul",["single-select-list"]),V=H.getElementsByTagName("li"),F=i.createIconButton({css:["select-icon"],icon:a.iconCaretDown,iconCss:[],title:""}),N=function(t){"true"!==E.getAttribute(m)||P.contains(t.target)||(I||(L.value=""),D(!1))},R=function(){"false"===E.getAttribute(m)&&(E.setAttribute(m,"true"),i.removeCSSClass(j,"none"),setTimeout((function(){return document.addEventListener("click",N)})),L.focus())},D=function(t){void 0===t&&(t=!0),"true"===E.getAttribute(m)&&(I&&(L.value=I.textContent||I.innerText),E.setAttribute(m,"false"),i.addCSSClass(j,"none"),document.removeEventListener("click",N),f.Qs("",V,U),t&&L.focus())},U=[];i.setAttributes(E,{errorMsg:S}),E.setAttribute(m,"false"),E.setAttribute("aria-label",z),E.onclick=function(t){t.stopPropagation(),R()},E.oninput=function(){f.Qs(L.value,V,U)?R():D()},E.onkeydown=function(t){var e,s=t.key;s===l.KeyCode.Down||s===l.KeyCode.Up?!I||I.classList.contains("".concat(f.cssPrefix,"-none"))?null===(e=U[0])||void 0===e||e.focus():null==I||I.focus():s!==l.KeyCode.Esc&&s!==l.KeyCode.Tab||D()},L.onfocus=function(){return i.addCSSClass(E,"focused")},L.onblur=function(){return i.removeCSSClass(E,"focused")},F.onclick=function(t){t.stopPropagation(),"true"===E.getAttribute(m)?D():R()},null===(r=A.options)||void 0===r||r.forEach((function(t){var e=i.createListItem(t.label,t.label,t.label,"","",(function(){i.addCSSClass(e,"selected"),I&&i.removeCSSClass(I,"selected"),I=e,D(),f.Ws[_]=t.value,f.Xs(_,T,E)}),!1,!1);e.onkeydown=function(t){return f.ti(t,e,H,L,U)},t.value===d&&(i.addCSSClass(e,"selected"),I=e,L.value=t.label),H.appendChild(e)})),U=Array.from(V),P.onclick=function(t){return t.stopPropagation()},E.appendChild(L),E.appendChild(F),j.appendChild(H),P.appendChild(j),w.appendChild(E),w.appendChild(P),this.Us.push(E),this.Gs(L,$)}break;case n.DisplayType.MultiSelect:var B=t;if(d=B.defaultValue,g=B.layoutStyle,this.Ws[_]=d||[],g&&"list"!==g)if("checkboxes"===g){var W=i.createElement("form",["".concat(s,"-value"),"form-container","col"]);i.setAttributes(W,{id:_,ariaLabel:z,errorMsg:S,ariaRequired:C?"true":""}),W.onclick=function(t){return t.stopPropagation()},B.options.forEach((function(t){var e=i.createInputElement({type:"checkbox",name:_,value:t.label,checked:null==d?void 0:d.includes(t.value),required:C},["radio-input"]),s=i.createLabel();s.innerText=t.label,s.prepend(e),e.onchange=function(){if(e.checked)f.Ws[_].push(t.value);else{var s=f.Ws[_];s.splice(s.indexOf(t.value),1)}f.Xs(_,T,W)},W.appendChild(s)})),this.Us.push(W),w.appendChild(W),this.Gs(W,$)}else this.Bs.error("Payload contains wrong layout style:".concat(g," for multi select field"));else{var Z=i.createDiv(["".concat(s,"-value"),"text-field-container"]),q=i.createElement("ul",["selected-options"]),G=i.createDiv(),Y=i.createDiv(["listbox","popup","none"]),J=[],K=i.createDiv(["filter-message-box"]),X=i.createDiv(["filter-message-text","none"]),Q=i.createInputElement({type:"text"},["".concat(s,"-value"),"listbox-search","none"]),tt=i.createElement("ul",["multi-select-list"]),et=tt.getElementsByTagName("li"),st=i.createDiv(["search-icon-wrapper","none"]),it=i.createImageIcon({icon:a.iconSearch,iconCss:["search-icon"]});X.textContent=this.translations.noResultText,K.appendChild(X),Q.oninput=function(){return f.Qs(Q.value,et,J)?i.addCSSClass(X,"none"):i.removeCSSClass(X,"none")},Q.onkeydown=function(t){var e,s=t.key;s===l.KeyCode.Down?(f.Qs(Q.value,et,J),null===(e=J[0])||void 0===e||e.focus()):s!==l.KeyCode.Esc&&s!==l.KeyCode.Tab||Z.click()},M&&q.setAttribute("data-placeholder",M),Z.setAttribute(m,"false");var rt=function(t){"true"!==Z.getAttribute(m)||G.contains(t.target)||ot()},ot=function(){Z.setAttribute(m,"false"),i.addCSSClass(Y,"none"),document.removeEventListener("click",rt),Q.value="",f.Qs(Q.value,et,J),i.addCSSClass(Q,"none"),i.addCSSClass(st,"none"),i.addCSSClass(X,"none")};Z.onclick=function(t){if(t.stopPropagation(),"true"===Z.getAttribute(m))ot(),Z.focus();else{Z.setAttribute(m,"true"),i.removeCSSClass(Y,"none");var e=tt.firstElementChild;e?e.focus():i.removeCSSClass(X,"none"),setTimeout((function(){return document.addEventListener("click",rt)}))}},Z.onkeydown=function(t){var e=t.code;t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||e===l.KeyCode.Esc||e===l.KeyCode.Tab||(Z.click(),i.removeCSSClass(Q,"none"),i.removeCSSClass(st,"none"),Q.focus())},Z.setAttribute("aria-required",C?"true":"false"),Z.tabIndex=0,S&&Z.setAttribute("data-error",S),B.options.forEach((function(t){var e=function(e){var s=i.createDiv(["multi-select-option"]);s.innerText=t.label;var r=i.createImageIcon({icon:a.iconClose,iconCss:["opt-close"]});r.onclick=function(){q.removeChild(s),tt.appendChild(e);var i=f.Ws[_];i.splice(i.indexOf(t.value),1),f.Xs(_,T,Z)},s.appendChild(r),s.onclick=function(t){t.stopPropagation(),"true"===Z.getAttribute(m)&&Z.click()},q.appendChild(s)},s=i.createListItem(t.label,t.label,t.label,"","",(function(){Z.click(),tt.removeChild(s),f.Ws[_].push(t.value),e(s),f.Xs(_,T,Z)}),!1,!1);s.onkeydown=function(t){return f.ti(t,s,tt,Z,J)},(null==d?void 0:d.includes(t.value))?e(s):tt.appendChild(s)})),G.onclick=function(t){return t.stopPropagation()},Z.appendChild(q),this.Us.push(Z),w.appendChild(Z),st.appendChild(it),Y.appendChild(K),Y.appendChild(Q),Y.appendChild(st),Y.appendChild(tt),G.appendChild(Y),w.appendChild(G),this.Gs(Z,$)}break;case n.DisplayType.Toggle:var nt=t,at=i.createLabel(["".concat(s,"-value"),"toggle"]);at.tabIndex=0,at.onclick=function(t){return t.stopPropagation()},p=i.createInputElement({id:_,placeholder:M,required:C,type:"checkbox",checked:nt.defaultValue===nt.valueOn,errorMsg:S,valueOn:nt.valueOn,valueOff:nt.valueOff});var ct=nt.labelOn||nt.valueOn,ht=nt.labelOff||nt.valueOff;p.setAttribute("aria-label",p.checked?ct:ht),p.oninput=function(){p.setAttribute("aria-label",p.checked?ct:ht),f.Xs(_,T,p)},at.appendChild(p),at.appendChild(i.createDiv(["round-slider"])),w.appendChild(at),this.Gs(p.parentElement,$);break;case n.DisplayType.DatePicker:var lt=t;p=i.createInputElement({type:"date",id:_,title:M,required:C,defaultValue:lt.defaultValue,min:lt.minDate,max:lt.maxDate,errorMsg:S},["".concat(s,"-value")]);break;case n.DisplayType.TimePicker:var pt=t;p=i.createInputElement({type:"time",id:_,title:M,required:C,defaultValue:pt.defaultValue,min:pt.minTime,max:pt.maxTime,errorMsg:S},["".concat(s,"-value")]);break;case n.DisplayType.TextInput:var ut=t;if(ut.multiLine){var dt=i.createElement("textarea",["".concat(s,"-value")],!0);i.setAttributes(dt,{id:_,required:C,minLength:ut.minLength,maxLength:ut.maxLength,defaultValue:ut.defaultValue,placeholder:ut.placeholder,errorMsg:S}),dt.rows=3,dt.onchange=function(){return f.Xs(_,T,dt)},dt.onclick=function(t){return t.stopPropagation()},w.appendChild(dt),this.Us.push(dt),this.Gs(dt,$)}else p=i.createInputElement({type:ut.inputStyle||"text",id:_,placeholder:M,required:C,defaultValue:ut.defaultValue,errorMsg:S,minLength:ut.minLength,maxLength:ut.maxLength,pattern:ut.validationRegularExpression},["".concat(s,"-value")]);break;case n.DisplayType.NumberInput:var mt=t;p=i.createInputElement({type:"number",id:_,placeholder:M,required:C,defaultValue:null===(o=mt.defaultValue)||void 0===o?void 0:o.toString(),min:null===(c=mt.minValue)||void 0===c?void 0:c.toString(),max:null===(h=mt.maxValue)||void 0===h?void 0:h.toString(),errorMsg:S},["".concat(s,"-value")]);break;default:this.Bs.error("Payload contains wrong display type:".concat(z," for editable field"))}return p&&("checkbox"!==p.type&&(w.appendChild(p),this.Gs(p,$),p.onchange=function(){return f.Xs(_,T,p)},p.onclick=function(t){return t.stopPropagation()}),this.Us.push(p)),w},e.prototype.Js=function(t,e){var s=this;void 0===e&&(e=!1);var i,r=t.dataset.error,o=function(){e||("SPAN"===(null==a?void 0:a.tagName)&&(s.util.removeCSSClass(t.parentElement,"error"),a.remove(),s.Ds--),c||s.Gs(t,i||s.translations.editFieldErrorMessage))},a=t.nextElementSibling,c=!0;switch(t.tagName.toLowerCase()){case"form":var h=t,l=h.getAttribute("aria-label");if(l===n.DisplayType.MultiSelect&&"true"===h.ariaRequired)h.querySelectorAll("input[type='checkbox']:checked").length||(c=!1,i=r||h.querySelector("input").validationMessage);else l!==n.DisplayType.SingleSelect||h.checkValidity()||(c=!1,i=r||h.querySelector("input").validationMessage);break;case"input":var p=t;"checkbox"===p.type?a=a.parentElement.nextElementSibling:p.checkValidity()||(i=r||p.validationMessage,c=!1);break;case"textarea":var u=t;u.checkValidity()||(i=r||u.validationMessage,c=!1);break;case"div":var d=t;a=a.nextElementSibling,d.getAttribute("aria-label")===n.DisplayType.SingleSelect?setTimeout((function(){var t=d.firstElementChild;return t.checkValidity()||(c=!1,i=r||t.validationMessage),o(),c})):"true"===d.getAttribute("aria-required")&&(i=r,c=!!d.firstElementChild.firstElementChild)}return o(),c},e.prototype.Qs=function(t,e,s){var i=this.util;s.length=0;for(var r=0;r<e.length;r++){var o=e[r],n=o.querySelector("span"),a=o.textContent||o.innerText;a.toLowerCase().indexOf(t.toLowerCase())<0?(i.addCSSClass(o,"none"),n.innerHTML=a.replace(/(<b>)|(<\/b>)/g,"")):(n.innerHTML=t?a.replace(new RegExp("".concat(t),"gi"),"<b>$&</b>"):a.replace(/(<b>)|(<\/b>)/g,""),i.removeCSSClass(o,"none"),s.push(o))}return s.length>0},e.prototype.ti=function(t,e,s,i,r){var o,n,a,c,h=this.cssPrefix,p=r.indexOf(e),u=r.length,d=!1;if(!(t.ctrlKey||t.altKey||t.metaKey)){if(t.shiftKey&&t.code===l.KeyCode.Tab)i.click();else switch(t.code){case l.KeyCode.Return:case l.KeyCode.Space:e.click(),d=!0;break;case l.KeyCode.Esc:case l.KeyCode.Tab:i.click(),t.code===l.KeyCode.Esc&&(i.focus(),d=!0);break;case l.KeyCode.Up:var m=e.previousElementSibling||s.lastElementChild;m.classList.contains("".concat(h,"-none"))?null===(o=r[(p+u-1)%u])||void 0===o||o.focus():m.focus(),d=!0;break;case l.KeyCode.Down:var g=e.nextElementSibling||s.firstElementChild;g.classList.contains("".concat(h,"-none"))?null===(n=r[(p+1)%u])||void 0===n||n.focus():g.focus(),d=!0;break;case l.KeyCode.Home:case l.KeyCode.PageUp:var f=s.firstElementChild;f.classList.contains("".concat(h,"-none"))?null===(a=r[0])||void 0===a||a.focus():f.focus(),d=!0;break;case l.KeyCode.End:case l.KeyCode.PageDown:var b=s.lastElementChild;b.classList.contains("".concat(h,"-none"))?null===(c=r[u-1])||void 0===c||c.focus():b.focus(),d=!0;break;default:if(i instanceof HTMLInputElement)i.focus();else{var v=s.previousElementSibling,w=v.previousElementSibling,x=this.util;x.removeCSSClass(w,"none"),x.removeCSSClass(v,"none"),w.focus()}}d&&(t.stopPropagation(),t.preventDefault())}},e.prototype.Xs=function(t,e,s){var i=this;if(this.Js(s)&&e){var r=JSON.parse(JSON.stringify(this.getSubmittedFields()));this.Us.forEach((function(t){i.Js(t,!0)||delete r[t.id]})),Object.keys(r).forEach((function(t){var e=r[t];Array.isArray(e)?0===e.length&&delete r[t]:0===e||e||delete r[t]}));var a=this.settings.sdkMetadata?o({version:c.SDK_VERSION},this.settings.sdkMetadata):{version:c.SDK_VERSION};this.te.webCore.sendMessage((0,n.buildUserMessage)({submittedFields:r,partialSubmitField:t,type:n.MessageType.FormSubmission}),{sdkMetadata:a}).then((function(){var t=i.settings.disablePastActions;"all"===t?i.disableActions():"postback"===t&&i.disablePostbacks()}))}},e.prototype.Gs=function(t,e,s){if(void 0===s&&(s=!1),e){var i=this.util,r=i.createTextSpan(["field-error",s?"form-error":""]),o=i.createImageIcon({icon:a.iconError,iconCss:["form-error-icon"]}),n=i.createTextSpan(["error-text"]);if(n.innerText=e,r.appendChild(o),r.appendChild(n),s)t.appendChild(r),this.Zs=r;else{var c=t.parentElement;i.addCSSClass(c,"error"),c.appendChild(r),this.Ds++}}},e}(h.C2SQLBaseMessageComponent);function f(t,e,s,i){void 0===i&&(i=!0),t&&(i?s.addCSSClass(t,"disabled"):s.removeCSSClass(t,"disabled")),e.forEach((function(t){switch(t.tagName.toLowerCase()){case"form":var e=t.getElementsByTagName("input");i?s.addCSSClass(t,"disabled"):s.removeCSSClass(t,"disabled");for(var r=0;r<e.length;r++){e[r].disabled=i}break;case"input":var o=t;o.disabled=i,"checkbox"===o.type&&(i?s.addCSSClass(t.parentElement,"disabled"):s.removeCSSClass(t.parentElement,"disabled"));break;case"textarea":t.disabled=i;break;case"div":i?(s.addCSSClass(t,"disabled"),s.addCSSClass(t.parentElement,"disabled")):(s.removeCSSClass(t,"disabled"),s.removeCSSClass(t.parentElement,"disabled"))}}))}e.EditFormMessageComponent=g},955:function(t,e,s){Object.defineProperty(e,"xh",{value:!0}),e.applyMarginTop=e.applyFontStyles=e.FieldComponent=void 0;var i=s(373),r=s(476),o=s(168),n=s(820),a=s(752),c=s(819),h=s(549),l=function(){function t(t,e,s,r,o,a){this.Fe=t,this.os=e,this.Fs=s,this.Ns=a,this.isTableField=!1,this.isColumnField=!1,s.displayType===i.DisplayType.Action&&(this.action=n.ActionComponentFactory.fromActionPayload(s.action,e,t,r,o))}return t.prototype.render=function(){var t,e=this.os,s=this.Fs,n="form-message",a=this.Fe,c=s.alignment,l=s.label,g=s.labelFontSize,f=s.labelFontWeight,b=s.marginTop,v=s.onHoverPopupContent,w=e.createTextDiv(["".concat(n,"-value")]),x=null===(t=s.value)||void 0===t?void 0:t.toString();switch(s.displayType){case i.DisplayType.Link:var k=e.createDiv(),y=s,_=y.imageUrl,z=y.linkLabel,M=e.createElement("a",z?[]:["ellipsis"],!0);if(M.href=x,_){var C=e.createImage(_,["video-wrapper"],x);C.alt=z||"",M.appendChild(C),l&&e.addCSSClass(w,"with-top-margin")}else M.innerHTML=z||(0,r.stripHTTP)(x)||"";M.setAttribute("target","_blank"),k.appendChild(M),a.linkHandler?(0,o.setEmbeddedLinksHandler)(k,a.linkHandler):a.openLinksInNewWindow&&(0,o.setLinksOpenInNewWindow)(k),w.appendChild(M);break;case i.DisplayType.Text:var S=s,$=S.fontSize,T=S.fontWeight,A=S.truncateAt;x&&A?(w.innerHTML="".concat(x.slice(0,A),"..."),w.title=x):w.innerHTML=x||"",p(w,$,T,e);break;case i.DisplayType.Media:var O=s.mediaType,I=l&&x;switch(O){case"image":var E=e.createImage(x,["video-wrapper"],x);I&&e.addCSSClass(w,"with-top-margin"),w.appendChild(E);break;case"video":(0,h.getEmbeddedVideo)(x,e.cssPrefix)?(w.innerHTML=(0,h.linkify)(x,e.cssPrefix,a.embeddedVideo),a.embeddedVideo&&I&&e.addCSSClass(w,"with-top-margin")):w.appendChild(m(O,x,w,I,e));break;case"audio":w.appendChild(m(O,x,w,I,e))}break;case i.DisplayType.Action:e.addCSSClass(w,"flex"),w.style.justifyContent=c,l&&e.addCSSClass(w,"with-top-margin"),this.action.onActionClick=this.onActionClick,w.appendChild(this.action.render())}if(this.isTableField)return d(w,v,a,e),w;var L="".concat(n,"-field"),P=[L,"".concat(L,"-col-").concat(this.Ns)],j=e.createDiv(P),H=e.createDiv(["".concat(n,"-key")]);return H.innerHTML=l||"",c&&(H.style.textAlign=c,w.style.textAlign=c),p(H,g,f,e),j.appendChild(H),j.appendChild(w),d(j,v,a,e),this.isColumnField?u(j,b,e):j},t.prototype.disableActions=function(){this.action.disable()},t.prototype.disablePostbacks=function(){(0,a.getPostActions)([this.action]).forEach((function(t){t.disable()}))},t.prototype.enableActions=function(){this.action.enable()},t.prototype.enablePostbacks=function(){(0,a.getPostActions)([this.action]).forEach((function(t){t.enable()}))},t}();function p(t,e,s,i){switch(e){case"large":i.addCSSClass(t,"font-size-lg");break;case"small":i.addCSSClass(t,"font-size-sm");break;default:i.addCSSClass(t,"font-size-md")}switch(s){case"bold":i.addCSSClass(t,"font-weight-bold");break;case"light":i.addCSSClass(t,"font-weight-light");break;default:i.addCSSClass(t,"font-weight-md")}}function u(t,e,s){return"large"===e?s.addCSSClass(t,"margin-top-lg"):"none"!==e&&s.addCSSClass(t,"margin-top-md"),t}function d(t,e,s,i){if(e){var r=c.MessageComponentFactory.fromMessage(s,i,{messagePayload:e});if(r){var o=i.createDiv(),n=i.createDiv(["popupContent"]);n.appendChild(r.render()),n.setAttribute("role","tooltip"),o.appendChild(n),t.style.cursor="pointer",t.appendChild(o)}}}e.FieldComponent=l,e.applyFontStyles=p,e.applyMarginTop=u;var m=function(t,e,s,i,r){var o=r.createMedia(t,e,["video-wrapper"]);return o.controls=!0,o.preload="metadata",i&&r.addCSSClass(s,"with-top-margin"),o}},158:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.setMaxColumnWidth=e.getFormRowColumn=e.getFormRow=e.getFormItem=e.applySelectAction=e.FormMessageComponent=void 0;var o=s(373),n=s(548),a=s(820),c=s(955),h=s(168),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getContent=function(){var e=this,s=this.util,i=this.settings,r=this.Ge,o="form-message",n=s.createDiv([o]);r.formColumns>2&&(r.formColumns=2);var a=r.forms;return a.forEach((function(t,c){if(t.title){var h=s.createTextDiv(["".concat(o,"-header")]);h.innerText=t.title,n.appendChild(h)}var l=p(s,t,r.formColumns,i,e.handleOnActionClick.bind(e),e.te),u=l[0],d=l[1];e.ns=e.ns.concat(d);var m=c+1;m===a.length||a[m].title||s.addCSSClass(u,"with-border"),n.appendChild(u)})),t.prototype.getContent.call(this,n)},e}(n.C2SQLBaseMessageComponent);function p(t,e,s,i,r,n){var l,p,f="form-message",b="".concat(f,"-actions-col"),v=null===(l=e.channelExtensions)||void 0===l?void 0:l.c2kReferences,w=t.createDiv(["".concat(f,"-item"),v?"c2k-reference":""]),x=(0,h.getFormShareText)(e,!0),k=function(t,e,s,i,r,o){var n,c=[];if((null===(n=t.actions)||void 0===n?void 0:n.length)>0)for(var h=0,l=t.actions;h<l.length;h++){var p=l[h],u=a.ActionComponentFactory.fromActionPayload(p,e,s,r,o);u&&(u.onActionClick=i,c.push(u))}return c}(e,t,i,r,x,n);(k.length&&(p=function(t,e,s,i){for(var r=e.createDiv("horizontal"!==s.formActionsLayout?["form-actions","col",i]:["form-actions"]),o=0,n=t;o<n.length;o++){var a=n[o].render();r.appendChild(a)}return r}(k,t,i,b)),(0,o.isFormEntityWithRows)(e)?e.formRows.forEach((function(e,s){var a=u(e,k,t,i,x,r,n),h=e.columns.length;if(e.columns.forEach((function(e){var s=m(e,t);e.fields.forEach((function(a){if((0,o.isReadOnlyField)(a)){var l=new c.FieldComponent(i,t,a,x,n);l.isColumnField=!0,l.onActionClick=r,l.action&&k.push(l.action),g(e.width,a.displayType,s,h),s.appendChild(l.render())}})),a.appendChild(s)})),v&&0!==s){var l=t.createTextSpan(["delimiter"]);l.innerHTML="&bull;",a.firstElementChild.firstElementChild.lastElementChild.prepend(l)}w.appendChild(a)})):e.fields.forEach((function(e){var o=new c.FieldComponent(i,t,e,x,n,s);o.onActionClick=r,o.action&&k.push(o.action),w.appendChild(o.render())})),p&&w.appendChild(p),e.selectAction)&&d(a.ActionComponentFactory.fromActionPayload(e.selectAction,t,i,x,n),k,r,w,e.selectAction.label);return[w,k]}function u(t,e,s,i,r,o,n){var c=s.createDiv(["form-row",t.separator?"separator":""]);t.selectAction&&d(a.ActionComponentFactory.fromActionPayload(t.selectAction,s,i,r,n),e,o,c,t.selectAction.label);return c}function d(t,e,s,i,r){t&&(e.push(t),t.onActionClick=s,i.onclick=function(e){return t.handleOnClick(e)},i.title=r||"",i.style.cursor="pointer")}function m(t,e){var s=t.width,i=t.verticalAlignment,r=e.createDiv(["form-row-column",s||""]);return"center"===i?e.addCSSClass(r,"align-center"):"bottom"===i?e.addCSSClass(r,"align-end"):e.addCSSClass(r,"align-start"),r}function g(t,e,s,i){"stretch"===t||e!==o.DisplayType.Media||s.style.maxWidth||(s.style.maxWidth="calc((100% - ".concat(16*(i-1),"px)/").concat(i,")"))}e.FormMessageComponent=l,e.getFormItem=p,e.getFormRow=u,e.applySelectAction=d,e.getFormRowColumn=m,e.setMaxColumnWidth=g},865:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.applyHeadingWidth=e.createTableCell=e.TableMessageComponent=void 0;var o=s(548),n=s(955),a=s(820),c=s(158),h=100,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getContent=function(){var e=this,s=this.util,i=this.Ge,r=u(i.headings),o="table-message",h=s.createDiv(["".concat(o,"-wrapper")]),l=s.createElement("table",[o]);h.appendChild(l);var d=s.createElement("tr",["".concat(o,"-headings")]);return r.forEach((function(t){var e=p(s,["".concat(o,"-heading")],t.width,t.alignment);e.innerText=t.label,d.appendChild(e)})),l.appendChild(d),i.rows.forEach((function(t){var i=s.createElement("tr",["".concat(o,"-row")]);if(t.selectAction){var h=a.ActionComponentFactory.fromActionPayload(t.selectAction,s,e.settings,e.shareText,e.options);(0,c.applySelectAction)(h,e.ns,e.handleOnActionClick.bind(e),i,t.selectAction.label)}t.fields.forEach((function(t,a){var c=p(s,["".concat(o,"-item")],r[a].width,t.alignment),h=new n.FieldComponent(e.settings,s,t,e.shareText,e.options);h.isTableField=!0,h.onActionClick=e.handleOnActionClick.bind(e),h.action&&e.ns.push(h.action),c.appendChild(h.render()),i.appendChild(c)})),l.appendChild(i)})),t.prototype.getContent.call(this,h)},e}(o.C2SQLBaseMessageComponent);function p(t,e,s,i){var r=t.createElement("td",e,!0);return r.style.textAlign=i,r.style.width="".concat(s,"%"),r}function u(t){var e;if(t.every((function(t){return!t.width||t.width>=0&&t.width<=h}))){var s=0,i=0;if(t.forEach((function(t){t.width?i+=t.width:s++})),s)if(i<h){var r=(h-i)/s;e=t.map((function(t){return t.width||(t.width=r),t}))}else e=d(t);else if(i===h)e=t;else{var o=h/i;e=t.map((function(t){return t.width=t.width*o,t}))}}else e=d(t);return e}function d(t){var e=h/t.length;return t.map((function(t){return t.width=e,t}))}e.TableMessageComponent=l,e.createTableCell=p,e.applyHeadingWidth=u},643:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.TableFormMessageComponent=void 0;var o=s(548),n=s(865),a=s(158),c=s(609),h=s(955),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getContent=function(){var e=this,s=this.util,i=this.Ge,r=(0,n.applyHeadingWidth)(i.headings.concat({alignment:"center",label:""})),o="table-message",l=s.createDiv(["".concat(o,"-wrapper")]),p=s.createElement("table",[o,"tableform-message"]);l.appendChild(p);var u=s.createElement("tr",["".concat(o,"-headings")]);return r.forEach((function(t){var e=(0,n.createTableCell)(s,["".concat(o,"-heading")],t.width,t.alignment);e.innerText=t.label,u.appendChild(e)})),p.appendChild(u),u.lastElementChild.style.width="32px",i.rows.forEach((function(t,l){var u=s.createElement("tr",["".concat(o,"-row")]);t.fields.forEach((function(t,i){var a=(0,n.createTableCell)(s,["".concat(o,"-item")],r[i].width,t.alignment),c=new h.FieldComponent(e.settings,s,t,e.shareText,e.options);c.isTableField=!0,c.onActionClick=e.handleOnActionClick.bind(e),c.action&&e.ns.push(c.action),a.appendChild(c.render()),u.appendChild(a)})),i.formColumns>2&&(i.formColumns=2);var d=i.forms[l],m=(0,n.createTableCell)(s,["".concat(o,"-item"),"button-cell"]),g=s.createIconButton({css:["".concat(o,"-item"),"".concat(o,"-item-form-toggle")],icon:c.iconChevronDown,iconCss:[],title:d.title||""});m.appendChild(g),u.appendChild(m);var f="none",b="rotate-180",v=(0,a.getFormItem)(s,d,i.formColumns,e.settings,e.handleOnActionClick.bind(e),e.te),w=v[0],x=v[1];e.ns=e.ns.concat(x),s.addCSSClass(w,f);var k=!1;u.onclick=function(){k?(s.addCSSClass(w,f),s.removeCSSClass(g,b)):(s.removeCSSClass(w,f),s.addCSSClass(g,b)),k=!k},p.appendChild(u),p.appendChild(w)})),t.prototype.getContent.call(this,l)},e}(o.C2SQLBaseMessageComponent);e.TableFormMessageComponent=l},512:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}),o=this&&this._h||function(t,e,s){if(s||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"xh",{value:!0}),e.CardMessageComponent=void 0;var n=s(609),a=s(101),c=s(398),h=s(168),l=function(t){function e(e,s,i,r,o,n){var c=t.call(this,e,s,i,r,o,n)||this;c.ls=[],c.ps=i.layout,c.us=i.cards.length;var h=0;return i.cards.forEach((function(t){h++,c.ls.push(new a.CardComponent(c.settings,s,t,h,n))})),c.globalActions=c.actions.concat(c.globalActions),c.actions=[],c.ds=!1,c}return r(e,t),e.prototype.hasActions=function(){return this.ls[0].hasActions()||this.actions.length>0||this.globalActions.length>0},e.prototype.disableActions=function(){t.prototype.disableActions.call(this),this.ls.forEach((function(t){t.disableActions()}))},e.prototype.disablePostbacks=function(){t.prototype.disablePostbacks.call(this),this.ls.forEach((function(t){t.disablePostbacks()}))},e.prototype.enableActions=function(){t.prototype.enableActions.call(this),this.ls.forEach((function(t){t.enableActions()}))},e.prototype.enablePostbacks=function(){t.prototype.enablePostbacks.call(this),this.ls.forEach((function(t){t.enablePostbacks()}))},e.prototype.render=function(){var e=this.util,s=this.settings.name,i=["card-message-".concat(this.ps)],r=t.prototype.render.call(this);if(r.querySelector(".".concat(s,"-icon-wrapper"))){i.push("has-message-icon");var n=r.querySelector(".".concat(s,"-content-wrapper"));e.addCSSClass(n,"with-icon")}return e.addCSSClass.apply(e,o([r],i,!1)),r},e.prototype.setCardsScrollDirection=function(){this.ds="rtl"===getComputedStyle(this.gs).direction},e.prototype.getContent=function(){var t,e=this,s=this.util,i=this.us,r=s.createDiv(["card-message-content"]),o=s.createDiv(["card-message-cards"]),n=!0;(this.ls.forEach((function(t){t.onActionClick=e.handleOnActionClick.bind(e);var s=t.render();n&&t.hasActions()&&(e.firstActionButton=t.getFirstActionButton(),n=!1),o.appendChild(s)})),r.appendChild(o),"horizontal"===this.ps&&i>1)&&(r.appendChild(this.fs()),this.bs=0,o.addEventListener("scroll",(function(){window.clearTimeout(t),t=window.setTimeout((function(){for(var t=0,s=0;s<i;s++){var r=e.ds?i-s-1:s,n=o.children[r];if(o.scrollLeft<=n.offsetLeft+5){t=r;break}}t!==e.bs&&(e.bs=t,e.vs())}),100)})),window.addEventListener("resize",(0,h.debounce)((function(){e.ws()}),500)));return this.xs=r,this.gs=o,new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&e.ws()}))}),{root:document.querySelector(".oda-chat-conversation")}).observe(o),r},e.prototype.fs=function(){if(!this.ks){var t=this.util,e=this.translations.cardNavNext;this.ks=t.createDiv(["next-wrapper"]);var s=t.createIconButton({css:["round","next"],icon:n.iconChevronNext,iconCss:[],title:e});s.onclick=this.ys.bind(this),this.ks.appendChild(s)}return this.ks},e.prototype._s=function(){if(!this.zs){var t=this.util,e=this.translations.cardNavPrevious;this.zs=t.createDiv(["prev-wrapper"]);var s=t.createIconButton({css:["round","previous"],icon:n.iconChevronPrevious,iconCss:[],title:e});s.onclick=this.Ms.bind(this),this.zs.appendChild(s)}return this.zs},e.prototype.ys=function(){this.bs<this.us&&(this.bs++,this.vs())},e.prototype.Ms=function(){this.bs>0&&(this.bs--,this.vs())},e.prototype.vs=function(){var t,e,s,i,r=this.gs.children[this.bs];r&&(this.gs.scrollLeft=r.offsetLeft-56,0===this.bs?null===(t=this.zs)||void 0===t||t.remove():(null===(e=this.zs)||void 0===e?void 0:e.parentElement)||this.xs.prepend(this._s()),this.bs===this.us-1?null===(s=this.ks)||void 0===s||s.remove():(null===(i=this.ks)||void 0===i?void 0:i.parentElement)||this.xs.appendChild(this.fs()))},e.prototype.ws=function(){this.gs.scrollWidth===this.gs.offsetWidth?(this.ks&&(this.ks.hidden=!0),this.zs&&(this.zs.hidden=!0)):(this.ks&&(this.ks.hidden=!1),this.zs&&(this.zs.hidden=!1))},e}(c.MessageComponent);e.CardMessageComponent=l},101:function(t,e,s){Object.defineProperty(e,"xh",{value:!0}),e.CardComponent=void 0;var i=s(752),r=s(820),o=s(168),n=s(549),a=function(){function t(t,e,s,o,n){var a;if(this.Fe=t,this.os=e,this.te=n,this.ns=[],this.Ye=[],this.Ke=s.title,this.cs=s.description,this.Oe=s.imageUrl,this.P=s.url,s.actions){for(var c=0,h=s.actions;c<h.length;c++){var l=h[c],p=(this.Ke?"".concat(this.Ke," - "):"")+(this.cs?"".concat(this.cs," - "):"")+(null!==(a=this.P)&&void 0!==a?a:""),u=r.ActionComponentFactory.fromActionPayload(l,e,t,p,n);u&&(u.onActionClick=this.handleOnActionClick.bind(this),this.ns.push(u))}this.Ye=(0,i.getPostActions)(this.ns)}}return t.prototype.handleOnActionClick=function(t){this.onActionClick&&this.onActionClick(t)},t.prototype.render=function(){var t=this.os,e=this.Fe,s=e.embeddedVideo,i=e.locale,r=this.P,a=t.createDiv(["card"]),c=r?t.createAnchor(r,"",["card-component"],e.openLinksInNewWindow,e.linkHandler):t.createDiv(["card-content"]);if(this.P&&(c.innerText=""),this.Oe){var h=e.i18n,l=h[i].cardImagePlaceholder;if(this.te&&this.te.locale){var p=h[this.te.locale];l=p?p.cardImagePlaceholder:l}c.appendChild(t.createImage(this.Oe,["card-image"],l))}var u=t.createTextDiv(["card-title"]);if(u.innerHTML=(0,n.linkify)(this.Ke,t.cssPrefix,s),c.appendChild(u),this.cs){var d=t.createTextDiv(["card-description"]);d.innerHTML=(0,n.linkify)(this.cs,t.cssPrefix,s),c.appendChild(d)}if(a.appendChild(c),e.linkHandler?(0,o.setEmbeddedLinksHandler)(c,e.linkHandler):e.openLinksInNewWindow&&(0,o.setLinksOpenInNewWindow)(c),this.ns.length>0){for(var m=t.createDiv("horizontal"!==e.cardActionsLayout?["card-actions","col"]:["card-actions"]),g=!0,f=0,b=this.ns;f<b.length;f++){var v=b[f].render();g&&(this.hs=v,g=!1),m.appendChild(v)}a.appendChild(m)}return a},t.prototype.hasActions=function(){return this.ns.length>0},t.prototype.disableActions=function(){this.ns.forEach((function(t){return t.disable()}))},t.prototype.disablePostbacks=function(){this.Ye.forEach((function(t){return t.disable()}))},t.prototype.enableActions=function(){this.ns.forEach((function(t){return t.enable()}))},t.prototype.enablePostbacks=function(){this.Ye.forEach((function(t){return t.enable()}))},t.prototype.getFirstActionButton=function(){return this.hs},t}();e.CardComponent=a},346:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.LocationMessageComponent=void 0;var o=s(398),n=s(609),a=function(t){function e(e,s,i,r,o,n){var a=t.call(this,e,s,i,r,o,n)||this,c=i.location;return a.Ke=c.title,a.P=c.url,a.Cs=c.longitude,a.Ss=c.latitude,a}return r(e,t),e.prototype.render=function(){var t=this.util,e=t.createDiv(["message"]);e.lang=this.locale;var s=t.createDiv(["message-wrapper"]);e.appendChild(s);var i=t.createDiv(["attachment"]),r=t.createDiv(["attachment-placeholder","flex"]),o=t.createDiv(["attachment-icon"]),a=t.createImageIcon({icon:this.settings.icons.shareMenuLocation||n.iconShareLocation}),c=t.createDiv(["attachment-footer","flex"]),h=t.createLabel(["attachment-title"]);if(h.innerText=this.Ke?this.Ke:"".concat(this.Ss.toFixed(4),", ").concat(this.Cs.toFixed(4)),c.appendChild(h),o.appendChild(a),r.appendChild(o),!this.actions.length){var l=t.createDiv(["attachment-controls"]),p=t.createIconButton({css:["attachment-control-icon","attachment-button","flex"],icon:this.settings.icons.externalLink||n.iconExternalLink,iconCss:[],title:this.translations.openMap}),u=t.createAnchor(this.P||"https://www.google.com/maps/@".concat(this.Ss,",").concat(this.Cs,",12z"),"",[],this.settings.openLinksInNewWindow,this.settings.linkHandler);p.onclick=function(){u.click()},l.appendChild(p),c.appendChild(l)}return i.appendChild(r),i.appendChild(c),s.appendChild(this.getContent(i)),e},e}(o.MessageComponent);e.LocationMessageComponent=a},752:function(t,e,s){Object.defineProperty(e,"xh",{value:!0}),e.getPostActions=void 0;var i=s(373);e.getPostActions=function(t){return t.filter((function(t){var e=t.getActionType();return e===i.ActionType.Postback||e===i.ActionType.Location||e===i.ActionType.SubmitForm}))}},398:function(t,e,s){var i=this&&this.kh||function(){return i=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};Object.defineProperty(e,"xh",{value:!0}),e.MESSAGE_SIDE=e.MessageComponent=void 0;var r=s(752),o=s(820),n=s(168),a=s(549);e.MESSAGE_SIDE={LEFT:"left",RIGHT:"right"};var c=function(){function t(t,e,s,o,a,c){this.settings=t,this.util=e,this.payload=s,this.side=o,this.source=a,this.options=c,this.actions=[],this.globalActions=[],this.Ye=[],this.locale=t.locale,this.translations=t.i18n[this.locale],this.shareText=(0,n.getShareText)(s),c&&c.locale&&(this.locale=c.locale,this.translations=i(i({},this.translations),this.settings.i18n[c.locale])),s.actions&&(this.actions=this.buildActions(s.actions,this.shareText)),s.globalActions&&(this.globalActions=this.buildActions(s.globalActions,this.shareText)),this.headerText=s.headerText,this.footerText=s.footerText,s.footerForm&&(this.footerFormComponent=(0,n.getFooterFormComponent)(e,s.footerForm,t,c)),this.Ye=(0,r.getPostActions)(this.actions).concat((0,r.getPostActions)(this.globalActions))}return t.prototype.handleOnActionClick=function(t){if(this.onActionClick){var e=t;e.messageComponent=this,this.onActionClick(e)}},t.prototype.hasActions=function(){return this.actions.length>0||this.globalActions.length>0},t.prototype.focusFirstAction=function(){var t;null===(t=this.firstActionButton)||void 0===t||t.focus()},t.prototype.disableActions=function(){this.actions.forEach((function(t){t.disable()})),this.globalActions.forEach((function(t){t.disable()})),this.footerFormComponent&&this.footerFormComponent.disableActions()},t.prototype.disablePostbacks=function(){this.Ye.forEach((function(t){t.disable()})),this.footerFormComponent&&this.footerFormComponent.disablePostbacks()},t.prototype.enableActions=function(){this.actions.forEach((function(t){t.enable()})),this.globalActions.forEach((function(t){t.enable()})),this.footerFormComponent&&this.footerFormComponent.enableActions()},t.prototype.enablePostbacks=function(){this.Ye.forEach((function(t){t.enable()})),this.footerFormComponent&&this.footerFormComponent.enablePostbacks()},t.prototype.render=function(t){var e=this,s=this,i=s.util,r=s.actions,n=s.globalActions,a=this.payload.embeddedActions,c="embeddedAction";this.element&&(this.element.innerHTML="");var h=this.element?this.element:i.createDiv(["message"]);h.lang=s.locale;var l=i.createDiv(["message-wrapper"]);h.appendChild(l);var p=s.getContent(t);if(s.headerText&&l.appendChild(s.getHeader()),l.appendChild(p),r&&r.length){var u=s.getActions();(this.settings.displayActionsAsPills?l:p).appendChild(u),s.firstActionButton||(s.firstActionButton=u.firstElementChild),this.actionsWrapper=u}if(s.footerText&&l.appendChild(s.getFooter()),this.footerFormComponent){var d=i.createDiv(["footer-form"]);d.appendChild(this.footerFormComponent.render()),l.appendChild(d)}if(n&&n.length){u=s.getGlobalActions();h.appendChild(u),s.firstActionButton||(s.firstActionButton=u.firstElementChild)}return this.element=h,h.querySelectorAll("span.".concat(c)).forEach((function(t){var s=t,r=a.find((function(e){return e.id===t.id}));if(r){i.addCSSClass(t,c,"display-".concat(r.displayType));var n=o.ActionComponentFactory.fromActionPayload(r,i,e.settings,e.shareText,e.options);n&&(n.onActionClick=e.handleOnActionClick.bind(e),n.render(),s.onclick=function(t){return n.handleOnClick(t)})}})),h},t.prototype.getHeader=function(){return h(this.headerText,"message-header",this.util,this.settings.embeddedVideo)},t.prototype.getContent=function(t){var e=this.util.createDiv(["message-bubble"]);return e.style.padding=this.settings.messagePadding||e.style.padding,t&&e.appendChild(t),e},t.prototype.getActions=function(){var t=this.settings,e=t.displayActionsAsPills?["message-global-actions"]:["message-actions"];return"horizontal"!==t.actionsLayout&&e.push("col"),l(this.actions,e,this.util)},t.prototype.getFooter=function(){return h(this.footerText,"message-footer",this.util,this.settings.embeddedVideo)},t.prototype.getGlobalActions=function(){var t=["message-global-actions"];return this.settings.icons.avatarBot&&t.push("has-message-icon"),"horizontal"!==this.settings.globalActionsLayout&&t.push("col"),l(this.globalActions,t,this.util)},t.prototype.buildActions=function(t,e){var s=this.settings;return function(t,e,s,i,r,n){var a=[];return t.forEach((function(t){var c=o.ActionComponentFactory.fromActionPayload(t,e,s,i,r);c&&(c.onActionClick=n,a.push(c))})),a}(t,this.util,s,e,this.options,this.handleOnActionClick.bind(this))},t}();function h(t,e,s,i){var r=s.createDiv(["message-bubble",e]),o=s.createTextDiv();return o.innerHTML=(0,a.linkify)(t,s.cssPrefix,i),r.appendChild(o),r}function l(t,e,s){var i=s.createTextDiv(e);return t.forEach((function(t){i.appendChild(t.render())})),i}e.MessageComponent=c},913:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.RawMessageComponent=void 0;var o=function(t){function e(e,s,i,r,o,n){var a=t.call(this,e,s,i,r,o,n)||this;return a.Ge=JSON.stringify(i.payload),a}return r(e,t),e.prototype.getContent=function(){var e=this.util.createTextSpan();return e.innerText=this.Ge,t.prototype.getContent.call(this,e)},e}(s(398).MessageComponent);e.RawMessageComponent=o},774:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.FeedbackComponent=void 0;var o=s(858),n=s(609),a=function(t){function e(e,s,i,r,o,n){var a=t.call(this,e,s,i,r,o,n)||this;return a.Is=0,a.Es=i.actions,a.ratingId=Date.now(),a}return r(e,t),e.prototype.focusFirstAction=function(){this.Ls[0].focus()},e.prototype.disableActions=function(){this.Ps(!0),t.prototype.disableActions.call(this)},e.prototype.disablePostbacks=function(){this.Ps(!0),t.prototype.disablePostbacks.call(this)},e.prototype.enableActions=function(){this.Ps(!1),t.prototype.enableActions.call(this)},e.prototype.enablePostbacks=function(){this.Ps(!1),t.prototype.enablePostbacks.call(this)},e.prototype.highlightRating=function(t){if(this.actions&&this.Ls)for(var e=this.util,s="active",i="string"==typeof t?this.js(t):t,r=1;r<=this.Ls.length;r++){var o=this.Ls[r-1];if(!o)break;i&&r<=i||0===i&&r<=this.Is?e.addCSSClass(o,s):e.removeCSSClass(o,s)}},e.prototype.getActions=function(){var t=this,e=this.util,s=this.settings,i=s.i18n[s.locale].ratingStar,r=e.createDiv(["rating-wrapper"]);this.Ls=this.Es.map((function(o){var a=e.createElement("input",["star-input","rating-hidden"]);a.id="rating-".concat(o.label,"-").concat(t.ratingId),a.type="radio",a.name="rating-".concat(t.ratingId),a.value=o.label;var c=e.createLabel(["star-label"]);c.htmlFor="rating-".concat(o.label,"-").concat(t.ratingId),c.setAttribute("data-rating",o.label);var h=e.createTextSpan(["rating-hidden"]),l=i.replace("{0}","".concat(o.label));h.innerText=l;var p=s.icons&&s.icons.rating||n.iconRating,u=e.createImageIcon({icon:p,iconCss:["rating-star-icon"]});return c.appendChild(h),c.appendChild(u),a.onfocus=function(){a.disabled||(t.Is=t.Hs(a))},a.onkeydown=function(e){"Enter"===e.key&&t.Vs(o)},c.onclick=function(){a.disabled||(t.Is=t.Hs(c),t.Vs(o))},c.onmouseover=function(){a.disabled||t.Hs(c)},c.onmouseleave=function(){a.disabled||t.Hs(null)},r.appendChild(a),r.appendChild(c),a})),this.Is&&this.Hs(null);var o=e.createDiv(["rating-root"]);return o.appendChild(r),o},e.prototype.Ps=function(t){this.Ls&&this.Ls.forEach((function(e){e.disabled=t}))},e.prototype.Vs=function(t){var e={getPayload:function(){return Promise.resolve(t.postback)},label:t.label,type:t.type};this.handleOnActionClick(e)},e.prototype.Hs=function(t){var e=0;if(t){var s="value"in t?t.value:null==t?void 0:t.getAttribute("data-rating");e=s?parseInt(s,10):0}return this.highlightRating(e),e},e.prototype.js=function(t){var e=0;if(t.match(/^\d+$/)){var s=parseInt(t,10);s>0&&s<=this.actions.length&&(e=s)}return e},e}(o.TextMessageComponent);e.FeedbackComponent=a},858:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.TextMessageComponent=void 0;var o=s(168),n=s(398),a=s(373),c=s(549),h=function(t){function e(e,s,i,r,o,n){var a=t.call(this,e,s,i,r,o,n)||this;return a.$s=i.text,a}return r(e,t),e.prototype.getContent=function(){var e=this.settings,s=this.util,i=this.$s,r=s.createTextDiv(["message-text"]);return this.side===n.MESSAGE_SIDE.RIGHT?(0,a.isPostbackPayload)(this.payload)&&l(i)?(s.addCSSClass(r,"message-user-postback"),r.innerHTML=i):r.textContent=p(i):(r.innerHTML=(0,c.linkify)(i,s.cssPrefix,e.embeddedVideo),e.linkHandler?(0,o.setEmbeddedLinksHandler)(r,e.linkHandler):e.openLinksInNewWindow&&(0,o.setLinksOpenInNewWindow)(r)),t.prototype.getContent.call(this,r)},e}(n.MessageComponent);e.TextMessageComponent=h;var l=function(t){return!!t&&/^<img\s+/i.test(t)},p=function(t){return t.replace(/&#x([0-9a-f]+);/gi,(function(t,e){return String.fromCharCode(parseInt(e,16))}))}},65:function(t,e,s){var i,r=this&&this.yh||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)});Object.defineProperty(e,"xh",{value:!0}),e.TextStreamMessageComponent=void 0;var o=s(398),n=s(752),a=s(168),c=s(549),h="start",l="end",p=function(t){function e(e,s,i,r,o,n){var h=t.call(this,e,s,i,r,o,n)||this;h.Ts="",h.As=i.streamState,h.$s=i.text,h.Ts=i.text;var p="";return h.Os=u((function(t){var i=(p+=t).length%20?p:(0,c.linkify)(p,s.cssPrefix,e.embeddedVideo),r=(0,a.convertBreakTagsToNewLines)(i);h.textElement&&(h.textElement instanceof HTMLInputElement||h.textElement instanceof HTMLTextAreaElement?(h.textElement.focus(),h.textElement.value=r,h.textElement instanceof HTMLTextAreaElement&&(h.textElement.scrollTop=h.textElement.scrollHeight)):h.textElement.innerHTML=r)}),(function(){var t;h.As===l&&(h.isCoPilot?h.showDone():(h.$s=null===(t=h.textElement)||void 0===t?void 0:t.innerHTML,h.render()))}),e.typingDelay||1),h}return r(e,t),e.prototype.update=function(t){var e=t.streamState;switch(this.As=e,e){case h:this.renderClean(t),this.isCoPilot&&this.Os.push(t.text.split(""));break;case"running":this.Os.push(t.text.split("")),this.Ts=t.text;break;case l:var s=this.Ts;if(this.Ts="",s.length){var i=t.text.lastIndexOf(s);if(i>=0){var r=t.text.substring(i+s.length);this.Os.push(r.split("")),this.isCoPilot||this.setAddOnComponents(t);break}}this.renderClean(t)}},e.prototype.getContent=function(){var e,s=this.settings,i=this.util,r=i.createTextDiv();return r.setAttribute("aria-hidden","true"),this.As!==h&&this.textElement?(r.innerHTML=(0,c.linkify)(this.$s,i.cssPrefix,s.embeddedVideo),this.As===l&&r.removeAttribute("aria-hidden"),s.linkHandler?(0,a.setEmbeddedLinksHandler)(r,s.linkHandler):s.openLinksInNewWindow&&(0,a.setLinksOpenInNewWindow)(r)):(this.textElement=r,this.Os.push(null===(e=this.$s)||void 0===e?void 0:e.split(""))),t.prototype.getContent.call(this,r)},e.prototype.renderClean=function(t){this.Os.clear(),this.$s=t.text,this.isCoPilot||(this.setAddOnComponents(t),this.render())},e.prototype.setAddOnComponents=function(t){this.headerText=t.headerText,t.actions&&(this.actions=this.buildActions(t.actions)),this.footerText=t.footerText,t.footerForm&&(this.footerFormComponent=(0,a.getFooterFormComponent)(this.util,t.footerForm,this.settings,this.options)),t.globalActions&&(this.globalActions=this.buildActions(t.globalActions)),this.Ye=(0,n.getPostActions)(this.actions).concat((0,n.getPostActions)(this.globalActions))},e}(o.MessageComponent);e.TextStreamMessageComponent=p;var u=function(t,e,s){var i=[],r=!0,o=function(){if(!i.length)return r=!0,void setTimeout((function(){return e()}));setTimeout((function(){i.length&&(t(i.shift()),o())}),s)};return{push:function(t){i.push.apply(i,t),r&&(r=!1,o())},clear:function(){i.length=0}}}},144:function(t,e,s){Object.defineProperty(e,"xh",{value:!0}),e.defaultSettings=void 0;var i=s(349),r=s(336),o="Please try sharing it again, or else type it in.";e.defaultSettings={badgePosition:{right:"-5px",top:"-5px"},clientAuthEnabled:!1,conversationBeginPosition:"bottom",disablePastActions:"all",displayActionsAsPills:!1,sidepanel:!1,embedded:!1,embeddedVideo:!0,enableAgentSneakPreview:!1,enableAttachment:!0,enableAttachmentSecurity:!1,enableHeaderActionCollapse:!0,enableAutocomplete:!1,enableAutocompleteClientCache:!1,enableBotAudioResponse:!1,enableDefaultClientResponse:!1,enableClearMessage:!1,enableEndConversation:!0,enableHeadless:!1,enableLocalConversationHistory:!1,enableLongPolling:!1,enableResizableWidget:!1,enableSendTypingStatus:!1,enableSecureConnection:!0,enableSpeech:!1,enableSpeechAutoSend:!0,enableTabsSync:!0,enableTimestamp:!0,enableVoiceOnlyMode:!1,focusOnNewMessage:"input",height:"620px",i18n:{en:{agent:"Agent",agentMessage:"{0} says",attachment_audio:"Audio attachment",attachment_file:"File attachment",attachment_image:"Image attachment",attachment_video:"Video attachment",attachmentAudioFallback:"Your browser does not support embedded audio. However you can {0}download it{/0}.",attachmentVideoFallback:"Your browser does not support embedded video. However you can {0}download it{/0}.",audioResponseOff:"Turn audio response on",audioResponseOn:"Turn audio response off",avatarAgent:"Agent icon",avatarBot:"Bot icon",avatarUser:"User icon",card:"Card {0}",cardImagePlaceholder:"Card image",cardNavNext:"Next card",cardNavPrevious:"Previous card",chatTitle:"Chat",clear:"Clear conversation",close:"Close widget",closing:"Closing",connected:"Connected",connecting:"Connecting",connectionFailureMessage:"Sorry, the assistant is unavailable right now. If the issue persists, contact your help desk.",connectionRetryLabel:"Try Again",copyFailureMessage:"Sorry, copying is not available on this device.",copySuccessMessage:"Successfully copied the response text to the clipboard.",defaultGreetingMessage:"Hey, Nice to meet you! Allow me a moment to get back to you.",defaultWaitMessage:"I'm still working on your request. Thank you for your patience!",defaultSorryMessage:"I'm sorry. I can't get you the right content. Please try again.",disconnected:"Disconnected",download:"Download",editFieldErrorMessage:"Field input is invalid",editFormErrorMessage:"Some of the fields need your attention",endConversation:"End Conversation",endConversationConfirmMessage:"Are you sure you want to end the conversation?",endConversationDescription:"This will also clear your conversation history.",errorSpeechInvalidUrl:"ODA URL for connection is not set. Please pass 'URI' parameter during SDK initialization.",errorSpeechMultipleConnection:"Another voice recognition is ongoing. Can't start a new one.",errorSpeechTooMuchTimeout:"The voice message is too long to recognize and generate text.",errorSpeechUnavailable:"To allow voice messaging, update your browser settings to enable access to your microphone.",errorSpeechUnsupportedLocale:"The locale set for voice recognition is not supported. Please use a valid locale in 'speechLocale' setting.",inputPlaceholder:"Type a message",imageViewerClose:"Close image viewer",imageViewerOpen:"Open image viewer",itemIterator:"Item {0}",language_ar:"Arabic",language_de:"German",language_detect:"Detect Language",language_en:"English",language_es:"Spanish",language_fr:"French",language_hi:"Hindi",language_it:"Italian",language_nl:"Dutch",language_pt:"Portuguese",languageSelectDropdown:"Select chat language",linkField:"Click on the highlighted text to open Link for {0}",noResultText:"No more results",noSpeechTimeout:"The voice could not be detected to perform recognition.",noText:"No",openMap:"Open Map",previousChats:"End of previous conversation",ratingStar:"Rate {0} star",recognitionTextPlaceholder:"Speak your message",relTimeDay:"{0}d ago",relTimeHr:"{0}hr ago",relTimeMin:"{0}min ago",relTimeMoment:"A few seconds ago",relTimeMon:"{0}mth ago",relTimeNow:"Now",relTimeYr:"{0}yr ago",requestLocation:"Requesting location",requestLocationDeniedPermission:"To allow sharing your location, update your browser settings to enable access to your location. You can also type in the location instead.",requestLocationDeniedTimeout:"It is taking too long to get your location. ".concat(o),requestLocationDeniedUnavailable:"Your current location is unavailable. ".concat(o),retryMessage:"Try again",send:"Send message",shareAudio:"Share Audio",shareFailureMessage:"Sorry, sharing is not available on this device.",shareFile:"Share File",shareLocation:"Share Location",shareVisual:"Share Image/Video",skillMessage:"Skill says",showOptions:"Show Options",speak:"Speak a message",typingIndicator:"Waiting for response",upload:"Share popup",uploadFailed:"Upload Failed.",uploadFileNetworkFailure:"Upload not completed due to network failure.",uploadFileSizeLimitExceeded:"File size should not be more than {0}MB.",uploadFileSizeZeroByte:"Files of size zero bytes can't be uploaded.",uploadUnauthorized:"Upload request is unauthorized.",uploadUnsupportedFileType:"Unsupported file type.",userMessage:"I say",utteranceGeneric:"Message from skill.",webViewAccessibilityTitle:"In-widget WebView to display links",webViewClose:"Done",webViewErrorInfoDismiss:"Dismiss",webViewErrorInfoText:"Don't see the page? {0}Click here{/0} to open it in a browser.",yesText:"Yes"},ar:{language_ar:"اَلْعَرَبِيَّةُ"},de:{language_de:"Deutsch"},es:{language_es:"Español"},fr:{language_fr:"Français"},hi:{language_hi:"हिन्दी"},it:{language_it:"Italiano"},nl:{language_nl:"Nederlands"},pt:{language_pt:"Português"}},initBotAudioMuted:!0,initMessageOptions:{sendAt:"expand"},disableInlineCSS:!1,isDebugMode:!1,locale:"en",messageCacheSizeLimit:2e3,name:"oda-chat",openChatOnLoad:!1,openLinksInNewWindow:!1,readMark:"✓",reconnectInterval:5,reconnectMaxAttempts:5,shareMenuItems:[r.ShareCategory.AUDIO,r.ShareCategory.FILE,r.ShareCategory.LOCATION,r.ShareCategory.VISUAL],showConnectionStatus:!1,showPrevConvStatus:!0,showTypingIndicator:!0,speechLocale:i.RecognitionLocale.EN_US,theme:r.WidgetTheme.DEFAULT,timestampMode:"default",defaultGreetingTimeout:5,defaultWaitMessageInterval:5,typingIndicatorTimeout:30,typingStatusInterval:3,typingDelay:0,upgradeToWebSocketInterval:300,webViewConfig:{},width:"375px",actionsLayout:"vertical",globalActionsLayout:"vertical",cardActionsLayout:"vertical",formActionsLayout:"vertical"}},682:function(t,e,s){var i=this&&this.kh||function(){return i=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var r in e=arguments[s])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};Object.defineProperty(e,"xh",{value:!0});var r=s(349),o=s(336),n=s(476),a=s(420),c=s(144),h={},l={avatarAgent:"agentAvatar",avatarBot:"botIcon",avatarUser:"personIcon",fileAudio:"audioIcon",fileImage:"imageIcon",fileGeneric:"fileIcon",fileVideo:"videoIcon",clearHistory:"clearMessageIcon",close:void 0,collapse:"closeIcon",download:"downloadIcon",error:"errorIcon",expandImage:"expandImageIcon",keyboard:"keyboardIcon",logo:"logoIcon",launch:"botButtonIcon",mic:"micIcon",rating:void 0,send:"sendIcon",shareMenu:"attachmentIcon",shareMenuAudio:void 0,shareMenuFile:void 0,shareMenuLocation:void 0,shareMenuVisual:void 0,ttsOff:"audioResponseOffIcon",ttsOn:"audioResponseOnIcon",typingIndicator:"chatBubbleIcon"};function p(t){for(var e={},s=0,i=Object.keys(t);s<i.length;s++){var r=i[s];e[r.toLowerCase()]=t[r]}return e}function u(t,e){var s=i(i({},t),e);if(e.i18n&&Object.keys(e.i18n).length){t.i18n=p(t.i18n),e.i18n=p(e.i18n);var r=new Set;Object.keys(t.i18n).forEach((function(t){r.add(t)})),Object.keys(e.i18n).forEach((function(t){r.add(t)})),s.i18n={},r.forEach((function(r){s.i18n[r]=i(i(i({},t.i18n.en),t.i18n[r]),e.i18n[r])}))}if(s.colors=i(i({},t.colors),e.colors),s.userId=e.userId||"user".concat(Math.floor(1e4+9e4*Math.random())).concat(Date.now()%1e5),s.icons=function(t){var e=t.icons||{};for(var s in l){var i=s,r=l[i];r in t&&(e[i]=t[r])}return e}(s),s.locale=(0,o.configureLocale)(s.locale,s.i18n),e.typingStatusInterval&&e.typingStatusInterval<t.typingStatusInterval&&(s.typingStatusInterval=t.typingStatusInterval),s.enableVoiceOnlyMode&&(s.enableBotAudioResponse=!0,s.initBotAudioMuted=!1,s.enableSpeech=!0),!s.position){var n="rtl"===window.getComputedStyle(document.body).direction;s.position=n?{left:"20px",bottom:"20px"}:{right:"20px",bottom:"20px"}}return s}function d(t,e){var s,l,p,f=this,b=u(c.defaultSettings,t),v=(0,n.generateEventDispatcher)(),w=!1,x=b.name,k=new o.DOMUtil(b);o.Logger.logLevel=b.isDebugMode?o.Logger.LOG_LEVEL.DEBUG:o.Logger.LOG_LEVEL.ERROR,o.Logger.appName=b.name,o.Logger.appVersion=o.SDK_VERSION;var y=new o.Logger("main"),_=new r.WebCore({URI:b.URI,channelId:b.channelId,userId:b.userId,isTLS:b.enableSecureConnection,channel:b.channel,enableAttachment:b.enableAttachment,enableAttachmentSecurity:b.enableAttachmentSecurity,isLongPoll:b.enableLongPolling,isTTS:b.enableBotAudioResponse,TTSService:b.ttsService,tokenGenerator:b.clientAuthEnabled?e:null,recognitionLocale:b.speechLocale,retryInterval:b.reconnectInterval,retryMaxAttempts:b.reconnectMaxAttempts});if(b.skillVoices&&(!b.ttsVoice||Array.isArray(b.ttsVoice)&&!b.ttsVoice.length)&&(b.ttsVoice=b.skillVoices),b.enableBotAudioResponse)try{b.ttsVoice&&_.setTTSVoice(b.ttsVoice)}catch(t){y.error("Failed to initialize TTS")}var z=Object.values(r.RecognitionLocale),M=function(t){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];1===e.length?y.error("Parameter ".concat(e," was not passed for ").concat(t," call. No action processed.")):y.error("Parameters ".concat(e.join(", ")," were not passed for ").concat(t," call. No action processed."))},C=function(t){v.trigger(o.ChatEvent.MESSAGE_SENT,t),v.trigger(o.ChatEvent.MESSAGE,t)},S=function(t){v.trigger(o.ChatEvent.MESSAGE_RECEIVED,t),v.trigger(o.ChatEvent.MESSAGE,t)},$=function(t){v.trigger(o.ChatEvent.NETWORK,t)},T=function(t){k.updateCSSVar("--position-top",t.top||"unset"),k.updateCSSVar("--position-left",t.left||"unset"),k.updateCSSVar("--position-right",t.right||"unset"),k.updateCSSVar("--position-bottom",t.bottom||"unset"),t.bottom&&k.updateCSSVar("--widget-max-height","calc(100vh - 60px - ".concat(t.bottom,")"))},A=function(){(s=new o.WidgetComponent(b,k,f.connect.bind(f),f.openChat.bind(f),f.closeChat.bind(f),I.bind(f),S.bind(f),C.bind(f),f.getUnreadMessagesCount.bind(f),$.bind(f),_,v)).styleSheet=p,s.contextWidgetMap=h,s.render()},O=function(){v.trigger(o.ChatEvent.READY),O=function(){}};this.configureWidget=function(t,e,i){void 0===i&&(i=!0);var r=new o.ContextualWidgetComponent(b,k,t,e,i,h,_,s,v);return f.isConnected()||f.connect(),h[r.threadId]=r,r},this.updateChatContext=function(t,e,s,r,n){var a=void 0===n?{}:n,c=a.event,h=a.semanticObject;return t||M("updateChatContext","appContext"),_.updateChatContext(t,{properties:i(i({},(0,o.getFieldInputValues)(e)),s),event:c,semanticObject:h},r,b.sdkMetadata?i({version:o.SDK_VERSION},b.sdkMetadata):{version:o.SDK_VERSION})},this.connect=function(t){var e,i=void 0===t?{}:t,r=i.URI,o=i.channelId,n=i.userId;return r||o||n?(!function(t,e,i){"string"==typeof t&&t.length&&(b.URI=t),"string"==typeof e&&e.length&&(b.channelId=e),"string"==typeof i&&i.length&&(b.userId=i,s.configureStorage())}(r,o,n),e=_.connect({URI:r,channelId:o,userId:n})):e=_.connect(),e.then((function(){y.debug("Connection ready")}),(function(){y.debug("Connection timeout"),s.showConnectionError()})).finally((function(){O()})),e},this.disconnect=function(){return b.enableSpeech&&f.stopVoiceRecording(),b.enableBotAudioResponse&&f.cancelTTS(),_.disconnect()},this.isConnected=function(){return _.isConnected()},this.openChat=function(){s.isOpen||(s.showChat(),w&&(f.connect(),w=!1)),v.trigger(o.ChatEvent.WIDGET_OPENED)},this.closeChat=function(){s.isOpen&&s.onClose(),v.trigger(o.ChatEvent.WIDGET_CLOSED)},this.endChat=function(){f.isConnected()&&s.sendExitEvent()};var I=function(){s.isOpen&&f.closeChat(),f.disconnect(),f.clearConversationHistory(),w=!0,v.trigger(o.ChatEvent.CHAT_END)};this.isChatOpened=function(){return s.isOpen},this.destroy=function(){if(f.disconnect(),f.closeChat(),s.remove(),document){p&&p.remove()}for(var t in v.trigger(o.ChatEvent.DESTROY),f.off(),f)f[t]&&delete f[t]},this.on=function(t,e){switch(t){case r.SpeechSynthesisServiceEvent.TTSStart:case r.SpeechSynthesisServiceEvent.TTSStop:_.on(t,e);break;default:v.bind(t,e)}},this.off=function(t,e){switch(t){case r.SpeechSynthesisServiceEvent.TTSStart:case r.SpeechSynthesisServiceEvent.TTSStop:_.off(t,e);break;default:v.unbind(t,e)}},this.sendAttachment=function(t){return t?s.uploadFile(t):(M("sendAttachment","file"),Promise.reject(new Error("Invalid Parameter")))},this.sendMessage=function(t,e){return t?s.sendMessage(t,e):(M("sendMessage","message"),Promise.reject(new Error("Invalid Parameter")))},this.sendUserTypingStatus=function(t,e){return t?_.sendUserTypingStatus(t,e):(M("sendUserTypingStatus","status"),Promise.reject(new Error("Invalid Parameter")))},this.updateUser=function(t){return t?_.updateUser(t,{sdkMetadata:{version:o.SDK_VERSION}}).then((function(t){return C(t)})):(M("updateUser","userDetails"),Promise.reject(new Error("Invalid Parameter")))},this.setUserAvatar=function(t){t?s.setUserAvatar(t):M("setUserAvatar","userAvatar")},this.setAgentDetails=function(t){t?s.setAgentDetails(t):M("setAgentDetails","agentDetails")},this.getAgentDetails=function(){return s.getAgentDetails()},this.setSkillVoices=function(t){if(!_.getTTSService())return g();var e=[];return t&&!Array.isArray(t)&&"string"==typeof(null==t?void 0:t.lang)?e=[t]:Array.isArray(t)&&(e=t),f.setTTSVoice(e)},this.setTTSService=function(t){var e=_.getTTSService();e&&e.cancel(),"string"==typeof t?_.setTTSService(t):_.setTTSService(function(t){return t&&(0,n.isFunction)(t.speak)&&(0,n.isFunction)(t.cancel)&&(0,n.isFunction)(t.getVoice)&&(0,n.isFunction)(t.getVoices)&&(0,n.isFunction)(t.setVoice)}(t)?t:null);var i=_.getTTSService();b.ttsService=i,s&&s.refreshTTS(),i&&(b.enableBotAudioResponse=!0,(0,o.isAnyVoiceAvailable)(i,b.ttsVoice).then((function(t){t||(b.ttsVoice=[]);var e=(0,o.syncTTSLocaleIfUnavailable)({hasRecognition:b.enableSpeech,hasSynthesis:b.enableBotAudioResponse,recognitionLocale:b.speechLocale,synthesisLocales:b.ttsVoice});e&&i.setVoice(e).catch((function(t){y.error(t)})),b.ttsVoice=e})))},this.getTTSVoices=function(){return _.getTTSVoices()},this.setTTSVoice=function(t){var e=_.getTTSService();return e?(0,o.isAnyVoiceAvailable)(e,b.ttsVoice).then((function(e){return b.ttsVoice=(0,o.syncTTSLocaleIfUnavailable)({hasRecognition:b.enableSpeech,hasSynthesis:b.enableBotAudioResponse,isReset:e,recognitionLocale:b.speechLocale,synthesisLocales:t}),_.setTTSVoice(t).catch((function(){return g()}))})):g()},this.getTTSVoice=function(){try{return _.getTTSVoice()}catch(t){throw Error(m)}},this.speakTTS=function(t){_.speakTTS(t,b.i18n[b.locale])},this.cancelTTS=function(){_.cancelTTS()},this.setPrimaryChatLanguage=function(t){if(null!==t&&"string"!=typeof t)throw Error("Please pass a language string or null as argument");f.isConnected()?s.setPrimaryChatLanguage(t):y.error("Not connected. Can not call setPrimaryChatLanguage.")},this.setDelegate=function(t){b.delegate=t},this.getConversationHistory=function(){var t=s.getMessages();return{messages:t,messagesCount:t.length,unreadCount:f.getUnreadMessagesCount(),userId:b.userId}},this.clearConversationHistory=function(t,e){void 0===e&&(e=!0),t&&"string"!=typeof t?y.error("Argument passed in clearConversationHistory() is not of type string. Returning without execution."):(t&&0!==t.length||(t=b.userId),e&&t===b.userId?s.clearConversationHistory():s.clearMessages(t,o.StorageType.LOCAL))},this.clearAllConversationsHistory=function(t){void 0===t&&(t=!0),s.clearAllMessage(),t&&s.clearConversationHistory()},this.getSuggestions=function(t){return b.enableAutocomplete?t?"string"!=typeof t&&"number"!=typeof t?Promise.reject("Invalid query parameter type passed for the getSuggestions call."):s.getSuggestions(t):Promise.reject("No query parameter passed for the getSuggestions call."):Promise.reject("Autocomplete suggestions not enabled.")},this.startVoiceRecording=function(t,e,s){return b.enableSpeech?t?e?_.startRecognition({onRecognitionText:function(e){t(e.message)},onAnalyserReady:null==s?void 0:s.onAnalyserReady,onVisualData:null==s?void 0:s.onAnalyserFrequencies,onSpeechNetworkChange:e}):Promise.reject(new Error("Second callback parameter, onSpeechNetworkChange not provided. Can not start recording")):Promise.reject(new Error("First callback parameter, onSpeechRecognition not provided. Can not start recording.")):Promise.reject(new Error("Speech-to-text feature is not enabled. Initialize the widget with enableSpeech: true to use the service."))},this.stopVoiceRecording=function(){if(!b.enableSpeech)throw new Error("Speech-to-text feature is not enabled. Speech recognition service is not running.");return _.stopRecognition()},this.setSpeechLocale=function(t){if(!b.enableSpeech)return!1;t=t.toLowerCase();var e=z.indexOf(t)>=0;if(b.speechLocale=t,_.setRecognitionLocale(t),s.setVoiceRecognitionService(e),e&&b.enableBotAudioResponse){var i=(0,o.syncTTSLocaleIfUnavailable)({hasRecognition:b.enableSpeech,hasSynthesis:b.enableBotAudioResponse,recognitionLocale:b.speechLocale,synthesisLocales:b.ttsVoice});i!==b.ttsVoice&&(b.ttsVoice=i,i.length&&_.setTTSVoice(i))}return e},this.getUnreadMessagesCount=function(){if(b.enableHeadless)return 0;var t=s.getUnreadMsgsCount();return t!==l&&(l=t,v.trigger(o.ChatEvent.UNREAD,t)),t},this.setAllMessagesAsRead=function(){b.enableHeadless||(f.getUnreadMessagesCount(),s.updateNotificationBadge(0))},this.showTypingIndicator=function(){if(!b.showTypingIndicator)throw new Error("Typing indicator is configured not to be shown.");if(b.enableHeadless)throw new Error("Typing indicator cannot be shown in headless mode.");f.isConnected()&&s.showTypingIndicator()},this.setWebViewConfig=function(t){if(b.enableHeadless)throw new Error("WebView cannot be configured in headless mode.");s.refreshWebView(t)},this.setUserInputMessage=function(t){if(b.enableHeadless)throw new Error("User input cannot be set in headless mode.");s.setUserInputMessage(t)},this.setUserInputPlaceholder=function(t){if(b.enableHeadless)throw new Error("Placeholder cannot be set in headless mode.");t?s.setUserInputPlaceholder(t):M("setUserInputPlaceholder","placeholder text")},this.setHeight=function(t){t?null==s||s.setHeight(t):M("setHeight","height")},this.setWidth=function(t){t?null==s||s.setWidth(t):M("setWidth","width")},this.setSize=function(t,e){t||e?null==s||s.setSize(t,e):M("setSize","width","height")},this.setMessagePadding=function(t){t?null==s||s.setMessagePadding(t):M("setMessagePadding","padding")},this.setChatBubbleIconHeight=function(t){t?null==s||s.setChatBubbleIconHeight(t):M("setChatBubbleIconHeight","height")},this.setChatBubbleIconWidth=function(t){t?null==s||s.setChatBubbleIconWidth(t):M("setChatBubbleIconWidth","width")},this.setChatBubbleIconSize=function(t,e){t||!e?null==s||s.setChatBubbleIconSize(t,e):M("setChatBubbleIconSize","width","height")},this.setFont=function(t){t?(k.updateCSSVar("font",t),b.font=t):M("setFont","font")},this.setFontFamily=function(t){t?(k.updateCSSVar("font-family",t),b.fontFamily=t):M("setFontFamily","fontFamily")},this.setFontSize=function(t){t?k.updateCSSVar("font-size",t):M("setFontSize","fontSize")},this.setTextColor=function(t){t?(k.updateCSSVar("--color-bot-text",t),k.updateCSSVar("--color-user-text",t)):M("setTextColor","color")},this.setTextColorLight=function(t){t?(k.updateCSSVar("--color-text-light",t),b.colors.textLight=t):M("setTextColorLight","color")},function(){if(y.debug("onLoad","load chat widget"),"undefined"!=typeof window){if(!b.disableInlineCSS){var t=!1,e=document.head.children;(p=document.createElement("style")).appendChild(document.createTextNode(a.redwoodStyles.replace(/(\.)([a-zA-Z_-]+)(?=[^}]+{)/gi,"$1".concat(x,"-$2"))));for(var s=0;s<e.length;s++){var i=e.item(s);if("style"===i.nodeName.toLowerCase()){document.head.insertBefore(p,i),t=!0;break}}t||document.head.appendChild(p)}T(b.position),(0,o.configureColorCustomization)(b.colors,k),b.font&&f.setFont(b.font),b.fontFamily&&f.setFontFamily(b.fontFamily),b.fontSize&&f.setFontSize(b.fontSize)}A()}(),(0,n.setReadOnly)(this);var E=window;E&&"function"==typeof E.define&&E.define.amd&&(E.WebSDK=d)}e.default=d;var m="Text-to-speech is not available.";function g(){return t=m,Promise.reject(Error(t));var t}d.EVENT=o.ChatEvent,d.SPEECH_LOCALE=r.RecognitionLocale,d.THEME=o.WidgetTheme,d.TTS=r.CoreTTS,d.Version=o.SDK_VERSION,(0,n.deepFreeze)(d)}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,s),o.exports}s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"xh",{value:!0})};var i=s(682);return i=i.default}()}));